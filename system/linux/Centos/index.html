
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Material Design theme for MyNotes">
      
      
        <meta name="author" content="Black-Gold">
      
      
        <link rel="canonical" href="https://19950128.com/system/linux/Centos/">
      
      
        <link rel="prev" href="../../">
      
      
        <link rel="next" href="../Debian/">
      
      
      <link rel="icon" href="../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.11">
    
    
      
        <title>Centos - Material Design for MyNotes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12v4c0 1.11-.89 2-2 2h-4.1l-3.7 3.71c-.2.18-.44.29-.7.29H9a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.5c-.55.67-1 1.42-1.36 2.25L7.85 7l.29.75C9.43 10.94 12.5 13 16 13c1.44 0 2.8-.37 4-1m-4-6c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c2.73 0 5.06 1.66 6 4-.94 2.34-3.27 4-6 4s-5.06-1.66-6-4c.94-2.34 3.27-4 6-4m0 1.5A2.5 2.5 0 0 0 13.5 7 2.5 2.5 0 0 0 16 9.5 2.5 2.5 0 0 0 18.5 7 2.5 2.5 0 0 0 16 4.5"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Fira Code"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="lime">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linux" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Material Design for MyNotes" class="md-header__button md-logo" aria-label="Material Design for MyNotes" data-md-component="logo">
      
  <img src="../../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Material Design for MyNotes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Centos
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="lime"  aria-label="切换到夜晚模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到夜晚模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="light-green"  aria-label="切换到白天模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到白天模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19.31 18.9 3.08 3.1L21 23.39l-3.12-3.07c-.69.43-1.51.68-2.38.68-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5c0 .88-.25 1.71-.69 2.4m-3.81.1a2.5 2.5 0 0 0 0-5 2.5 2.5 0 0 0 0 5M21 4v2H3V4h18M3 16v-2h6v2H3m0-5V9h18v2h-2.03c-1.01-.63-2.2-1-3.47-1s-2.46.37-3.47 1H3Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19.31 18.9 3.08 3.1L21 23.39l-3.12-3.07c-.69.43-1.51.68-2.38.68-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5c0 .88-.25 1.71-.69 2.4m-3.81.1a2.5 2.5 0 0 0 0-5 2.5 2.5 0 0 0 0 5M21 4v2H3V4h18M3 16v-2h6v2H3m0-5V9h18v2h-2.03c-1.01-.63-2.2-1-3.47-1s-2.46.37-3.47 1H3Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21 12-7-7v4C7 10 4 15 3 20c2.5-3.5 6-5.1 11-5.1V19l7-7Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 16.74 7.76 12 3 7.26 7.26 3 12 7.76 16.74 3 21 7.26 16.24 12 21 16.74 16.74 21 12 16.24 7.26 21 3 16.74m9-3.33 4.74 4.75 1.42-1.42L13.41 12l4.75-4.74-1.42-1.42L12 10.59 7.26 5.84 5.84 7.26 10.59 12l-4.75 4.74 1.42 1.42L12 13.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Black-Gold/MyNotes" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    Black-Gold/MyNotes
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../reference-example/" class="md-tabs__link">
        
  
    
  
  md语法中文参考

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  System

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../coding/" class="md-tabs__link">
          
  
    
  
  Programming

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../document/" class="md-tabs__link">
          
  
    
  
  Document

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Material Design for MyNotes" class="md-nav__button md-logo" aria-label="Material Design for MyNotes" data-md-component="logo">
      
  <img src="../../../images/logo.png" alt="logo">

    </a>
    Material Design for MyNotes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Black-Gold/MyNotes" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    Black-Gold/MyNotes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference-example/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.029 18.772.777 1.166-5.417 2.709L0 16.451V4.063l5.417-2.709 5.298 7.948 7.867-5.24L24 1.354V16.84l-5.417 2.709zm2.023-13.827v13.253l3.949-1.975V2.97zM5.076 2.642 1.458 4.45 12.73 21.358l3.618-1.809z"/></svg>
  
  <span class="md-ellipsis">
    md语法中文参考
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../blog/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    System
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Centos
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Centos
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      传统分区方案参考
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_1" class="md-nav__link">
    <span class="md-ellipsis">
      Linux文件系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux文件系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux_2" class="md-nav__link">
    <span class="md-ellipsis">
      linux磁盘详解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux_3" class="md-nav__link">
    <span class="md-ellipsis">
      linux系统引导流程解析
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      添加硬盘或分区详细步骤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linuxfhs" class="md-nav__link">
    <span class="md-ellipsis">
      Linux目录结构FHS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grub" class="md-nav__link">
    <span class="md-ellipsis">
      GRUB配置文件讲解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fstab" class="md-nav__link">
    <span class="md-ellipsis">
      fstab文件含义如下
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_" class="md-nav__link">
    <span class="md-ellipsis">
      Linux_用户、组和权限
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux_用户、组和权限">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux_4" class="md-nav__link">
    <span class="md-ellipsis">
      Linux用户和用户组
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-w-x" class="md-nav__link">
    <span class="md-ellipsis">
      权限：r, w, x
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      三、特殊权限
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      系统命令行快捷键
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ubuntu-desktop" class="md-nav__link">
    <span class="md-ellipsis">
      ubuntu Desktop相关设置
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bash" class="md-nav__link">
    <span class="md-ellipsis">
      BASH环境变量的设置方法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linuxjava" class="md-nav__link">
    <span class="md-ellipsis">
      Linux安装设置java环境
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    <span class="md-ellipsis">
      SSH相关命令和配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH相关命令和配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh_1" class="md-nav__link">
    <span class="md-ellipsis">
      ssh基本加固建议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sedssh" class="md-nav__link">
    <span class="md-ellipsis">
      sed命令更改默认ssh连接端口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sshd_configetcsshsshd_config" class="md-nav__link">
    <span class="md-ellipsis">
      sshd_config配置详解（/etc/ssh/sshd_config）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh_2" class="md-nav__link">
    <span class="md-ellipsis">
      SSH端口转发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH端口转发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      本地转发实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      远程转发实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      多主机转发应用实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      动态转发实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x" class="md-nav__link">
    <span class="md-ellipsis">
      X协议转发实例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esnet" class="md-nav__link">
    <span class="md-ellipsis">
      主机调整 [es.net]
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      优化内核参数 [根据实际情况调整]
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      不常用设置和记录
    </span>
  </a>
  
    <nav class="md-nav" aria-label="不常用设置和记录">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      服务器配置双机互信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centospythonyum" class="md-nav__link">
    <span class="md-ellipsis">
      centos完全重装python和yum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#root" class="md-nav__link">
    <span class="md-ellipsis">
      普通账号赋予root权限
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-float-ipip" class="md-nav__link">
    <span class="md-ellipsis">
      未采用双机热备防止服务中断--float IP(浮动IP配置)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centosip" class="md-nav__link">
    <span class="md-ellipsis">
      安装最新稳定centos内核&amp;更改为静态ip、网卡名称
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_5" class="md-nav__link">
    <span class="md-ellipsis">
      Linux数据恢复：最好是备份而不是尝试恢复
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux数据恢复：最好是备份而不是尝试恢复">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemrescuecd" class="md-nav__link">
    <span class="md-ellipsis">
      SystemRescueCd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      其他
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      基本服务搭建
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基本服务搭建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      时间同步
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vsftp" class="md-nav__link">
    <span class="md-ellipsis">
      Vsftp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsync" class="md-nav__link">
    <span class="md-ellipsis">
      rsync
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rsync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      选项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      实例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      后台服务方式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inotify-tools" class="md-nav__link">
    <span class="md-ellipsis">
      inotify-tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samba" class="md-nav__link">
    <span class="md-ellipsis">
      samba
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-dns" class="md-nav__link">
    <span class="md-ellipsis">
      Bind-DNS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      Bind-DHCP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mail-server" class="md-nav__link">
    <span class="md-ellipsis">
      mail server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mail server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#email" class="md-nav__link">
    <span class="md-ellipsis">
      email安装过程相关问题和配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    DebianDistros
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            DebianDistros
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Debian/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debian
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ubuntu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firewall
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../coding/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Programming
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../document/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Document
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      传统分区方案参考
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_1" class="md-nav__link">
    <span class="md-ellipsis">
      Linux文件系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux文件系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux_2" class="md-nav__link">
    <span class="md-ellipsis">
      linux磁盘详解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux_3" class="md-nav__link">
    <span class="md-ellipsis">
      linux系统引导流程解析
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      添加硬盘或分区详细步骤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linuxfhs" class="md-nav__link">
    <span class="md-ellipsis">
      Linux目录结构FHS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grub" class="md-nav__link">
    <span class="md-ellipsis">
      GRUB配置文件讲解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fstab" class="md-nav__link">
    <span class="md-ellipsis">
      fstab文件含义如下
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_" class="md-nav__link">
    <span class="md-ellipsis">
      Linux_用户、组和权限
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux_用户、组和权限">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux_4" class="md-nav__link">
    <span class="md-ellipsis">
      Linux用户和用户组
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-w-x" class="md-nav__link">
    <span class="md-ellipsis">
      权限：r, w, x
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      三、特殊权限
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      系统命令行快捷键
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ubuntu-desktop" class="md-nav__link">
    <span class="md-ellipsis">
      ubuntu Desktop相关设置
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bash" class="md-nav__link">
    <span class="md-ellipsis">
      BASH环境变量的设置方法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linuxjava" class="md-nav__link">
    <span class="md-ellipsis">
      Linux安装设置java环境
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    <span class="md-ellipsis">
      SSH相关命令和配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH相关命令和配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh_1" class="md-nav__link">
    <span class="md-ellipsis">
      ssh基本加固建议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sedssh" class="md-nav__link">
    <span class="md-ellipsis">
      sed命令更改默认ssh连接端口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sshd_configetcsshsshd_config" class="md-nav__link">
    <span class="md-ellipsis">
      sshd_config配置详解（/etc/ssh/sshd_config）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh_2" class="md-nav__link">
    <span class="md-ellipsis">
      SSH端口转发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH端口转发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      本地转发实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      远程转发实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      多主机转发应用实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      动态转发实例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x" class="md-nav__link">
    <span class="md-ellipsis">
      X协议转发实例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esnet" class="md-nav__link">
    <span class="md-ellipsis">
      主机调整 [es.net]
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      优化内核参数 [根据实际情况调整]
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      不常用设置和记录
    </span>
  </a>
  
    <nav class="md-nav" aria-label="不常用设置和记录">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      服务器配置双机互信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centospythonyum" class="md-nav__link">
    <span class="md-ellipsis">
      centos完全重装python和yum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#root" class="md-nav__link">
    <span class="md-ellipsis">
      普通账号赋予root权限
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-float-ipip" class="md-nav__link">
    <span class="md-ellipsis">
      未采用双机热备防止服务中断--float IP(浮动IP配置)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centosip" class="md-nav__link">
    <span class="md-ellipsis">
      安装最新稳定centos内核&amp;更改为静态ip、网卡名称
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_5" class="md-nav__link">
    <span class="md-ellipsis">
      Linux数据恢复：最好是备份而不是尝试恢复
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux数据恢复：最好是备份而不是尝试恢复">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemrescuecd" class="md-nav__link">
    <span class="md-ellipsis">
      SystemRescueCd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      其他
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      基本服务搭建
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基本服务搭建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      时间同步
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vsftp" class="md-nav__link">
    <span class="md-ellipsis">
      Vsftp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsync" class="md-nav__link">
    <span class="md-ellipsis">
      rsync
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rsync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      选项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      实例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      后台服务方式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inotify-tools" class="md-nav__link">
    <span class="md-ellipsis">
      inotify-tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samba" class="md-nav__link">
    <span class="md-ellipsis">
      samba
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-dns" class="md-nav__link">
    <span class="md-ellipsis">
      Bind-DNS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      Bind-DHCP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mail-server" class="md-nav__link">
    <span class="md-ellipsis">
      mail server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mail server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#email" class="md-nav__link">
    <span class="md-ellipsis">
      email安装过程相关问题和配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="linux">Linux<a class="headerlink" href="#linux" title="Permanent link">&para;</a></h1>
<p>I. stunnel -&gt; varnish -&gt; HAProxy -&gt; nginx -&gt; nodeJS -&gt; memcached(redis) (for session storage[Session 对象存储])</p>
<p>II. Apache Traffic Server/Squid/Vanish + HAProxy + Nginx + memcached(Redis) (for session storage[Session 对象存储])</p>
<p>III. nginx (for HTTP compression) –&gt; Varnish cache (for caching) –&gt; HTTP level load balancer (HAProxy, or nginx, or the Varnish built-in) –&gt; webservers</p>
<h2 id="_1">传统分区方案参考<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th style="text-align: center;">服务器类型</th>
<th style="text-align: center;">基本raid方案</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">单机服务器</td>
<td style="text-align: center;">视数据及性能要求，一般可采用raid5折中</td>
</tr>
<tr>
<td style="text-align: center;">负载均衡器（如LVS等）</td>
<td style="text-align: center;">数据量小，重要性高，可采用RAID1</td>
</tr>
<tr>
<td style="text-align: center;">负载均衡下的RS server</td>
<td style="text-align: center;">数据量大，重要性不高，有性能要求，数据要求低，可采用RAID0</td>
</tr>
<tr>
<td style="text-align: center;">数据库服务器</td>
<td style="text-align: center;">视数据及性能要求主库可采取raid10/raid5，从库可采用raid0提高性能（读写分离的情况下）</td>
</tr>
<tr>
<td style="text-align: center;">存储服务器</td>
<td style="text-align: center;">可采取sata盘，raid5</td>
</tr>
<tr>
<td style="text-align: center;">共享存储服务器（如NFS）</td>
<td style="text-align: center;">视性能及访问要求可以raid5,raid10,甚至raid0（要有高可用或双写方案）</td>
</tr>
<tr>
<td style="text-align: center;">监控服务器</td>
<td style="text-align: center;">单盘或双盘raid1即可。三盘就RAID5，看容量要求加盘即可</td>
</tr>
</tbody>
</table>
<h2 id="linux_1">Linux文件系统<a class="headerlink" href="#linux_1" title="Permanent link">&para;</a></h2>
<h3 id="linux_2">linux磁盘详解<a class="headerlink" href="#linux_2" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>磁盘分区有主分区、扩展分区、逻辑分区，一块硬盘最多可以有四个主分区，其中一个主分区的位置可以用一个扩展分区替换，且一块硬盘只能有一个扩展
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>分区，在这个扩展分区内可以划分多个逻辑分区
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>预计超过四个分区，至少一个扩展分区：3p+1e、2p+1e、1p+1e-----p：主分区、e：扩展分区
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>磁盘分区的设备名：
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>在linux中，通过设备名访问设备，设备名存放在/dev目录
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="k">*</span><span class="w"> </span>系统的第一块IDE接口的硬盘名称为/dev/hda
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">*</span><span class="w"> </span>系统的第二块IDE接口的硬盘名称为/dev/hdb
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">*</span><span class="w"> </span>系统的第一块SCSI接口的硬盘名称为/dev/sda
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="k">*</span><span class="w"> </span>系统的第二块SCSI接口的硬盘名称为/dev/sdb
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>分区则使用数字编号标识：
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="k">*</span><span class="w"> </span>系统的第一块IDE接口的硬盘第一个分区名称为/dev/hda1
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">*</span><span class="w"> </span>系统的第二块IDE接口的硬盘第一个分区名称为/dev/hdb1
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="k">*</span><span class="w"> </span>系统的第一块SCSI接口的硬盘第一个分区名称为/dev/sdb1
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>注意：
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>磁盘分区格式化文件系统后，会分为inode和block两部分
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>inode存放文件的属性和执行文件实体的指针，文件名不在inode内一般在上级目录的block中
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>df -i查看inode数量和情况，一个文件至少占用一个inode和一个block
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>格式化时，可以改变inode和block
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>分区数字编号1-4留给主分区或者扩展分区使用，逻辑分区是在扩展分区的基础上编号从5开始
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>SCSI/SAS/SATA/USB接口的硬盘的设备名均以/dev/sd开头，不同硬盘编号依次是/dev/sda、/dev/sdb
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>SAS/SATA是主流硬盘接口，SSD固态硬盘，速度性能SSD&gt;SAS&gt;SATA
</span></code></pre></div>
<h3 id="linux_3">linux系统引导流程解析<a class="headerlink" href="#linux_3" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>系统引导流程：
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>固件firmware (CMOS/BIOS)  post加电自检
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>对于固件的理解，是介于软件和硬件之间的软件代码，但同时烧录到硬件当中；CMOS固化在硬件中，作为固件的平台，BIOS是管理CMOS的管理界面
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>接着，自举程序bootloader (GRUB),载入内核
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>第一步的最后要读取硬盘中的MBR，包含了BootLoader,在MBR中还包含了分区表等信息
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>内核的工作，驱动硬件，启动初始进程init;在kernel中大部分都是程序；init启动后读取inittab文件，执行缺省默认的运行级别，从而继引导过程
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>在linux系统中，init是第一个存在的进程，它的PID恒为一，但也必须向一个更高级的功能负责：PID为零的内核调度器，从而获得cpu时间
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>关键点：对于父子进程的关系。首先，父进程中断，子进程同样会中断；如果父进程中断后，子进程没有中断，这种关系形象称之为孤儿进程，系统发现后
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>会将孤儿进程指向父进程init;如果父进程正常，而子进程中断的话，这样滴关系称之为僵尸进程；这两种进程在系统中不允许出现的
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>备注：linux中的运行级别类似于windows平台中的F8功能
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>单用户模式（级别1）类似windos平台中F8的安全模式，区别是没有图形界面，只有命令输入
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>运行级别2 和 3的区别就是2级别没有NFS功能，同时都是多用户模式
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>查看当前的运行级别：runlevel
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>运行级别的切换：init 0 1 2 3 4 5  S 或者 telinit 0 1 2 3 4 5
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>扩展：实际大家通过命令ls -l <span class="sb">`which telinit`</span>得知telinit名是init命令的一个软连接而已
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>grep -v &quot;^#&quot; /etc/inittabl <span class="ni">#提取有效行</span>，作为分析数据
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>文件格式分析：（字段组成结构如下所示：）
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>id:runlevels    action:process
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>id              标示符,一般都是两位字母或者数字
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>runlevels       指定运行级别，可以指定多个；例如::代表0-6
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>action          指定运行状态
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>process         指定要运行的脚本或者命令
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>action取值：
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>initdefault     表示系统缺省的启动运行级别
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>sysinit         系统启动时执行process中指定的命令
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>wait            执行process中指定命令，并等到结束后在运行其他的命令
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>one             执行process中指定的命令，不需要等待结束
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>ctrlaltdel      按下组合键执行process指定的命令；(关机的操作)
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>先后顺序：
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="k">1.</span> id:3:initdefault：
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="k">2.</span> l3:3:wait:/etc/rc.d/rc
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="k">3.</span> /etc/rc.d/rc3.d
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>判断默认的运行级别调用/etc/rc.d/rc脚本，执行相关运行级别目录中的服务程序，完成相应运行级别的初始化配置；之后找到/etc/rc.d/rc3.d脚本
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>完成系统后续的引导过程，其作用是分别存放对应于运行级别的服务程序脚本的符号链接，链接到init.d目录中的相应脚本
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a>/etc/rc.d/r3.d 目录包含了两种文件很重要，一种大写S开头，另一种是大写的K开头
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>S  start   K  kill  number 表示启动的顺序，数字越小优先启动；如果数字相同，那么就会按照创建的时间
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>Firmware
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a>   |
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a>BootLoader
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a>   |
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a>Kernel
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a>   |
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a> init
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a>   |
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a>/etc/inittab
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a>   |
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a>initdefault
</span><span id="__span-1-59"><a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a>   |
</span><span id="__span-1-60"><a id="__codelineno-1-60" name="__codelineno-1-60" href="#__codelineno-1-60"></a>/etc/rc.d/rc.sysinit
</span><span id="__span-1-61"><a id="__codelineno-1-61" name="__codelineno-1-61" href="#__codelineno-1-61"></a>   |
</span><span id="__span-1-62"><a id="__codelineno-1-62" name="__codelineno-1-62" href="#__codelineno-1-62"></a>/etc/rc.d/rc
</span><span id="__span-1-63"><a id="__codelineno-1-63" name="__codelineno-1-63" href="#__codelineno-1-63"></a>   |
</span><span id="__span-1-64"><a id="__codelineno-1-64" name="__codelineno-1-64" href="#__codelineno-1-64"></a>/etc/rc.d/rcN.d
</span><span id="__span-1-65"><a id="__codelineno-1-65" name="__codelineno-1-65" href="#__codelineno-1-65"></a>   |
</span><span id="__span-1-66"><a id="__codelineno-1-66" name="__codelineno-1-66" href="#__codelineno-1-66"></a>Login(username ,password)
</span><span id="__span-1-67"><a id="__codelineno-1-67" name="__codelineno-1-67" href="#__codelineno-1-67"></a>
</span><span id="__span-1-68"><a id="__codelineno-1-68" name="__codelineno-1-68" href="#__codelineno-1-68"></a>启动系统首先固件的加电自检；典型为PC中cmos/bios作用是在物层次面上检测所有的硬件是否正常工作；如果硬件正常的话，会读取硬盘的上存放
</span><span id="__span-1-69"><a id="__codelineno-1-69" name="__codelineno-1-69" href="#__codelineno-1-69"></a>物理数据的第一个位置MBR，MBR主要是存放自举程序BootLoader，在linux系统中我们大多数采用的是GRUB，GRUB的主要作用就是载入内核；载入
</span><span id="__span-1-70"><a id="__codelineno-1-70" name="__codelineno-1-70" href="#__codelineno-1-70"></a>内核后，两个作用，第一是在linux操作系统层面上是驱动硬件和启动init进程；然后读取/etc/inittab配置文件，配置文件会判断系统缺省的运行
</span><span id="__span-1-71"><a id="__codelineno-1-71" name="__codelineno-1-71" href="#__codelineno-1-71"></a>级别然后执行脚本/etc/rc.d/rc.sysinit加载基本的系统服务；接着根据设置的缺省系统运行级别（id:3,5:initdefault:）执行/etc/rc.d/rc
</span><span id="__span-1-72"><a id="__codelineno-1-72" name="__codelineno-1-72" href="#__codelineno-1-72"></a>脚本，此脚本会判断initdefault，然后启动对应的运行级别目录下面的程序/etc/rc.d/rcN.d，最后出现登陆界面了，输入正确的用户名和密码即可
</span><span id="__span-1-73"><a id="__codelineno-1-73" name="__codelineno-1-73" href="#__codelineno-1-73"></a>登录系统继而管理服务器
</span><span id="__span-1-74"><a id="__codelineno-1-74" name="__codelineno-1-74" href="#__codelineno-1-74"></a>
</span><span id="__span-1-75"><a id="__codelineno-1-75" name="__codelineno-1-75" href="#__codelineno-1-75"></a>/etc/rc.d/init.d该目录下存放了各个运行级别的服务程序脚本
</span><span id="__span-1-76"><a id="__codelineno-1-76" name="__codelineno-1-76" href="#__codelineno-1-76"></a>/etc/init.d 发现此文件是/etc/rc.d/init.d的软连接
</span></code></pre></div>
<h3 id="_2">添加硬盘或分区详细步骤<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>dmesg<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>sdb<span class="w">    </span><span class="c1"># 检查硬盘设备sdb是否存在</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>fdisk<span class="w"> </span>-l<span class="w"> </span>/dev/sdb<span class="w">   </span><span class="c1"># 查看此硬盘设备信息</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>fdisk<span class="w"> </span>/dev/sdb<span class="w">      </span><span class="c1"># 对硬盘进行分区操作，默认时ext4类型，id=83，id=82是swap</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="s">输入`m`列出可以执行的命令：</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="s">command (m for help): m</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="s">输入`p`列出磁盘目前的分区情况：</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="s">Command (m for help): p</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="s">输入`d`然后选择分区，删除现有分区：</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="s">Command (m for help): d</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="s">Partition number (1-4): 1</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="s">Command (m for help): d</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="s">Selected partition 2</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="s">查看分区情况，确认分区已经删除(对应分区删除后，不会再显示)：</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="s">Command (m for help): p</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="s">输入`n`建立新的磁盘分区，首先建立两个主磁盘分区：</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="s">Command (m for help): n</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="s">Command action</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="s">   e   extended</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="s">   p   primary partition (1-4)</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="s">p    //建立主分区</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="s">Partition number (1-4): 1  //分区号</span>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="s">First cylinder (1-391, default 1):  //分区起始位置</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="s">Using default value 1</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="s">last cylinder or +size or +sizeM or +sizeK (1-391, default 391): 100  //分区结束位置，单位为扇区</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="s">Command (m for help): n  //再建立一个分区</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="s">Command action</span>
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="s">   e   extended</span>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="s">   p   primary partition (1-4)</span>
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="s">p</span>
</span><span id="__span-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="s">Partition number (1-4): 2  //分区号为2</span>
</span><span id="__span-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a><span class="s">First cylinder (101-391, default 101):</span>
</span><span id="__span-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a><span class="s">Using default value 101</span>
</span><span id="__span-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a><span class="s">Last cylinder or +size or +sizeM or +sizeK (101-391, default 391): +200M  //分区结束位置，单位为M</span>
</span><span id="__span-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>
</span><span id="__span-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a><span class="s">确认分区建立成功：</span>
</span><span id="__span-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a><span class="s">Command (m for help): p</span>
</span><span id="__span-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a>
</span><span id="__span-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a><span class="s">再建立一个逻辑分区：</span>
</span><span id="__span-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a><span class="s">Command (m for help): n</span>
</span><span id="__span-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a><span class="s">Command action</span>
</span><span id="__span-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a><span class="s">   e   extended</span>
</span><span id="__span-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a><span class="s">   p   primary partition (1-4)</span>
</span><span id="__span-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a><span class="s">e  //选择扩展分区</span>
</span><span id="__span-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a><span class="s">Partition number (1-4): 3</span>
</span><span id="__span-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a><span class="s">First cylinder (126-391, default 126):</span>
</span><span id="__span-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a><span class="s">Using default value 126</span>
</span><span id="__span-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a><span class="s">Last cylinder or +size or +sizeM or +sizeK (126-391, default 391):</span>
</span><span id="__span-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a><span class="s">Using default value 391</span>
</span><span id="__span-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a>
</span><span id="__span-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a><span class="s">确认扩展分区建立成功：</span>
</span><span id="__span-2-59"><a id="__codelineno-2-59" name="__codelineno-2-59" href="#__codelineno-2-59"></a><span class="s">Command (m for help): p</span>
</span><span id="__span-2-60"><a id="__codelineno-2-60" name="__codelineno-2-60" href="#__codelineno-2-60"></a>
</span><span id="__span-2-61"><a id="__codelineno-2-61" name="__codelineno-2-61" href="#__codelineno-2-61"></a><span class="s">在扩展分区上建立两个逻辑分区：</span>
</span><span id="__span-2-62"><a id="__codelineno-2-62" name="__codelineno-2-62" href="#__codelineno-2-62"></a><span class="s">Command (m for help): n</span>
</span><span id="__span-2-63"><a id="__codelineno-2-63" name="__codelineno-2-63" href="#__codelineno-2-63"></a><span class="s">Command action</span>
</span><span id="__span-2-64"><a id="__codelineno-2-64" name="__codelineno-2-64" href="#__codelineno-2-64"></a><span class="s">   l   logical (5 or over)</span>
</span><span id="__span-2-65"><a id="__codelineno-2-65" name="__codelineno-2-65" href="#__codelineno-2-65"></a><span class="s">   p   primary partition (1-4)</span>
</span><span id="__span-2-66"><a id="__codelineno-2-66" name="__codelineno-2-66" href="#__codelineno-2-66"></a><span class="s">l //选择逻辑分区</span>
</span><span id="__span-2-67"><a id="__codelineno-2-67" name="__codelineno-2-67" href="#__codelineno-2-67"></a><span class="s">First cylinder (126-391, default 126):</span>
</span><span id="__span-2-68"><a id="__codelineno-2-68" name="__codelineno-2-68" href="#__codelineno-2-68"></a><span class="s">Using default value 126</span>
</span><span id="__span-2-69"><a id="__codelineno-2-69" name="__codelineno-2-69" href="#__codelineno-2-69"></a><span class="s">Last cylinder or +size or +sizeM or +sizeK (126-391, default 391): +400M</span>
</span><span id="__span-2-70"><a id="__codelineno-2-70" name="__codelineno-2-70" href="#__codelineno-2-70"></a>
</span><span id="__span-2-71"><a id="__codelineno-2-71" name="__codelineno-2-71" href="#__codelineno-2-71"></a><span class="s">Command (m for help): n</span>
</span><span id="__span-2-72"><a id="__codelineno-2-72" name="__codelineno-2-72" href="#__codelineno-2-72"></a><span class="s">Command action</span>
</span><span id="__span-2-73"><a id="__codelineno-2-73" name="__codelineno-2-73" href="#__codelineno-2-73"></a><span class="s">   l   logical (5 or over)</span>
</span><span id="__span-2-74"><a id="__codelineno-2-74" name="__codelineno-2-74" href="#__codelineno-2-74"></a><span class="s">   p   primary partition (1-4)</span>
</span><span id="__span-2-75"><a id="__codelineno-2-75" name="__codelineno-2-75" href="#__codelineno-2-75"></a><span class="s">l</span>
</span><span id="__span-2-76"><a id="__codelineno-2-76" name="__codelineno-2-76" href="#__codelineno-2-76"></a><span class="s">First cylinder (176-391, default 176):</span>
</span><span id="__span-2-77"><a id="__codelineno-2-77" name="__codelineno-2-77" href="#__codelineno-2-77"></a><span class="s">Using default value 176</span>
</span><span id="__span-2-78"><a id="__codelineno-2-78" name="__codelineno-2-78" href="#__codelineno-2-78"></a><span class="s">Last cylinder or +size or +sizeM or +sizeK (176-391, default 391):</span>
</span><span id="__span-2-79"><a id="__codelineno-2-79" name="__codelineno-2-79" href="#__codelineno-2-79"></a><span class="s">Using default value 391</span>
</span><span id="__span-2-80"><a id="__codelineno-2-80" name="__codelineno-2-80" href="#__codelineno-2-80"></a>
</span><span id="__span-2-81"><a id="__codelineno-2-81" name="__codelineno-2-81" href="#__codelineno-2-81"></a><span class="s">确认逻辑分区建立成功：</span>
</span><span id="__span-2-82"><a id="__codelineno-2-82" name="__codelineno-2-82" href="#__codelineno-2-82"></a><span class="s">Command (m for help): p</span>
</span><span id="__span-2-83"><a id="__codelineno-2-83" name="__codelineno-2-83" href="#__codelineno-2-83"></a>
</span><span id="__span-2-84"><a id="__codelineno-2-84" name="__codelineno-2-84" href="#__codelineno-2-84"></a><span class="s">最后对分区操作进行写入保存：</span>
</span><span id="__span-2-85"><a id="__codelineno-2-85" name="__codelineno-2-85" href="#__codelineno-2-85"></a><span class="s">Command (m for help): w</span>
</span><span id="__span-2-86"><a id="__codelineno-2-86" name="__codelineno-2-86" href="#__codelineno-2-86"></a>
</span><span id="__span-2-87"><a id="__codelineno-2-87" name="__codelineno-2-87" href="#__codelineno-2-87"></a><span class="s"># 建立好分区之后我们还需要对分区进行格式化才能在系统中使用磁盘</span>
</span><span id="__span-2-88"><a id="__codelineno-2-88" name="__codelineno-2-88" href="#__codelineno-2-88"></a><span class="s">mkfs.ext4 /dev/sdb1     # 在sdb1上建立ext4分区</span>
</span><span id="__span-2-89"><a id="__codelineno-2-89" name="__codelineno-2-89" href="#__codelineno-2-89"></a>
</span><span id="__span-2-90"><a id="__codelineno-2-90" name="__codelineno-2-90" href="#__codelineno-2-90"></a><span class="s">硬盘sdb我们建立了2个主分区（sdb1，sdb2），1个扩展分区（sdb3），2个逻辑分区（sdb5，sdb6）</span>
</span><span id="__span-2-91"><a id="__codelineno-2-91" name="__codelineno-2-91" href="#__codelineno-2-91"></a><span class="s">注意：主分区和扩展分区的磁盘号位1-4，也就是说最多有4个主分区或者扩展分区，逻辑分区开始的磁盘号为5，因此在这个实验中没有sdb4</span>
</span><span id="__span-2-92"><a id="__codelineno-2-92" name="__codelineno-2-92" href="#__codelineno-2-92"></a>
</span><span id="__span-2-93"><a id="__codelineno-2-93" name="__codelineno-2-93" href="#__codelineno-2-93"></a><span class="s"># 建立两个目录`/oracle`和`/web`，将新建好的两个分区挂载到系统</span>
</span><span id="__span-2-94"><a id="__codelineno-2-94" name="__codelineno-2-94" href="#__codelineno-2-94"></a><span class="s">mkdir /oracle</span>
</span><span id="__span-2-95"><a id="__codelineno-2-95" name="__codelineno-2-95" href="#__codelineno-2-95"></a><span class="s">mkdir /web</span>
</span><span id="__span-2-96"><a id="__codelineno-2-96" name="__codelineno-2-96" href="#__codelineno-2-96"></a><span class="s">mount /dev/sdb1 /oracle</span>
</span><span id="__span-2-97"><a id="__codelineno-2-97" name="__codelineno-2-97" href="#__codelineno-2-97"></a><span class="s">mount /dev/sdb6 /web</span>
</span><span id="__span-2-98"><a id="__codelineno-2-98" name="__codelineno-2-98" href="#__codelineno-2-98"></a>
</span><span id="__span-2-99"><a id="__codelineno-2-99" name="__codelineno-2-99" href="#__codelineno-2-99"></a><span class="s">如果需要每次开机自动挂载则需要修改`/etc/fstab`文件，加入两行配置：</span>
</span><span id="__span-2-100"><a id="__codelineno-2-100" name="__codelineno-2-100" href="#__codelineno-2-100"></a><span class="s">/dev/sdb1               /oracle                 ext4    defaults        0 0</span>
</span><span id="__span-2-101"><a id="__codelineno-2-101" name="__codelineno-2-101" href="#__codelineno-2-101"></a><span class="s">/dev/sdb6               /web                    ext4    defaults        0 0</span>
</span><span id="__span-2-102"><a id="__codelineno-2-102" name="__codelineno-2-102" href="#__codelineno-2-102"></a><span class="s">comment</span>
</span></code></pre></div>
<h3 id="linuxfhs">Linux目录结构FHS<a class="headerlink" href="#linuxfhs" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>基本文件系统类型：(可以用file命令来识别)
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">*</span><span class="w"> </span>普通文件：如文本文件、c语言源代码、shell脚本等，可以用cat、less、more、vi等来察看内容，用mv来改名
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="k">*</span><span class="w"> </span>目录文件：包括文件名、子目录名及其指针，可以用ls列出目录文件
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">*</span><span class="w"> </span>链接文件：是指向一索引节点的那些目录条目，用ls来查看时，链接文件的标志用l开头，而文件后以&quot;-&gt;&quot;指向所链接的文件
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="k">*</span><span class="w"> </span>特殊文件：如磁盘、终端、打印机等都在文件系统中表示出来，常放在/dev目录内
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>~：代表用户自己的宿主目录
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>.：表示当前目录，也可以用./表示
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>..：表示上一级目录，也可以用../表示
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>/bin      保存可执行的二进制文件（可执行的指令）权限对所有用户开放
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>/boot     存放开机启动加载程序的核心文件,包括引导文件、内核文件、驱动、 插件、模块等；(如kernel和grup)
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>/dev      存放了所有的硬件设备文件；网卡，声卡，硬盘，光驱；tty1,tty2终端，设备文件目录，虚拟文件系统，主要存放所有系统中device的相关
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>          信息，不论是使用的或未使用的设备，只要有可能使用到，就会在/dev中建立一个相对应的设备文件；设备文件分为2种类型：字符设备文件和
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>          块设备文件(目录中基本上都是设备文件，如硬盘设备文件/dev/sda)
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>    /dev/console    系统控制台，也就是直接和系统连接的监视器
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    /dev/hd         IDE设备文件
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>    /dev/sd         sata、usb、scsi等设备文件
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>    /dev/fd         软驱设备文件
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>    /dev/tty        虚拟控制台设备文件
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>    /dev/pty        提供远程虚拟控制台设备文件
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>    /dev/null       所谓&quot;黑洞&quot;，所有写入该设备的信息都将消失，如当想将屏幕上的输出信息隐藏起来时，只要将输出信息输入到/dev/null即可
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>/etc    系统、网络或配置文件存放目录，简单的将/etc目录分为以下几类：
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>    基本文件：所有直接放在/etc目录下的文件归类为基本文件
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>            aliases：用于设置邮件别名
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>            auto.* ：代表的是一系列autofs服务所需要的配置文件，这个服务主要是让管理员可以事先定义出一些网络、本机或光驱等默认的路径
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>            auto.master：负责规划目录的分配与使用，目前默认提供三种自动挂载模式
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>            auto.misc：文件中的配置都以实体连接本机的磁盘驱动器为主
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>            auto.net：并不是一个配置文件，而是一个脚本文件，在使用上其实不须做任何调整
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>            auto.smb：与auto.net一样，都是以个脚本文件
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>            bashrc：用户登录功能配置，全局配置，对所有用户生效，主要配置别名
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>            profile：与系统环境配置或初始化软件的相关配置，全局配置，对所有用户生效，主要配置变量
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>            DIR_COLORS：用于配置ls命令的颜色，主要针对tty登录的用户
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>            DIR_COLORS.xterm：用于配置ls命令的颜色，主要针对xterm登录的用户
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>            fstab：系统启动时自动挂载文件系统的配置文件
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>            inittab：启动时系统所需要的第一个配置文件；也即是init进程的配置文件
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>            issue：用户本机登录时，看到的欢迎信息
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>            issue.net：用户网络登录时，看到的欢迎信息
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>            ld.so.conf：包含ld.so.conf.d/*.conf配置；主要是ld.so.conf.d/*.conf目录的作用
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a>            localtime：系统所使用的时区对应的配置文件；对应的时区文件都存在于/usr/share/zoneinfo/
</span><span id="__span-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a>            motd：登录成功的用户显示的信息对应的配置文件
</span><span id="__span-3-45"><a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>            mtab：可以当做是检查当前文件系统挂载情况的配置文件；与mount命令结果一致
</span><span id="__span-3-46"><a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a>            prelink.conf：定义哪些执行文件和函数库是需要预先连接的
</span><span id="__span-3-47"><a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a>            securetty：主要是login程序在使用的，只要是列在该文件中的接口，就表示是可以使用的接口，相反，若从列表中删除，则无法使用该接口
</span><span id="__span-3-48"><a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a>            shells：记录目前系统所拥有shell种类的路径，通过cssh命令使用
</span><span id="__span-3-49"><a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>            sudoers：sudo命令对应的配置文件，用于配置权限的分配方式
</span><span id="__span-3-50"><a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a>            sysctl.conf：主要是帮助用户配置/proc/sys目录下所有文件的值，与sysctl命令对应
</span><span id="__span-3-51"><a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a>            syslogd.conf：是syslogd服务的配置文件
</span><span id="__span-3-52"><a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a>            host.conf：主机名解析配置文件，主要说明解析的方式及顺序
</span><span id="__span-3-53"><a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a>            hosts：主机名解析配置文件，主要列出所有需要本地解析的主机名与IP地址的对应关系
</span><span id="__span-3-54"><a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a>            hosts.allow和hosts.deny：linux网络安全机制TCP Wrapper对应的配置文件
</span><span id="__span-3-55"><a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a>            nsswitch.conf：主要记录系统应如何查询主机名、密码、用户组、网络等，或是查询顺序的编排
</span><span id="__span-3-56"><a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a>            resolv.conf：记录DNS服务器地址，用于DNS域名解析
</span><span id="__span-3-57"><a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a>            services：定义了网络服务的默认端口号
</span><span id="__span-3-58"><a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a>            xinetd.conf：xinetd的主配置文件，目的是为xinetd.d下的所有子服务建立一个标准的规范使其可以遵循
</span><span id="__span-3-59"><a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a>            anacrontab：属于一种任务计划软件的配置文件，anacrontab软件和crond其实有点相辅相成，crond负责任务计划，而anacrontab则是
</span><span id="__span-3-60"><a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a>                        负责以&quot;间隔多久&quot;为主要的目标
</span><span id="__span-3-61"><a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a>            at.deny：该文件属于拒绝列表，只要被记录在其中的用户，就无法使用at所提供的任务计划服务
</span><span id="__span-3-62"><a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a>            at.allow：与at.deny刚好相反
</span><span id="__span-3-63"><a id="__codelineno-3-63" name="__codelineno-3-63" href="#__codelineno-3-63"></a>            crontab：crontab的主配置文件，crond默认会执行的文件可以参考此配置文件
</span><span id="__span-3-64"><a id="__codelineno-3-64" name="__codelineno-3-64" href="#__codelineno-3-64"></a>            cron.deny：该文件属于拒绝列表，只要被记录在其中的用户，就无法使用crond所提供的任务计划服务
</span><span id="__span-3-65"><a id="__codelineno-3-65" name="__codelineno-3-65" href="#__codelineno-3-65"></a>            cron.allow：与cron.deny刚好相反
</span><span id="__span-3-66"><a id="__codelineno-3-66" name="__codelineno-3-66" href="#__codelineno-3-66"></a>            exports：是NFS服务的主配置文件，主要目的就是将本机的目录共享到网络上，供其他人使用
</span><span id="__span-3-67"><a id="__codelineno-3-67" name="__codelineno-3-67" href="#__codelineno-3-67"></a>            group与gshadow：用户组配置文件，group主要保存用户组信息，gshadow主要保存群组密码
</span><span id="__span-3-68"><a id="__codelineno-3-68" name="__codelineno-3-68" href="#__codelineno-3-68"></a>            login.defs：设置系统在建立账号时所参考的配置
</span><span id="__span-3-69"><a id="__codelineno-3-69" name="__codelineno-3-69" href="#__codelineno-3-69"></a>            passwd：主要保存系统用户账号的信息
</span><span id="__span-3-70"><a id="__codelineno-3-70" name="__codelineno-3-70" href="#__codelineno-3-70"></a>            shadow：linux系统通常包经过&quot;hash&quot;处理后的密码存储在这个文件中
</span><span id="__span-3-71"><a id="__codelineno-3-71" name="__codelineno-3-71" href="#__codelineno-3-71"></a>            protocols：通信协议对应端口号的一个对照表，包含协议名称、协议号码、注释等
</span><span id="__span-3-72"><a id="__codelineno-3-72" name="__codelineno-3-72" href="#__codelineno-3-72"></a>            wgetrc：wget程序对应的配置文件，其中有quota、mail header、重传文件的预设次数、firewall和proxy等相关设置
</span><span id="__span-3-73"><a id="__codelineno-3-73" name="__codelineno-3-73" href="#__codelineno-3-73"></a>            init.d：RHEL中所有服务的默认启动脚本都存放在这里；这个是链接文件，链接到/etc/rc.d/init.d
</span><span id="__span-3-74"><a id="__codelineno-3-74" name="__codelineno-3-74" href="#__codelineno-3-74"></a>            csh.cshrc和csh.login： 用户启动c shells执行的初始化配置文件
</span><span id="__span-3-75"><a id="__codelineno-3-75" name="__codelineno-3-75" href="#__codelineno-3-75"></a>            printcap：linux系统中打印机设备对应的配置文件
</span><span id="__span-3-76"><a id="__codelineno-3-76" name="__codelineno-3-76" href="#__codelineno-3-76"></a>    服务器目录：如samba、http、vsftpd等服务器配置相关目录
</span><span id="__span-3-77"><a id="__codelineno-3-77" name="__codelineno-3-77" href="#__codelineno-3-77"></a>            cups：linux下的打印机服务器，目录下存放的是打印机服务的配置文件
</span><span id="__span-3-78"><a id="__codelineno-3-78" name="__codelineno-3-78" href="#__codelineno-3-78"></a>            dnsmasq.d：dnsmasq是一种DNS的&quot;轻薄机种&quot;，转为区域或小型网络所设计，拥有比一般DNS更为方便简易的配置
</span><span id="__span-3-79"><a id="__codelineno-3-79" name="__codelineno-3-79" href="#__codelineno-3-79"></a>            httpd：apache网页服务器的配置文件所在目录
</span><span id="__span-3-80"><a id="__codelineno-3-80" name="__codelineno-3-80" href="#__codelineno-3-80"></a>            mail：Mail Server组件的主要配置目录，如sendmail
</span><span id="__span-3-81"><a id="__codelineno-3-81" name="__codelineno-3-81" href="#__codelineno-3-81"></a>            ntp：网络时间服务器的配置目录，其主要配置文件为/etc/ntp.conf
</span><span id="__span-3-82"><a id="__codelineno-3-82" name="__codelineno-3-82" href="#__codelineno-3-82"></a>            openldap：目录明显是LDAP的配置目录，软件名称为OpenLDAP
</span><span id="__span-3-83"><a id="__codelineno-3-83" name="__codelineno-3-83" href="#__codelineno-3-83"></a>            postfix：postfix组件所提供的主要配置文件目录
</span><span id="__span-3-84"><a id="__codelineno-3-84" name="__codelineno-3-84" href="#__codelineno-3-84"></a>            samba：文件共享服务samba的主要配置文件目录
</span><span id="__span-3-85"><a id="__codelineno-3-85" name="__codelineno-3-85" href="#__codelineno-3-85"></a>            smrsh：这是sendmail为了限制用户可使用的命令设计的程序，将原本用户所使用的/bin/sh替换为/usr/sbin/smrsh
</span><span id="__span-3-86"><a id="__codelineno-3-86" name="__codelineno-3-86" href="#__codelineno-3-86"></a>            snmp：简单网络管理软件的配置文件目录，存在snmpd.conf主配置文件
</span><span id="__span-3-87"><a id="__codelineno-3-87" name="__codelineno-3-87" href="#__codelineno-3-87"></a>            squid：这是linux下的代理服务器squid的配置文件目录，主配置文件是squid.conf
</span><span id="__span-3-88"><a id="__codelineno-3-88" name="__codelineno-3-88" href="#__codelineno-3-88"></a>            ssh：SSH服务的主要配置目录，主配置文件是sshd_config
</span><span id="__span-3-89"><a id="__codelineno-3-89" name="__codelineno-3-89" href="#__codelineno-3-89"></a>            vsftpd：vsftpd服务器的主要配置目录，主配置文件是vsftpd.conf
</span><span id="__span-3-90"><a id="__codelineno-3-90" name="__codelineno-3-90" href="#__codelineno-3-90"></a>            xinetd.d：xinetd是一个管理多个服务的daemon，这个目录下列出的服务都是由xinetd进程管理的，其主配置文件是/etc/xinetd.conf
</span><span id="__span-3-91"><a id="__codelineno-3-91" name="__codelineno-3-91" href="#__codelineno-3-91"></a>    系统目录：如sysconfig、xen或网络配置等与系统运行相关的目录
</span><span id="__span-3-92"><a id="__codelineno-3-92" name="__codelineno-3-92" href="#__codelineno-3-92"></a>            blkid：此目录所存放一个块设备ID的临时文件，主要记录系统中所有区块设备的标签名称、硬件的唯一识别码、文件系统的格式等基本信息
</span><span id="__span-3-93"><a id="__codelineno-3-93" name="__codelineno-3-93" href="#__codelineno-3-93"></a>            bluetooth：linux下使用蓝牙设备所需的配置文件；启动蓝牙检测的主要服务仍是/etc/rc.d/init.d/bluetooth，该程序使用的是
</span><span id="__span-3-94"><a id="__codelineno-3-94" name="__codelineno-3-94" href="#__codelineno-3-94"></a>                       hcid.conf配置文件
</span><span id="__span-3-95"><a id="__codelineno-3-95" name="__codelineno-3-95" href="#__codelineno-3-95"></a>            cron.X：cron.X的目录都是给cron软件存放其需要任务计划的文件所使用的，按任务计划时间的长短及配置特性分为cron.d、cron.daily、
</span><span id="__span-3-96"><a id="__codelineno-3-96" name="__codelineno-3-96" href="#__codelineno-3-96"></a>                    cron.hourly、cron.monthly、cron.weekly五个主要目录
</span><span id="__span-3-97"><a id="__codelineno-3-97" name="__codelineno-3-97" href="#__codelineno-3-97"></a>            dbus-1：D-BUS的主要配置目录，D-BUS也是一种IPC交流的方式
</span><span id="__span-3-98"><a id="__codelineno-3-98" name="__codelineno-3-98" href="#__codelineno-3-98"></a>            default：这里是存放一些系统软件默认值的目录，存放某些软件执行时的基本参数
</span><span id="__span-3-99"><a id="__codelineno-3-99" name="__codelineno-3-99" href="#__codelineno-3-99"></a>            firmware：这个目录所存放的东西是非常底层的信息，是CPU所需的microcode的实体文件
</span><span id="__span-3-100"><a id="__codelineno-3-100" name="__codelineno-3-100" href="#__codelineno-3-100"></a>            foomatic：与打印机相关的配置目录，实现打印一对多的方式，在foomatic中，可以记录多条打印机数据，让用户只在使用前先行配置所有
</span><span id="__span-3-101"><a id="__codelineno-3-101" name="__codelineno-3-101" href="#__codelineno-3-101"></a>                      需要使用的打印机即可
</span><span id="__span-3-102"><a id="__codelineno-3-102" name="__codelineno-3-102" href="#__codelineno-3-102"></a>            hal：全名Hardware Abstraction Layer，是linux一种管理硬件的机制，它会帮所有的应用程序或用户搜集所有PCI及USB等硬件信息
</span><span id="__span-3-103"><a id="__codelineno-3-103" name="__codelineno-3-103" href="#__codelineno-3-103"></a>                因此用户可以很简单并实时地通过HAL的方式取得硬件的相关数据
</span><span id="__span-3-104"><a id="__codelineno-3-104" name="__codelineno-3-104" href="#__codelineno-3-104"></a>            isdn：ISDN服务的主要配置目录，里面包含可拨号的用户、电话、联机方式等
</span><span id="__span-3-105"><a id="__codelineno-3-105" name="__codelineno-3-105" href="#__codelineno-3-105"></a>            ld.so.conf.d：这个目录是ldconfig所使用的，更准确的说，它是由/etc/ld.so.conf文件所决定的；ldconfig命令的目的在于将系统
</span><span id="__span-3-106"><a id="__codelineno-3-106" name="__codelineno-3-106" href="#__codelineno-3-106"></a>                          中的一些函数库预先存放到内存中，让系统使用时可以比以往通过硬盘的读取速度来的更快，这样可以大幅提高系统性能
</span><span id="__span-3-107"><a id="__codelineno-3-107" name="__codelineno-3-107" href="#__codelineno-3-107"></a>                          尤其当要重复读取时更明显；ldconfig要将哪些函数库丢到内存中，则须看/etc/ld.so.conf文件中所记录的信息
</span><span id="__span-3-108"><a id="__codelineno-3-108" name="__codelineno-3-108" href="#__codelineno-3-108"></a>            logrotate.d：此目录对系统管理员来说，是十分重要的一个目录，因为目录中的文件，记录了如何定期备份系统所需要备份的系统或软件
</span><span id="__span-3-109"><a id="__codelineno-3-109" name="__codelineno-3-109" href="#__codelineno-3-109"></a>                         日志文件及备份方式，目录是由logrotate组件所提供的，而里面所有文件是由各软件各自产生的；其主要配置文件是
</span><span id="__span-3-110"><a id="__codelineno-3-110" name="__codelineno-3-110" href="#__codelineno-3-110"></a>                         /etc/logrotate.conf
</span><span id="__span-3-111"><a id="__codelineno-3-111" name="__codelineno-3-111" href="#__codelineno-3-111"></a>            logwatch：logrotate主要是实现如何备份日志文件，这个目录就是记载如何分析日志文件并告诉用户的软件logwatch的配置目录
</span><span id="__span-3-112"><a id="__codelineno-3-112" name="__codelineno-3-112" href="#__codelineno-3-112"></a>            lsb-release.d：LSB是一个由很多人所执行的项目，其目的是将所有的Linux发行版定义为一些共同的标准
</span><span id="__span-3-113"><a id="__codelineno-3-113" name="__codelineno-3-113" href="#__codelineno-3-113"></a>            lvm：这个目录是LVM的基本配置文件，但配置或操作一般都只需要通过LVM提供的命令，而不会用到这个目录，除非要使用到很高级的配置
</span><span id="__span-3-114"><a id="__codelineno-3-114" name="__codelineno-3-114" href="#__codelineno-3-114"></a>                才会更改此文件
</span><span id="__span-3-115"><a id="__codelineno-3-115" name="__codelineno-3-115" href="#__codelineno-3-115"></a>            makedev.d：MAKEDEV软件对应的配置文件目录，MAKEDEV主要用来产生设备文件，也就是说，在/dev目录下的文件都由这个命令产生的
</span><span id="__span-3-116"><a id="__codelineno-3-116" name="__codelineno-3-116" href="#__codelineno-3-116"></a>                       此目录下的文件主要是针对设备文件的定义或属性，目录中存在的设备文件可以由MAKEDEV来创建，否则需要使用mknod命令
</span><span id="__span-3-117"><a id="__codelineno-3-117" name="__codelineno-3-117" href="#__codelineno-3-117"></a>            modprobe.d：是modprobe命令的住配置目录，一般系统启动默认要加载的模块放在/etc/modprobe.conf中
</span><span id="__span-3-118"><a id="__codelineno-3-118" name="__codelineno-3-118" href="#__codelineno-3-118"></a>            netplug和netplug.d：这两个目录和网络接口的联机与否由直接关系，因为主要是控制联机时的接口操作
</span><span id="__span-3-119"><a id="__codelineno-3-119" name="__codelineno-3-119" href="#__codelineno-3-119"></a>            opt：此目录原本是定义为存放所有额外安装软件的主机配置文件，但目前并没有被使用到，此目录为空
</span><span id="__span-3-120"><a id="__codelineno-3-120" name="__codelineno-3-120" href="#__codelineno-3-120"></a>            pcmcia：这是PCMCIA的配置文件目录，PCMCIA是笔记本电脑不可或缺的接口，需要即插即用的方式，此接口使用较少
</span><span id="__span-3-121"><a id="__codelineno-3-121" name="__codelineno-3-121" href="#__codelineno-3-121"></a>            pm：由pm-utils组件所提供的目录，pm-utils是一套电源管理的工具软件，其中/usr/lib/pm-utils也是主要目录之一
</span><span id="__span-3-122"><a id="__codelineno-3-122" name="__codelineno-3-122" href="#__codelineno-3-122"></a>            ppp：ppp相关的配置文件都放在这个目录中
</span><span id="__span-3-123"><a id="__codelineno-3-123" name="__codelineno-3-123" href="#__codelineno-3-123"></a>            profile.d：目录存放系统部分的软件配置，但按不同的shell执行不同文件，默认所使用bash会直接执行该目录下所有扩展名为.sh的文件
</span><span id="__span-3-124"><a id="__codelineno-3-124" name="__codelineno-3-124" href="#__codelineno-3-124"></a>            rc.d：主要用来定义在每一个执行阶段必须要执行哪些系统服务或程序，在目录中主要分为三个重要的部分：
</span><span id="__span-3-125"><a id="__codelineno-3-125" name="__codelineno-3-125" href="#__codelineno-3-125"></a>                    --rc.sysinit：系统一开始启动时所遇到的第一个文件，此脚本记录服务启动之前所需准备的所有事情，包括启动时的欢迎画面
</span><span id="__span-3-126"><a id="__codelineno-3-126" name="__codelineno-3-126" href="#__codelineno-3-126"></a>                    --rcX.d：在rc.sysinit文件之后所要执行的，X是系统启动时的initdefault值，值为几则会转到那个目录下，并执行其中的
</span><span id="__span-3-127"><a id="__codelineno-3-127" name="__codelineno-3-127" href="#__codelineno-3-127"></a>                             所有文件，在此目录中，文件一律都由两个英文字母开始K和S，K代表kill，S代表Start
</span><span id="__span-3-128"><a id="__codelineno-3-128" name="__codelineno-3-128" href="#__codelineno-3-128"></a>                    --rc.local：系统初始化过程中最后一个执行的脚本文件，可以将需要开机启动的程序或脚本放置在这个脚本文件中，以实现自动
</span><span id="__span-3-129"><a id="__codelineno-3-129" name="__codelineno-3-129" href="#__codelineno-3-129"></a>                                运行的目的
</span><span id="__span-3-130"><a id="__codelineno-3-130" name="__codelineno-3-130" href="#__codelineno-3-130"></a>            readahead.d：是readahead程序的主要配置目录，为了加速操作系统的使用速度，readahead_early和readahead_later这两个进程在
</span><span id="__span-3-131"><a id="__codelineno-3-131" name="__codelineno-3-131" href="#__codelineno-3-131"></a>                         系统加载时，直接将日常所需要的一些文件，全部先放到硬盘的高速缓存中
</span><span id="__span-3-132"><a id="__codelineno-3-132" name="__codelineno-3-132" href="#__codelineno-3-132"></a>            redhat-lsb：都lsb-release.d目录都是由程序redhat-lsb所提供的
</span><span id="__span-3-133"><a id="__codelineno-3-133" name="__codelineno-3-133" href="#__codelineno-3-133"></a>            rwtab.d：这个目录是一个在启动时会去参考的目录，主要的文件在/etc/rwtab；这是一个系统初期的备份机制
</span><span id="__span-3-134"><a id="__codelineno-3-134" name="__codelineno-3-134" href="#__codelineno-3-134"></a>            sane.d：这是在系统下要使用扫描仪所需的配置目录，主要配置文件是sane.conf，sane为了方便用户在各式的扫描仪连接时都可以使用
</span><span id="__span-3-135"><a id="__codelineno-3-135" name="__codelineno-3-135" href="#__codelineno-3-135"></a>                    因此在这一目录中放置了很多种不同类型扫描仪的硬件信息，让系统在检测到扫描仪时可以直接使用
</span><span id="__span-3-136"><a id="__codelineno-3-136" name="__codelineno-3-136" href="#__codelineno-3-136"></a>            setuptool.d：这个目录是&quot;setup&quot;系统配置工具的主要配置目录
</span><span id="__span-3-137"><a id="__codelineno-3-137" name="__codelineno-3-137" href="#__codelineno-3-137"></a>            skel：用于初始化用户宿主目录的配置目录，当建立一个用户时，会把此目录下的所有文件复制一份到用户的宿主目录，作为用户的初始化配置
</span><span id="__span-3-138"><a id="__codelineno-3-138" name="__codelineno-3-138" href="#__codelineno-3-138"></a>            sysconfig：非常重要的系统配置文件的存放目录，里面放置了大量系统启动及运行相关的配置文件
</span><span id="__span-3-139"><a id="__codelineno-3-139" name="__codelineno-3-139" href="#__codelineno-3-139"></a>            sysconfig/network-scripts/ifcfg-eth0：网卡eth0对应的配置文件，设置内容包括设备名称、IP地址、广播地址、网关地址、网段、
</span><span id="__span-3-140"><a id="__codelineno-3-140" name="__codelineno-3-140" href="#__codelineno-3-140"></a>                                                  开机是否激活等参数
</span><span id="__span-3-141"><a id="__codelineno-3-141" name="__codelineno-3-141" href="#__codelineno-3-141"></a>            udev：udev程序本身是一套设备的管理机制，udev通过sysfs的文件系统，可以正确地掌握目前系统上存在的硬件设备，以及针对每一个硬件
</span><span id="__span-3-142"><a id="__codelineno-3-142" name="__codelineno-3-142" href="#__codelineno-3-142"></a>                  设备做出不同的判断与执行
</span><span id="__span-3-143"><a id="__codelineno-3-143" name="__codelineno-3-143" href="#__codelineno-3-143"></a>            yum和yum.repos.d：两个都是yum配置目录，可用来替代rpm包管理方式，主配置文件是/etc/yum.conf；yum是更新方式及外挂程序的
</span><span id="__span-3-144"><a id="__codelineno-3-144" name="__codelineno-3-144" href="#__codelineno-3-144"></a>                             配置目录，yum.repos.d是存放定期更新组件内容的信息
</span><span id="__span-3-145"><a id="__codelineno-3-145" name="__codelineno-3-145" href="#__codelineno-3-145"></a>    安全性目录：如selinux或pam.d等管理系统安全性的目录
</span><span id="__span-3-146"><a id="__codelineno-3-146" name="__codelineno-3-146" href="#__codelineno-3-146"></a>            audit：这个目录所代表的是一种和目录名称一致的audit安全机制，主要以服务的方式协助管理员持续监控各文件被存取的情况；目录下的
</span><span id="__span-3-147"><a id="__codelineno-3-147" name="__codelineno-3-147" href="#__codelineno-3-147"></a>                   audit.rules文件主要是定义一些必要的监控规则
</span><span id="__span-3-148"><a id="__codelineno-3-148" name="__codelineno-3-148" href="#__codelineno-3-148"></a>            pam.d：此目录是Linux-PAM的所有配置文件，配合/lib/security目录中所有觉得函数库，提供Linux下的应用程序认证的机制
</span><span id="__span-3-149"><a id="__codelineno-3-149" name="__codelineno-3-149" href="#__codelineno-3-149"></a>            pam_pkcs11：PAM机制中的一种登录模块，可以让用户通过smart card做登录的操作
</span><span id="__span-3-150"><a id="__codelineno-3-150" name="__codelineno-3-150" href="#__codelineno-3-150"></a>            pki：PKI是一种公开密钥的管理方式，通过这样的管理模式，可以让所有网络传输有更多保障
</span><span id="__span-3-151"><a id="__codelineno-3-151" name="__codelineno-3-151" href="#__codelineno-3-151"></a>            racoon：这个目录是由ipsec-tools组件所提供的，ipsec的主要目的是让系统实现VPN的网路技术，在racoon目录的主配置文件
</span><span id="__span-3-152"><a id="__codelineno-3-152" name="__codelineno-3-152" href="#__codelineno-3-152"></a>                    racoon.conf中，定义在ipsec操作中所需要的加密算法种类以及其他细节的配置
</span><span id="__span-3-153"><a id="__codelineno-3-153" name="__codelineno-3-153" href="#__codelineno-3-153"></a>            security：与pam.d目录相辅相成，pam.d中的所有PAM的规则都要用到/lib/security下的PAM函数库，而/etc/security目录中，就是
</span><span id="__span-3-154"><a id="__codelineno-3-154" name="__codelineno-3-154" href="#__codelineno-3-154"></a>                      针对这些函数库，提供以配置文件的方式进行细节配置，对希望调整系统安全性部分增加了非常大的方便性
</span><span id="__span-3-155"><a id="__codelineno-3-155" name="__codelineno-3-155" href="#__codelineno-3-155"></a>            selinux：selinux是一个很新的安全性方案，它是一种针对各种文件、目录、设备或daemon等在linux所需使用到的安全性机制，而且其
</span><span id="__span-3-156"><a id="__codelineno-3-156" name="__codelineno-3-156" href="#__codelineno-3-156"></a>                     安全性的数据时直接记录在文件系统中
</span><span id="__span-3-157"><a id="__codelineno-3-157" name="__codelineno-3-157" href="#__codelineno-3-157"></a>            wpa_supplicant：这个目录被归类到安全性目录中，是因为其属于无线中安全认证的部分，存在wpa_supplicant.conf配置文件，用户
</span><span id="__span-3-158"><a id="__codelineno-3-158" name="__codelineno-3-158" href="#__codelineno-3-158"></a>                            可以在这个目录中加入已知可登陆的AP
</span><span id="__span-3-159"><a id="__codelineno-3-159" name="__codelineno-3-159" href="#__codelineno-3-159"></a>    X Windows目录：如X11或gdm管理X windows启动或使用上的配置目录
</span><span id="__span-3-160"><a id="__codelineno-3-160" name="__codelineno-3-160" href="#__codelineno-3-160"></a>            alternatives：linux下可辨识扩展名的&quot;文件类型&quot;选项，可以针对同一类型的文件，选出一个默认用户所要使用的程序去执行
</span><span id="__span-3-161"><a id="__codelineno-3-161" name="__codelineno-3-161" href="#__codelineno-3-161"></a>                          /etc/alternatives目录下有所有目前已经定义的程序名称，都以软链接的方式存在，里面每一个文件其实都有定义好的
</span><span id="__span-3-162"><a id="__codelineno-3-162" name="__codelineno-3-162" href="#__codelineno-3-162"></a>                          默认执行程序，可以使用alternatives命令查看及修改配置
</span><span id="__span-3-163"><a id="__codelineno-3-163" name="__codelineno-3-163" href="#__codelineno-3-163"></a>            fonts：这个目录就是fontconfig软件的最主要配置目录，其中/etc/fonts/fonts.conf就是对应的配置文件，/etc/fonts目录下的配置
</span><span id="__span-3-164"><a id="__codelineno-3-164" name="__codelineno-3-164" href="#__codelineno-3-164"></a>                   都是以XML的方式配置的
</span><span id="__span-3-165"><a id="__codelineno-3-165" name="__codelineno-3-165" href="#__codelineno-3-165"></a>            gconf：这一目录是GConf2的组件所建立的，GConf的作用就是提供GNOME下的应用程序注册的机制，有些类似于windows下的regedit
</span><span id="__span-3-166"><a id="__codelineno-3-166" name="__codelineno-3-166" href="#__codelineno-3-166"></a>            gdm：全名为GNOME Display Manger，也就是协助X Windows启动的管理软件，在GDM中的主配置文件是custom.conf，在X windows下
</span><span id="__span-3-167"><a id="__codelineno-3-167" name="__codelineno-3-167" href="#__codelineno-3-167"></a>                 可以利用gdmsetup命令对这个文件进行配置
</span><span id="__span-3-168"><a id="__codelineno-3-168" name="__codelineno-3-168" href="#__codelineno-3-168"></a>            gnome-vfs-2.0：GNOME VFS机制，让GNOME的系统可以知道每一种文件格式要如何开启或浏览，而所有的配置都需要有相对应的函数库
</span><span id="__span-3-169"><a id="__codelineno-3-169" name="__codelineno-3-169" href="#__codelineno-3-169"></a>            gtk-2.0：由gtk+组件提供的目录，主要是提供X Windows窗口的颜色、按钮或图案，包含软件选项的画面、选项的按钮、滚动轴的样式等
</span><span id="__span-3-170"><a id="__codelineno-3-170" name="__codelineno-3-170" href="#__codelineno-3-170"></a>            kde：KDE Desktop Manager的主要配置目录；主配置文件是kdmrc
</span><span id="__span-3-171"><a id="__codelineno-3-171" name="__codelineno-3-171" href="#__codelineno-3-171"></a>            NetworkManager：此目录的目的是让用户不需要做任何操作和配置，只要用户曾经登陆过无线AP，系统就可以记录下来，以后再次登陆时就
</span><span id="__span-3-172"><a id="__codelineno-3-172" name="__codelineno-3-172" href="#__codelineno-3-172"></a>                            可以方便的登陆
</span><span id="__span-3-173"><a id="__codelineno-3-173" name="__codelineno-3-173" href="#__codelineno-3-173"></a>            pango：pango是一套协助GTK+将字体描绘出来的函数库，不论任何的字体或语言，都可以通过pango描绘出来
</span><span id="__span-3-174"><a id="__codelineno-3-174" name="__codelineno-3-174" href="#__codelineno-3-174"></a>            rhgb：系统在进入X Windows之前，有一个前置配置的图形接口，这个接口就是rhgb，其主要目的是让系统启动变得漂亮
</span><span id="__span-3-175"><a id="__codelineno-3-175" name="__codelineno-3-175" href="#__codelineno-3-175"></a>            scim：是Linux下目前很好用的输入法
</span><span id="__span-3-176"><a id="__codelineno-3-176" name="__codelineno-3-176" href="#__codelineno-3-176"></a>            sound：GNOME下有许多的应用软件，很多都会有其特殊的声音，这个目录中存放所有声音的命令路径
</span><span id="__span-3-177"><a id="__codelineno-3-177" name="__codelineno-3-177" href="#__codelineno-3-177"></a>            X11：X windows的核心配置目录；该目录下比较重要的文件有prefdm(判断X windows使用哪一个Display Manager)、主配置文件
</span><span id="__span-3-178"><a id="__codelineno-3-178" name="__codelineno-3-178" href="#__codelineno-3-178"></a>                   xorg.conf(定了X windows所需使用的键盘、鼠标、显卡等相关硬件设备，重点是关于显卡的配置)、xinit子目录
</span><span id="__span-3-179"><a id="__codelineno-3-179" name="__codelineno-3-179" href="#__codelineno-3-179"></a>                   (里面都是一些X windows资源相关的配置)
</span><span id="__span-3-180"><a id="__codelineno-3-180" name="__codelineno-3-180" href="#__codelineno-3-180"></a>            xdg：X windows上的菜单画面，就是从这里出来的，所有在X windows中使用的菜单文字及分类，都可以在这个目录下做配置，其下的子目录
</span><span id="__span-3-181"><a id="__codelineno-3-181" name="__codelineno-3-181" href="#__codelineno-3-181"></a>                 menu，可以通过配置里面的文件自定义应用程序、系统管理、外观等菜单内容
</span><span id="__span-3-182"><a id="__codelineno-3-182" name="__codelineno-3-182" href="#__codelineno-3-182"></a>    其他目录：针对单一特殊软件的配置或未能按以上分类方式则放在此目录中
</span><span id="__span-3-183"><a id="__codelineno-3-183" name="__codelineno-3-183" href="#__codelineno-3-183"></a>            a2ps.cfg和a2ps-site.cfg：用于将一份文件格式转换为postscript的格式，在某些打印机或将文件输出成一份标准格式文件时，会被用到
</span><span id="__span-3-184"><a id="__codelineno-3-184" name="__codelineno-3-184" href="#__codelineno-3-184"></a>            alsa：主要任务在于提供linux声音及声音的功能，并试着让其性能达到最佳化
</span><span id="__span-3-185"><a id="__codelineno-3-185" name="__codelineno-3-185" href="#__codelineno-3-185"></a>            ghostscript：linux下读取Adobe格式文件(如pdf)，就是使用ghostscript命令，此目录主要用于设置在显示时使用哪种字体作为默认字体
</span><span id="__span-3-186"><a id="__codelineno-3-186" name="__codelineno-3-186" href="#__codelineno-3-186"></a>            gre.d：GRE是Mozilla注册的一种机制，目录中的配置文件gre.conf会注明所使用的Mozilla软件的路径和版本
</span><span id="__span-3-187"><a id="__codelineno-3-187" name="__codelineno-3-187" href="#__codelineno-3-187"></a>            iproute2：iproute2是一套非常强大的网络管理软件，iproute2提供的功能有很多种，此目录中存放一些网络的基本配置值
</span><span id="__span-3-188"><a id="__codelineno-3-188" name="__codelineno-3-188" href="#__codelineno-3-188"></a>            java：这个目录是由jpackage-utils软件提供的，这个目录是这个软件的主要配置目录，除此之外还有maven、jvm、jvm-common都是由
</span><span id="__span-3-189"><a id="__codelineno-3-189" name="__codelineno-3-189" href="#__codelineno-3-189"></a>                  jpackage-utils软件产生的，jpackage是一个专门为了提供java程序与函数库所存在的软件
</span><span id="__span-3-190"><a id="__codelineno-3-190" name="__codelineno-3-190" href="#__codelineno-3-190"></a>            mgetty+sendfax：主要用于使用linux架构一台fax server，可以使用mgetty.config来配置需要有关传真接收和发送的操作
</span><span id="__span-3-191"><a id="__codelineno-3-191" name="__codelineno-3-191" href="#__codelineno-3-191"></a>            php.d：主要存放的各软件(如dbase、ldap、mysql等)与php相关的配置文件
</span><span id="__span-3-192"><a id="__codelineno-3-192" name="__codelineno-3-192" href="#__codelineno-3-192"></a>            reader.conf.d：存放smart card配置文件的目录，由程序pcsc-lite提供，这个程序的主配置文件是/etc/reader.conf
</span><span id="__span-3-193"><a id="__codelineno-3-193" name="__codelineno-3-193" href="#__codelineno-3-193"></a>            dumpdates：存放dump命令的执行日期，dump命令可以对ext2/ext3文件系统进行检查备份
</span><span id="__span-3-194"><a id="__codelineno-3-194" name="__codelineno-3-194" href="#__codelineno-3-194"></a>
</span><span id="__span-3-195"><a id="__codelineno-3-195" name="__codelineno-3-195" href="#__codelineno-3-195"></a>/home      默认存放用户的宿主目录(除了root用户)
</span><span id="__span-3-196"><a id="__codelineno-3-196" name="__codelineno-3-196" href="#__codelineno-3-196"></a>     /home/~/.bashrc：提供bash环境中所需使用的别名
</span><span id="__span-3-197"><a id="__codelineno-3-197" name="__codelineno-3-197" href="#__codelineno-3-197"></a>     /home/~/.bash_profile：提供bash环境所需的变量；一般先执.bashrc后，才会再执行.bash_profile
</span><span id="__span-3-198"><a id="__codelineno-3-198" name="__codelineno-3-198" href="#__codelineno-3-198"></a>     /home/~/.bash_history：用户历史命令文件，记录用户曾经输入的所有命令；(默认为1000条，可以通过HISTSIZE变量更改)
</span><span id="__span-3-199"><a id="__codelineno-3-199" name="__codelineno-3-199" href="#__codelineno-3-199"></a>     /home/~/.bash_logout：当用户注销的同时，系统自动生成.bash_logout文件，如需要记录用户注销的其他信息，可以利用这个机制去完成
</span><span id="__span-3-200"><a id="__codelineno-3-200" name="__codelineno-3-200" href="#__codelineno-3-200"></a>
</span><span id="__span-3-201"><a id="__codelineno-3-201" name="__codelineno-3-201" href="#__codelineno-3-201"></a>/root     管理员root的宿主目录
</span><span id="__span-3-202"><a id="__codelineno-3-202" name="__codelineno-3-202" href="#__codelineno-3-202"></a>
</span><span id="__span-3-203"><a id="__codelineno-3-203" name="__codelineno-3-203" href="#__codelineno-3-203"></a>/lib      需要共享的函数库与kernel模块，系统kernel启动所使用的函数库，或者当执行一些在/bin和/sbin中的命令时使用的函数库
</span><span id="__span-3-204"><a id="__codelineno-3-204" name="__codelineno-3-204" href="#__codelineno-3-204"></a>
</span><span id="__span-3-205"><a id="__codelineno-3-205" name="__codelineno-3-205" href="#__codelineno-3-205"></a>/mnt      挂载点目录；一般的自动挂在/media目录(如磁盘分区，网络共享)
</span><span id="__span-3-206"><a id="__codelineno-3-206" name="__codelineno-3-206" href="#__codelineno-3-206"></a>
</span><span id="__span-3-207"><a id="__codelineno-3-207" name="__codelineno-3-207" href="#__codelineno-3-207"></a>/media    移动存储设备默认挂载点；(如光盘)
</span><span id="__span-3-208"><a id="__codelineno-3-208" name="__codelineno-3-208" href="#__codelineno-3-208"></a>
</span><span id="__span-3-209"><a id="__codelineno-3-209" name="__codelineno-3-209" href="#__codelineno-3-209"></a>/opt      常用于放置大型的应用软件；数据库文件
</span><span id="__span-3-210"><a id="__codelineno-3-210" name="__codelineno-3-210" href="#__codelineno-3-210"></a>
</span><span id="__span-3-211"><a id="__codelineno-3-211" name="__codelineno-3-211" href="#__codelineno-3-211"></a>/proc     只存在于内存中的文件系统，保存操作系统的实时信息；内存信息，CPU信息，虚拟内存信息，电源信息；cpuinfo ,meminfo ,acpi,scsi,
</span><span id="__span-3-212"><a id="__codelineno-3-212" name="__codelineno-3-212" href="#__codelineno-3-212"></a>         vmstat,uptime;每次启动操作系统都会自动创建一个新的/porc文件，来记录系统的实时信息；并不是存放在硬盘上，而是内存镜像中的
</span><span id="__span-3-213"><a id="__codelineno-3-213" name="__codelineno-3-213" href="#__codelineno-3-213"></a>         虚拟文件系统，此目录是kernel加载后，在内存里面建立的一个虚拟目录，有专属的文件系统，主要提供系统一些实时的信息，此目录下不能
</span><span id="__span-3-214"><a id="__codelineno-3-214" name="__codelineno-3-214" href="#__codelineno-3-214"></a>         建立和删除文件；(某些文件可以修改)
</span><span id="__span-3-215"><a id="__codelineno-3-215" name="__codelineno-3-215" href="#__codelineno-3-215"></a>         /proc主要作用可以整理为：
</span><span id="__span-3-216"><a id="__codelineno-3-216" name="__codelineno-3-216" href="#__codelineno-3-216"></a>                整理系统内部的信息
</span><span id="__span-3-217"><a id="__codelineno-3-217" name="__codelineno-3-217" href="#__codelineno-3-217"></a>                存放主机硬件信息
</span><span id="__span-3-218"><a id="__codelineno-3-218" name="__codelineno-3-218" href="#__codelineno-3-218"></a>                调整系统执行时的参数
</span><span id="__span-3-219"><a id="__codelineno-3-219" name="__codelineno-3-219" href="#__codelineno-3-219"></a>                检查及修改网络和主机的参数
</span><span id="__span-3-220"><a id="__codelineno-3-220" name="__codelineno-3-220" href="#__codelineno-3-220"></a>                检查及调整系统的内存和性能
</span><span id="__span-3-221"><a id="__codelineno-3-221" name="__codelineno-3-221" href="#__codelineno-3-221"></a>    /proc下常用的信息文件有：
</span><span id="__span-3-222"><a id="__codelineno-3-222" name="__codelineno-3-222" href="#__codelineno-3-222"></a>    /proc/cpuinfo：cpu的硬件信息，如类型、厂家、型号和性能等
</span><span id="__span-3-223"><a id="__codelineno-3-223" name="__codelineno-3-223" href="#__codelineno-3-223"></a>    /proc/devices：记录所有在/dev目录中相关的设备文件分类方式
</span><span id="__span-3-224"><a id="__codelineno-3-224" name="__codelineno-3-224" href="#__codelineno-3-224"></a>    /proc/filesystems：当前运行内核所配置的文件系统
</span><span id="__span-3-225"><a id="__codelineno-3-225" name="__codelineno-3-225" href="#__codelineno-3-225"></a>    /proc/interrupts：可以查看每一个IRQ的编号对应到哪一个硬件备
</span><span id="__span-3-226"><a id="__codelineno-3-226" name="__codelineno-3-226" href="#__codelineno-3-226"></a>    /proc/loadavg：系统&quot;平均负载&quot;，3个数据指出系统当前的工作负载
</span><span id="__span-3-227"><a id="__codelineno-3-227" name="__codelineno-3-227" href="#__codelineno-3-227"></a>    /proc/dma：当前正在使用的DMA通道
</span><span id="__span-3-228"><a id="__codelineno-3-228" name="__codelineno-3-228" href="#__codelineno-3-228"></a>    /proc/ioports：将目前系统上所有可看到的硬件对应到内存位置的配表的详细信息呈现出来
</span><span id="__span-3-229"><a id="__codelineno-3-229" name="__codelineno-3-229" href="#__codelineno-3-229"></a>    /proc/kcore：系统上可以检测到的物理内存，主机内存多大，这个件就有多大
</span><span id="__span-3-230"><a id="__codelineno-3-230" name="__codelineno-3-230" href="#__codelineno-3-230"></a>    /proc/kmsg：在系统尚未进入操作系统阶段，把加载kernel和initr的信息先记录到该文件中，后续会将日志信息写入/var/log/messag文件中
</span><span id="__span-3-231"><a id="__codelineno-3-231" name="__codelineno-3-231" href="#__codelineno-3-231"></a>    /proc/meminfo：记录系统的内存信息
</span><span id="__span-3-232"><a id="__codelineno-3-232" name="__codelineno-3-232" href="#__codelineno-3-232"></a>    /proc/modules：与lsmod命令查看到的模块信息完全一致
</span><span id="__span-3-233"><a id="__codelineno-3-233" name="__codelineno-3-233" href="#__codelineno-3-233"></a>    /proc/mtrr：负责内存配置的机制
</span><span id="__span-3-234"><a id="__codelineno-3-234" name="__codelineno-3-234" href="#__codelineno-3-234"></a>    /proc/iomem：主要用于储存配置后所有内存储存的明细信息
</span><span id="__span-3-235"><a id="__codelineno-3-235" name="__codelineno-3-235" href="#__codelineno-3-235"></a>    /proc/partitions：这个文件可以实时呈现系统目前看到的分区
</span><span id="__span-3-236"><a id="__codelineno-3-236" name="__codelineno-3-236" href="#__codelineno-3-236"></a>    /proc/数字目录：数字目录很多，它们代表所有目前正在系统中运行所有程序
</span><span id="__span-3-237"><a id="__codelineno-3-237" name="__codelineno-3-237" href="#__codelineno-3-237"></a>    /proc/bus：有关该主机上现有总线的所有信息，如输入设备、PCI口、PCMCIA扩展卡及USB接口信息
</span><span id="__span-3-238"><a id="__codelineno-3-238" name="__codelineno-3-238" href="#__codelineno-3-238"></a>    /proc/net目录：存放的都是一些网络相关的虚拟配置文件，都ASCII文件，可以查看(与ifconfig、arp、netstat等有关)
</span><span id="__span-3-239"><a id="__codelineno-3-239" name="__codelineno-3-239" href="#__codelineno-3-239"></a>    /proc/scsi：保存系统上所有的scsi设备信息(包括sata和usb设备信息)
</span><span id="__span-3-240"><a id="__codelineno-3-240" name="__codelineno-3-240" href="#__codelineno-3-240"></a>    /proc/sys目录：存放系统核心所使用的一些变量，根据不同性质的件而存放在不同的子目录中，可以通过/etc/sysctl.conf文件设置更改其默认值
</span><span id="__span-3-241"><a id="__codelineno-3-241" name="__codelineno-3-241" href="#__codelineno-3-241"></a>                  变量时实时的变更，有很多设置很象是开关，设置后上生效
</span><span id="__span-3-242"><a id="__codelineno-3-242" name="__codelineno-3-242" href="#__codelineno-3-242"></a>    /proc/tty：存放有关目前可用的正在使用的tty设备的信息
</span><span id="__span-3-243"><a id="__codelineno-3-243" name="__codelineno-3-243" href="#__codelineno-3-243"></a>    /proc/self：存放到查看/proc的程序的进程目录的符号连接，当2进程查看proc时，这将会是不同的连接；主要便于程序得到它自己的程目录
</span><span id="__span-3-244"><a id="__codelineno-3-244" name="__codelineno-3-244" href="#__codelineno-3-244"></a>    /proc/stat：系统的不同状态信息
</span><span id="__span-3-245"><a id="__codelineno-3-245" name="__codelineno-3-245" href="#__codelineno-3-245"></a>    /proc/uptime：系统启动的时间长度
</span><span id="__span-3-246"><a id="__codelineno-3-246" name="__codelineno-3-246" href="#__codelineno-3-246"></a>    /proc/version：系统核心版本
</span><span id="__span-3-247"><a id="__codelineno-3-247" name="__codelineno-3-247" href="#__codelineno-3-247"></a>
</span><span id="__span-3-248"><a id="__codelineno-3-248" name="__codelineno-3-248" href="#__codelineno-3-248"></a>/sbin    存放特权级二进制文件（特权级可执行命令）只有root用户可以执行；较危险的命令保存其中；(多数管理命令默认只有管理员可以使用)
</span><span id="__span-3-249"><a id="__codelineno-3-249" name="__codelineno-3-249" href="#__codelineno-3-249"></a>
</span><span id="__span-3-250"><a id="__codelineno-3-250" name="__codelineno-3-250" href="#__codelineno-3-250"></a>/usr：安装除操作系统本身外的一些应用程序或组件，一般可以认为linux系统上安装的应用程序默认都安装在此目录中
</span><span id="__span-3-251"><a id="__codelineno-3-251" name="__codelineno-3-251" href="#__codelineno-3-251"></a>    /usr/bin：一般用户有机会使用到的程序，或者该软件默认就是要所有用户使用才会放在该目录中
</span><span id="__span-3-252"><a id="__codelineno-3-252" name="__codelineno-3-252" href="#__codelineno-3-252"></a>    /usr/sbin：一些系统有可能会用到的系统命令，与/sbin比起来，是一些较次要的文件
</span><span id="__span-3-253"><a id="__codelineno-3-253" name="__codelineno-3-253" href="#__codelineno-3-253"></a>    /usr/etc：自行安装或非系统主要的配置文件目录
</span><span id="__span-3-254"><a id="__codelineno-3-254" name="__codelineno-3-254" href="#__codelineno-3-254"></a>    /usr/games：只要是电脑游戏相关的软件，就都安装到这个目录
</span><span id="__span-3-255"><a id="__codelineno-3-255" name="__codelineno-3-255" href="#__codelineno-3-255"></a>    /usr/include：存放的文件都是一些系统中用户所会使用到的C语header文件，保存的都是&quot;.h&quot;的文件
</span><span id="__span-3-256"><a id="__codelineno-3-256" name="__codelineno-3-256" href="#__codelineno-3-256"></a>    /usr/kerberos：kerberos是一种安全机制，让用户可以直接使用持kerberos机制系统上的部分资源
</span><span id="__span-3-257"><a id="__codelineno-3-257" name="__codelineno-3-257" href="#__codelineno-3-257"></a>    /usr/lib：存放一些函数库、执行文件及连接文件，特别的是，存在这里面的文件都是不希望直接被用户或shell脚本所使用的文件，/usr/lib中有
</span><span id="__span-3-258"><a id="__codelineno-3-258" name="__codelineno-3-258" href="#__codelineno-3-258"></a>              非常多的子目录，每一个软件都有其各自所需的函库
</span><span id="__span-3-259"><a id="__codelineno-3-259" name="__codelineno-3-259" href="#__codelineno-3-259"></a>    /usr/libexec：这个目录下的文件及文件夹应该都可以放置/usr/lib下
</span><span id="__span-3-260"><a id="__codelineno-3-260" name="__codelineno-3-260" href="#__codelineno-3-260"></a>    /usr/local：linux系统中安装的共享软件程序最好的方式是安装/usr/local下，按照linux标准目录结构，新建立的软件都应该放/usr/local下
</span><span id="__span-3-261"><a id="__codelineno-3-261" name="__codelineno-3-261" href="#__codelineno-3-261"></a>        /usr/local/bin：存放软件执行文件的目录
</span><span id="__span-3-262"><a id="__codelineno-3-262" name="__codelineno-3-262" href="#__codelineno-3-262"></a>        /usr/local/sbin：同样存放软件执行文件的目录，但此目录门针对系统所使用的文件
</span><span id="__span-3-263"><a id="__codelineno-3-263" name="__codelineno-3-263" href="#__codelineno-3-263"></a>        /usr/local/lib：软件相关的函数库
</span><span id="__span-3-264"><a id="__codelineno-3-264" name="__codelineno-3-264" href="#__codelineno-3-264"></a>        /usr/local/share：当文件性质不好归属时就会放在此，man册就放在这个目录下
</span><span id="__span-3-265"><a id="__codelineno-3-265" name="__codelineno-3-265" href="#__codelineno-3-265"></a>        /usr/local/src：所安装软件的源代码放置在此
</span><span id="__span-3-266"><a id="__codelineno-3-266" name="__codelineno-3-266" href="#__codelineno-3-266"></a>    /usr/share：此目录都是一些共享信息，最常被用到的就/usr/share/man这个目录，/usr/share里的信息时跨平台的
</span><span id="__span-3-267"><a id="__codelineno-3-267" name="__codelineno-3-267" href="#__codelineno-3-267"></a>    /usr/share/doc：放置一些系统帮助文件的地方
</span><span id="__span-3-268"><a id="__codelineno-3-268" name="__codelineno-3-268" href="#__codelineno-3-268"></a>    /usr/share/man：manpage的文件存放目录，也是使用man查看手册时查询的路径
</span><span id="__span-3-269"><a id="__codelineno-3-269" name="__codelineno-3-269" href="#__codelineno-3-269"></a>    /usr/src：主要储存内核源代码的文件
</span><span id="__span-3-270"><a id="__codelineno-3-270" name="__codelineno-3-270" href="#__codelineno-3-270"></a>    /usr/X11R6：存放一些X windows系统的相关文件
</span><span id="__span-3-271"><a id="__codelineno-3-271" name="__codelineno-3-271" href="#__codelineno-3-271"></a>
</span><span id="__span-3-272"><a id="__codelineno-3-272" name="__codelineno-3-272" href="#__codelineno-3-272"></a>/var    动态文件或数据存放目录，默认日志文件都存放在这个目录下，一般建议把此目录单独划分一个分区
</span><span id="__span-3-273"><a id="__codelineno-3-273" name="__codelineno-3-273" href="#__codelineno-3-273"></a>    /var/account：是linux系统下的审核机制(psacct)对应的目录
</span><span id="__span-3-274"><a id="__codelineno-3-274" name="__codelineno-3-274" href="#__codelineno-3-274"></a>    /var/cache：该目录下的文件时所有程序所产生的缓存数据，也就是当应用程序启动时，会将数据留一份在这个目录中
</span><span id="__span-3-275"><a id="__codelineno-3-275" name="__codelineno-3-275" href="#__codelineno-3-275"></a>    /var/empty：默认是sshd程序用到的这个目录，当建立ssh连接，ssh服务器必须使用该目录下的sshd子目录
</span><span id="__span-3-276"><a id="__codelineno-3-276" name="__codelineno-3-276" href="#__codelineno-3-276"></a>    /var/ftp：ftp服务器软件一般默认会将匿名登陆的用户的宿主目录
</span><span id="__span-3-277"><a id="__codelineno-3-277" name="__codelineno-3-277" href="#__codelineno-3-277"></a>    /var/gdm：gdm所使用的目录，里面存放一些系统当前所占用的console记录及通过gdm执行的X windows记录，只有通过gdm窗口的日志才会存放在此
</span><span id="__span-3-278"><a id="__codelineno-3-278" name="__codelineno-3-278" href="#__codelineno-3-278"></a>    /var/lib：该目录下存放很多与应用程序名称同名的子目录，每个子目录下都是应用执行的状态信息
</span><span id="__span-3-279"><a id="__codelineno-3-279" name="__codelineno-3-279" href="#__codelineno-3-279"></a>    /var/lock：每个服务一开始都会在这个目录下产生一个该服务的空文件，主要是避免服务启动冲突
</span><span id="__span-3-280"><a id="__codelineno-3-280" name="__codelineno-3-280" href="#__codelineno-3-280"></a>    /var/log：常用目录，专门用来存放所有日志文件的目录，里面存放很多系统、软件、用户等相关的日志信息；里面有一些文件是比较常用的
</span><span id="__span-3-281"><a id="__codelineno-3-281" name="__codelineno-3-281" href="#__codelineno-3-281"></a>        lastlog：记录用户最后一次登录的信息，使用lastlog命令读取
</span><span id="__span-3-282"><a id="__codelineno-3-282" name="__codelineno-3-282" href="#__codelineno-3-282"></a>        message：记录系统的几乎所有信息，主要包括启动信息，syslogd服务记录的信息等
</span><span id="__span-3-283"><a id="__codelineno-3-283" name="__codelineno-3-283" href="#__codelineno-3-283"></a>        wtmp：记录所有用户登陆及注销的信息，使用last命令读取
</span><span id="__span-3-284"><a id="__codelineno-3-284" name="__codelineno-3-284" href="#__codelineno-3-284"></a>        secure：记录登录系统访问数据的文件，如ssh pop3 telnet ftp等都会记录在此文件中
</span><span id="__span-3-285"><a id="__codelineno-3-285" name="__codelineno-3-285" href="#__codelineno-3-285"></a>        /var/log/httpd/access_log：httpd访问日志
</span><span id="__span-3-286"><a id="__codelineno-3-286" name="__codelineno-3-286" href="#__codelineno-3-286"></a>        /var/log/httpd/error_log：httpd错误日志
</span><span id="__span-3-287"><a id="__codelineno-3-287" name="__codelineno-3-287" href="#__codelineno-3-287"></a>        btmp：记录失败的用户登录
</span><span id="__span-3-288"><a id="__codelineno-3-288" name="__codelineno-3-288" href="#__codelineno-3-288"></a>        utmp： 纪录当前登录的每个用户
</span><span id="__span-3-289"><a id="__codelineno-3-289" name="__codelineno-3-289" href="#__codelineno-3-289"></a>        xferlog：ftp会话日志
</span><span id="__span-3-290"><a id="__codelineno-3-290" name="__codelineno-3-290" href="#__codelineno-3-290"></a>        boot.log：记录开机或一些服务启动时所显示的启动和关闭信息
</span><span id="__span-3-291"><a id="__codelineno-3-291" name="__codelineno-3-291" href="#__codelineno-3-291"></a>        /var/log/maillog或/var/log/mail/*：记录邮件访问或往来的用户信息
</span><span id="__span-3-292"><a id="__codelineno-3-292" name="__codelineno-3-292" href="#__codelineno-3-292"></a>        cron： 记录crontab例行性服务的内容
</span><span id="__span-3-293"><a id="__codelineno-3-293" name="__codelineno-3-293" href="#__codelineno-3-293"></a>        dmesg：开机引导日志信息
</span><span id="__span-3-294"><a id="__codelineno-3-294" name="__codelineno-3-294" href="#__codelineno-3-294"></a>        sudolog：纪录使用sudo发出的命令
</span><span id="__span-3-295"><a id="__codelineno-3-295" name="__codelineno-3-295" href="#__codelineno-3-295"></a>        sulog： 纪录使用su命令的使用
</span><span id="__span-3-296"><a id="__codelineno-3-296" name="__codelineno-3-296" href="#__codelineno-3-296"></a>    /var/named：bind软件实现的DNS服务器的区域数据文件都存放在这个目录下
</span><span id="__span-3-297"><a id="__codelineno-3-297" name="__codelineno-3-297" href="#__codelineno-3-297"></a>    /var/nis和/var/yp：都是NIS服务机制所使用的目录，nis主要记录所有网络中每一个client的连接信息；yp是linux的nis服务的日志文件存放的目录
</span><span id="__span-3-298"><a id="__codelineno-3-298" name="__codelineno-3-298" href="#__codelineno-3-298"></a>    /var/run：此目录中的大部分文件都记载目前系统正在执行程序的PID值，每一个文件都是以个独立的PID记录；此目录下存放一个特殊文件utmp，此文件记录目前谁在使用系统，必须使用utmpdump命令才能看到其中的内容
</span><span id="__span-3-299"><a id="__codelineno-3-299" name="__codelineno-3-299" href="#__codelineno-3-299"></a>    /var/spool：里面主要都是一些临时存放，随时会被用户所调用的数据；打印机、邮件、代理服务器等假脱机目录存放在该目录下
</span><span id="__span-3-300"><a id="__codelineno-3-300" name="__codelineno-3-300" href="#__codelineno-3-300"></a>    /var/tmp：专门为了一些应用程序在安装或执行时，需要在重启后使用的某些文件时，能将该文件暂时存放在这个目录中，完成后再行删除
</span><span id="__span-3-301"><a id="__codelineno-3-301" name="__codelineno-3-301" href="#__codelineno-3-301"></a>    /var/www：apache网页服务器的宿主目录
</span><span id="__span-3-302"><a id="__codelineno-3-302" name="__codelineno-3-302" href="#__codelineno-3-302"></a>
</span><span id="__span-3-303"><a id="__codelineno-3-303" name="__codelineno-3-303" href="#__codelineno-3-303"></a>/lost+found:存放了一些系统出错的检查结果；异常断电情况、死机；默认目录是空的,通常使用fsck进行文件修复，修复后文件则被存放于此目录
</span><span id="__span-3-304"><a id="__codelineno-3-304" name="__codelineno-3-304" href="#__codelineno-3-304"></a>
</span><span id="__span-3-305"><a id="__codelineno-3-305" name="__codelineno-3-305" href="#__codelineno-3-305"></a>/misc：自动挂载服务目录，对应autofs服务
</span><span id="__span-3-306"><a id="__codelineno-3-306" name="__codelineno-3-306" href="#__codelineno-3-306"></a>
</span><span id="__span-3-307"><a id="__codelineno-3-307" name="__codelineno-3-307" href="#__codelineno-3-307"></a>/srv：默认为空，主要用于存放一些软件的配置文件，某些软件可能会把配置文件默认存放在这个目录下，多数都是/etc目录下，此目录没有被具体的定义
</span><span id="__span-3-308"><a id="__codelineno-3-308" name="__codelineno-3-308" href="#__codelineno-3-308"></a>
</span><span id="__span-3-309"><a id="__codelineno-3-309" name="__codelineno-3-309" href="#__codelineno-3-309"></a>/temp  临时文件存放点；此目录有特殊的权限位粘滞位：1777
</span><span id="__span-3-310"><a id="__codelineno-3-310" name="__codelineno-3-310" href="#__codelineno-3-310"></a>
</span><span id="__span-3-311"><a id="__codelineno-3-311" name="__codelineno-3-311" href="#__codelineno-3-311"></a>/tftpboot：远程启动tftpserver的根目录，这个目录只有安装了tftp-server软件后才会产生
</span><span id="__span-3-312"><a id="__codelineno-3-312" name="__codelineno-3-312" href="#__codelineno-3-312"></a>
</span><span id="__span-3-313"><a id="__codelineno-3-313" name="__codelineno-3-313" href="#__codelineno-3-313"></a>备注：如果要做系统级备份的话，/etc ,/boot是必须要备份的目录，备份分为：系统备份和用户备份
</span><span id="__span-3-314"><a id="__codelineno-3-314" name="__codelineno-3-314" href="#__codelineno-3-314"></a>/sbin   /usr/sbin是root账户可以执行命令的存放路径
</span><span id="__span-3-315"><a id="__codelineno-3-315" name="__codelineno-3-315" href="#__codelineno-3-315"></a>/bin    /usr/bin对于普通用户可以执行命令的存放路径
</span><span id="__span-3-316"><a id="__codelineno-3-316" name="__codelineno-3-316" href="#__codelineno-3-316"></a>        bin代表binnary ；sbin 代表super binnary
</span><span id="__span-3-317"><a id="__codelineno-3-317" name="__codelineno-3-317" href="#__codelineno-3-317"></a>/usr目录的重要性是和windows系统上的windows目录的重要性是一样的，都是核心文件存放的位置
</span></code></pre></div>
<h3 id="grub">GRUB配置文件讲解<a class="headerlink" href="#grub" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>配置文件位置：/etc/grub.conf是个软连接文件
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>原始文件/boot/grub/grub.conf
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>grep -v &quot;^#&quot; /boot/grub/grub.conf | more
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>字段：
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="gu">default定义缺省启动系统,0表示第一个，1表示第二个，以此类推</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="gu">timeout     定义了缺省等待时间；默认5秒</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="gu">splashimage 定义了GRUB启动时的界面图片</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="gu">hiddenmenu  隐藏菜单</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="gu">title       定义了菜单项名称</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="gu">root        作用是设置GRUB的根设备也就是内核所在的分区</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="gu">kernel      定义了内核文件所在的位置</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="gu">initrd      命令加载镜像文件以及显示镜像文件的位置</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="gu">-------------------------------------------------</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>GRUB设置密码
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>第一种方式：使用GRUB自带的grub-md5-crypt命令
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>grub-md5-crypt
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>在图形界面我可以选择复制选项进行复制，在字符终端界面上使用鼠标右键复制加密字符
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>编辑/etc/grub.conf配置文件，在hiddenmenu字段下面插入关于插入位置没有严格的要求）
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>password --md5 加密字符（-md5表示口令是md5加密的）
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>在插入模式下插入加密的字符串；然后退出保持即可
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>第二种方式：是在GRUB交互命令行界面使用md5crypt命令，效果是一样的
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>grub
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>grub&gt;md5crypt
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>password:
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>GRUB的系统修复：（手工修复）故意修改kernel指定的内核文件
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>grub&gt; cat /grub/grub.conf  为什么没有/boot原因就是grub存放在/boot分区
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>grub&gt; 指定内核所在的分区 root (hd0,0)
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>grub&gt; 指定内核文件所在的位置
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>grub&gt; 指定镜像文件的位置
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>grub&gt; boot
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>手工修复属于命令行操作；如修改了/etc/inittab中的默认启动级别的话，完全可以通过grub启动菜单来进行修复：在kernel行直接加入启动级别
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>终极修复模式：光盘修复
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>光盘引导，F5键，键入linux rescue
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>案例1：尝试删除/etc/inittab，之前先做好备份
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>cp /etc/inittab /etc/inittab.bak
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>rm -rf /etc/inittab
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>案例2：如果忘记了管理员密码，同时也忘记了GRUB的保护密码的话，我们可以使用GRUB的系统修复或者使用光盘的引导修复来解决此问题
</span></code></pre></div>
<h3 id="fstab">fstab文件含义如下<a class="headerlink" href="#fstab" title="Permanent link">&para;</a></h3>
<ul>
<li>物理分区/卷标；可以使用UUID、设备路径/dev/、协议/文件系统类型或网络共享名称表示</li>
<li>挂载点(注意：swap没有挂载点)</li>
<li>文件系统,auto通常用于可移动设备，特定文件系统或网络共享网络协议</li>
<li>挂载时使用的参数；此选项取决于文件系统，default=rw，suid，dev，exec，auto，nouser和async</li>
<li>sync/async     文件系统的所有I/O同步或异步完成</li>
<li>auto           文件系统可以自动挂载（在启动时或通过-a选项传递挂载时）。确实没有必要，因为无论如何这是mount -a的默认操作</li>
<li>noauto         在启动时或通过-a挂载时不会自动挂载文件系统。您必须显式挂载文件系统</li>
<li>dev/nodev      解释或不解释字符或阻止文件系统上的特殊设备</li>
<li>exec/noexec    允许或阻止从文件系统执行二进制文件</li>
<li>suid/nosuid    允许或阻止suid和sgid位的操作</li>
<li>ro             挂载为只读</li>
<li>rw             挂载为读写</li>
<li>user           允许任何用户挂载文件系统。除非被覆盖，这将自动表示noexec，nosuid，nodev除非被额外选项覆盖</li>
<li>nouser         仅允许root挂载文件系统。这也是默认设置</li>
<li>defaults       使用默认设置。等效于rw，suid，dev，exec，auto，nouser，async</li>
<li>_netdev        这是一个网络设备，在启动网络后将其安装。仅对fstype nfs有效</li>
<li>noatime,nodiratime 禁止记录最近访问时间戳，设置noatime可不必再设置nodiratime</li>
<li>relatime       实时更新inode访问记录时间戳</li>
<li>owner          允许设备被那个所有者挂载</li>
<li>启用或禁用设备/分区的备份(dump是备份工具)，1表示开启，0表示忽略</li>
<li>控制fsck在引导时检查设备/分区的错误的顺序，根设备应为1。其他分区应为2或0以禁用检查</li>
</ul>
<h2 id="linux_">Linux_用户、组和权限<a class="headerlink" href="#linux_" title="Permanent link">&para;</a></h2>
<h3 id="linux_4">Linux用户和用户组<a class="headerlink" href="#linux_4" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="gh"># 查看系统中有多少的用户数量</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>wc -l /etc/passwd
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>cut -d &quot; : &quot; -f 1 /etc/passwd
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="gh"># 用户和组的文件</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>/etc/passwd
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>/etc/group
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="gh"># 影子口令：（真正口令文件路径）</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>用户：/etc/shadow
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>组：/etc/gshadow
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="gh"># /etc/passwd中7段意义：用户名：密码：UID:GID：用户描述信息：家目录：默认SHELL</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>account: 用户名
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>password: 密码
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>UID：用户ID，分为三类：root用户：0，普通用户：500-60000，伪用户：1-499
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>GID：组ID，每个用户至少属于一个组，每个组可以有多个用户，同一用户组的用户继承改组的权限
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>用户描述信息:针对用户的简介
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>HOME DIR：家目录
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>SHELL：用户的默认shell
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="gh"># /etc/group中4段意义：组名：密码：GID:以此组为其附加组的用户列表</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="gh"># /etc/shadow中8段意义：</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>字段1：用户帐号的名称
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>字段2：加密的密码字串信息
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>字段3：上次修改密码的时间（1970/1/1距修改时间的天数）
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>字段4：密码的最短有效天数，默认值为0
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>字段5：密码的最长有效天数，默认值为99999
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>字段6：提前多少天警告用户口令将过期，默认值为7
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>字段7：在密码过期之后多少天禁用此用户
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>字段8：帐号失效时间，默认值为 空
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>字段9：保留字段（未使用)
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="gh"># 伪用户：</span>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>伪用户就是系统和程序操作时调用的用户，与系统和程序服务相关。例如：bin、daemon、shutdown、halt等，任何linux操作系统都默认
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>有这些伪用户，是系统自动生成的，例如：mail、apache、ftp等，与linux系统的进程相关，而且此类的用户不需要登录或者是无法登录
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>系统当中，同时也可以没有相应的宿主目录
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="gh"># 扩展知识点：</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>关于建立用户设置密码的过程分析：密码先写入/etc/passwd文件的第二个字段，接着通过指令转到/etc/shadow文件中，转化的命令是psconv
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>过程是自动完成，回写的命令是pwunconv，执行此命令后密码会在/etc/passwd中的第二个字段X中出现且是加密的，这也说明了密码位保留的原因
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>登陆信息文件：/etc/motd  登录成功后会看到提示信息
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>修改/etc/issue文件的话，是在登录之前就可以看到；为了安全起见，防止看到操作系统的版本信息，可以修改/etc/issue文件的内容或者直接删除即可
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>/etc/issue.net文件中的信息是作为telnet服务的提示信息
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>issue 内的各代码意义表示如下所示：（管理人员可以自行添加）
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>/l 显示第几个终端机接口
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>/m 显示硬件的等级 (i386/i486/i586/i686...)
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>/n 显示主机的网络名称
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>/o 显示 domain name
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>/r 操作系统的版本 (相当于 uname -r)
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a>/t 显示本地端时间的时间
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a>/s 操作系统的名称
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>/v 操作系统的版本
</span></code></pre></div>
<h3 id="r-w-x">权限：r, w, x<a class="headerlink" href="#r-w-x" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="gh"># 文件权限：</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>r--4：可读
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>w--2：可写
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>x--1: 可执行，eXacutable
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="gh"># 目录权限：</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>w: 可以在此目录创建文件
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>r: 可以对此目录执行ls以列出内部的所有文件
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>x: 可以使用cd切换进此目录，也可以使用ls -l查看内部文件的详细信息
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="gh"># 权限三位一体：</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>rwx:可读可学可执行
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>r--:只读
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>r-x:读和执行
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>---：无权限
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="gh"># 八进制表示：</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>0 000 ---：无权限
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>1 001 --x: 执行
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>2 010 -w-: 写
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>3 011 -wx: 写和执行
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>4 100 r--: 只读
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>5 101 r-x: 读和执行
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>6 110 rw-: 读写
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>7 111 rwx: 读写执行
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="gh"># 例如：</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>rw-r-----: 640
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>rw-r--r--: 644
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>rw-rw----: 660
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>rwxr-xr-x: 755
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>rwxrwxr-x: 775
</span></code></pre></div>
<h3 id="_3">三、特殊权限<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>特殊权限：s,s,t
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">1.</span> SUID: 运行某程序时，相应进程的属主是程序文件自身的属主，而不是动者
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>格式：chmod u+s FILE  ，chmod u-s FILE
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>注意：如果FILE本身原来就有执行权限，则SUID显示为s；否则显示S
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="k">2.</span> SGID: 运行某程序时，相应进程的属组是程序文件自身的属组，而不是动者所属的基本组
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>格式：chmod g+s FILE  ， chmod g-s FILE
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>注意：如果FILE本身原来就有执行权限，则SUID显示为s；否则显示S
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="k">3.</span> Sticky bit(粘滞位): 在一个公共目录，每个都可以创建文件，删除自己的文件，但不能删除别人的文件
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>                      当⽬录被设置了粘滞位权限以后，即便⽤户对该⽬录有写⼊权限，也不能删除该⽬录
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>                      中其他⽤户的⽂件数据，⽽是只有该⽂件的所有者和root⽤户才有权将其删除
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>格式：chmod o+t DIR  ， chmod o-t DIR
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>注意：如果FILE本身原来就有执行权限，则SUID显示为t；否则显示T；粘滞位权限是针对目录的，对文件无效
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="k">4.</span> umask：
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>文件默认权限：666-umask
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>文件夹默认权限：777-umask
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>特殊权限默认为0
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>默认umask：umask=0022
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>更改umask：umask 0023
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>注意：文件默认不能具有执行权限，如果算得的结果中有执行权限，则将权限加1
</span></code></pre></div>
<h2 id="_4">系统命令行快捷键<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="gh"># 说明</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Ctrl – k      # 先按住 Ctrl 键，然后再按 k 键
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Alt – k       # 先按住 Alt 键，然后再按 k 键
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>M – k         # 先单击 Esc 键，然后再按 k 键
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="gh"># 移动光标</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>Ctrl - 左右键  # 在单词之间跳转
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>Ctrl – a      # 移到行首
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>Ctrl – e      # 移到行尾
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>Ctrl – xx     # 在命令行尾和光标之间移动
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>Ctrl – b      # 往前(左)移动一个字符
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>Ctrl – f      # 往后(右)移动一个字符
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>Alt – b       # 往前(左)移动一个单词
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>Alt – f       # 往后(右)移动一个单词
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>M-b           # 往前(左)移动一个单词
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>M-f           # 往后(右)移动一个单词
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="gh"># 编辑命令</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>Ctrl – h      # 删除光标左方位置的字符
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>Ctrl – d      # 删除光标右方位置的字符（注意当前命令行没有任何字符时，会注销系统或结束终端）
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>Ctrl – w      # 由光标位置开始，往左删除单词。往行首删
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>Alt – d       # 由光标位置开始，往右删除单词。往行尾删
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>M – d         # 由光标位置开始，删除单词，直到该单词结束
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>Ctrl – k      # 由光标所在位置开始，删除右方所有的字符，直到该行结束
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>Ctrl – u      # 由光标所在位置开始，删除左方所有的字符，直到该行开始
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>Ctrl – y      # 粘贴Ctrl+u或ctrl+k剪切的内容
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>ctrl – t      # 交换光标处和之前两个字符的位置
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>Alt + .       # 使用上一条命令的最后一个参数
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>Ctrl – _      # 回复之前的状态。撤销操作
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a>Ctrl -a + Ctrl -k 或 Ctrl -e + Ctrl -u 或 Ctrl -k + Ctrl -u # 组合可删除整行
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a>
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="gh"># 控制命令</span>
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a>Ctrl – l      # 清除屏幕，然后，在最上面重新显示目前光标所在的这一行的内容
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a>Ctrl – o      # 执行当前命令，并选择上一条命令
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a>Ctrl – s      # 阻止屏幕输出
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a>Ctrl – q      # 允许屏幕输出
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>Ctrl – c      # 终止命令
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a>Ctrl – z      # 挂起命令
</span><span id="__span-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a>
</span><span id="__span-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="gh"># Bang(!)命令</span>
</span><span id="__span-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a>!!            # 执行上一条命令
</span><span id="__span-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a>^foo^bar      # 把上一条命令里的foo替换为bar，并执行
</span><span id="__span-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a>!wget         # 执行最近的以wget开头的命令
</span><span id="__span-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a>!wget p       # 仅打印最近的以wget开头的命令，不执行
</span><span id="__span-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a>!$            # 上一条命令的最后一个参数， 与 Alt - . 和 $_ 相同
</span><span id="__span-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a>!*            # 上一条命令的所有参数
</span><span id="__span-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a>!* p          # 打印上一条命令是所有参数，也即 !*的内容
</span><span id="__span-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a>^abc          # 删除上一条命令中的abc
</span><span id="__span-8-49"><a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>^foo^bar      # 将上一条命令中的 foo 替换为 bar
</span><span id="__span-8-50"><a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a>^foo^bar^     # 将上一条命令中的 foo 替换为 bar
</span><span id="__span-8-51"><a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a>!-n           # 执行前n条命令，执行上一条命令      !-1， 执行前5条命令的格式是!-5
</span><span id="__span-8-52"><a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a>
</span><span id="__span-8-53"><a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="gh"># 查找历史命令</span>
</span><span id="__span-8-54"><a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>Ctrl – r      # 搜索历史命令，输入后显示历史命令中一条匹配命令，Enter键执行匹配命令；ESC键在命令行显示而不执行匹配命令
</span><span id="__span-8-55"><a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a>Ctrl – g      # 从历史搜索模式（Ctrl – r）退出
</span><span id="__span-8-56"><a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a>Ctrl – p      # 显示当前命令的上一条历史命令
</span><span id="__span-8-57"><a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a>Ctrl – n      # 显示当前命令的下一条历史命令
</span><span id="__span-8-58"><a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a>
</span><span id="__span-8-59"><a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a><span class="gh"># 重复执行操作动作</span>
</span><span id="__span-8-60"><a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a>M – 操作次数 操作动作   # 指定操作次数，重复执行指定的操作
</span></code></pre></div>
<h2 id="ubuntu-desktop">ubuntu Desktop相关设置<a class="headerlink" href="#ubuntu-desktop" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>xdotool<span class="w"> </span>mouseup<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1"># 挂起后进入系统输入,然后注销重新登录</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>gsettings<span class="w"> </span><span class="nb">set</span><span class="w"> </span>com.canonical.unity.launcher<span class="w"> </span>launcher-position<span class="w"> </span>bottom<span class="w"> </span><span class="c1"># 将ubuntu启动栏移动到最下方</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>gsettings<span class="w"> </span>get<span class="w"> </span>com.canonical.unity.launcher<span class="w"> </span>launcher-position<span class="w">    </span><span class="c1"># 得到启动栏位置</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c1"># 设置临时文件不再放置在硬盘加快速度，而放在虚拟RAM磁盘上。总内存必须大于4G</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>cp<span class="w"> </span>-v<span class="w"> </span>/usr/share/systemd/tmp.mount<span class="w"> </span>/etc/systemd/system/
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>tmp.mount
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>systemctl<span class="w"> </span>reload<span class="w"> </span>tmp.mount<span class="w"> </span><span class="c1"># 不生效可重启计算机。systemctl status tmp.mount检查状态</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="c1"># 取消tmpfs,删除后重启生效</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>rm<span class="w"> </span>-v<span class="w"> </span>/etc/systemd/system/tmp.mount
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="s"># 减少文件写入(当用于非服务器时)在/etc/fstab写入以下内容：</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="s">tmpfs    /tmp        tmpfs    defaults    0  0</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="s">tmpfs    /var/tmp    tmpfs    defaults    0  0</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="s">tmpfs    /var/log    tmpfs    defaults    0  0</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="s">comment</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="c1"># 自定义terminal位置和大小</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>cp<span class="w"> </span>/usr/share/applications/gnome-terminal.desktop<span class="w"> </span>~/.local/share/applications
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/^Exec=gnome-terminal$/&amp; --geometry=80x24+100+100/&#39;</span><span class="w"> </span>~/.local/share/applications/gnome-terminal.desktop
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>gsettings<span class="w"> </span><span class="nb">set</span><span class="w"> </span>org.gnome.desktop.default-applications.terminal<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="s1">&#39;gnome-terminal --geometry=80x24+100+100&#39;</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="c1"># 删除自定义</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>rm<span class="w"> </span>~/.local/share/applications/gnome-terminal.desktop
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>gsettings<span class="w"> </span><span class="nb">set</span><span class="w"> </span>org.gnome.desktop.default-applications.terminal<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="s1">&#39;gnome-terminal&#39;</span>
</span></code></pre></div>
<h2 id="bash">BASH环境变量的设置方法<a class="headerlink" href="#bash" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># 方法一：修改用户主目录下的.profile或.bashrc文件(推荐)，在文件末尾加入PATH的设置如下：该方式添加的变量只对当前用户有效</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:your path1:your path2&quot;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1"># 方法二：修改编辑系统目录下的profile文件(谨慎)：在最后加入PATH的设置如下：该方式添加的变量对所有的用户都有效</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:your path1:your path2&quot;</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="c1"># 方法三：修改系统目录下的 environment 文件的PATH变量(谨慎),各个path之间冒号分割，影响所有用户</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="c1"># 方法四：直接在终端下输入,这种方式变量立即生效，但用户注销或系统重启后设置变成无效，适合临时变量的设置</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:your path1:your path2&quot;</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="c1"># 保存后执行source命令生效</span>
</span></code></pre></div>
<h2 id="linuxjava">Linux安装设置java环境<a class="headerlink" href="#linuxjava" title="Permanent link">&para;</a></h2>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="gh"># 在CentOS7安装Oracle Java JDK8</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>rpm -qa | grep -E &#39;^open[jre|jdk]|j[re|dk]&#39;    # 查找已安装的jdk组件
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>yum remove java-$Version   # 卸载之前已安装的jdk
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="gh"># 在/usr目录创建java文件夹，下载jdk包http://www.oracle.com/technetwork/java/javase/downloads/index.html</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>mkdir /usr/java
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>wget http://download.oracle.com/otn-pub/java/jdk/8u161-b12/...tar.gz
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>tar -zxvf jdk..
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="gh"># 编辑.bashrc文件，在export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL下面添加如下代码：</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>export JAVA_HOME=/usr/java/jdk-$version
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>export PATH=$JAVA_HOME/bin:$PATH
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="gh"># 配置生效并验证</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>source .bashrc &amp;&amp; java -version
</span></code></pre></div>
<h2 id="ssh">SSH相关命令和配置<a class="headerlink" href="#ssh" title="Permanent link">&para;</a></h2>
<h3 id="ssh_1">ssh基本加固建议<a class="headerlink" href="#ssh_1" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>使用非密码登陆方式如密钥对，请忽略此项。在 /etc/login.defs 中将 PASS_MAX_DAYS 参数设置为 60-180之间
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>如 PASS_MAX_DAYS 90。需同时执行命令设置root密码失效时间： chage --maxdays 90 root
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>在 /etc/login.defs 中将 PASS_MIN_DAYS 参数设置为7-14之间,建议为7： PASS_MIN_DAYS 7 需同时执行命令
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>为root用户设置： chage --mindays 7 root
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>编辑/etc/security/pwquality.conf，把minlen（密码最小长度）设置为9-32位，把minclass（至少包含小写字母、
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>大写字母、数字、特殊字符等4类字符中等3类或4类）设置为3或4。如： minlen=10 minclass=3
</span></code></pre></div>
<h3 id="sedssh">sed命令更改默认ssh连接端口<a class="headerlink" href="#sedssh" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>iptables<span class="w"> </span>-I<span class="w"> </span>INPUT<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">22</span><span class="w"> </span>-j<span class="w"> </span>ACCEPT<span class="w"> </span><span class="c1"># iptables开放22端口</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT/d&quot;</span><span class="w"> </span>/etc/sysconfig/iptables
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>iptables<span class="w"> </span>save
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>service<span class="w"> </span>iptables<span class="w"> </span>restart
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/#Port 22/Port 2121/&#39;</span><span class="w"> </span>/etc/ssh/sshd_config<span class="w">     </span><span class="c1"># 修改sshd_config文件，将#Port 22直接替换成Port 2121</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/g&#39;</span><span class="w"> </span>/etc/ssh/sshd_config<span class="w">   </span><span class="c1"># 允许root用户远程ssh登录</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/PasswordAuthentication no/PasswordAuthentication yes/g&#39;</span><span class="w"> </span>/etc/ssh/sshd_config<span class="w"> </span><span class="c1"># 允许使用密码连接ssh服务</span>
</span></code></pre></div>
<h3 id="sshd_configetcsshsshd_config">sshd_config配置详解（/etc/ssh/sshd_config）<a class="headerlink" href="#sshd_configetcsshsshd_config" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="gh"># The strategy used for options in the default sshd_config shipped with</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="gh"># OpenSSH is to specify options with their default value where</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="gh"># possible, but leave them commented.  Uncommented options override the</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="gh"># default value</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="gh">#</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="gh"># AddressFamily指定sshd应当使用哪种地址族。取值范围是：&quot;any&quot;(默认)、&quot;inet&quot;(仅IPv4)、&quot;inet6&quot;(仅IPv6)</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="gh">#AddressFamily any</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="gh"># 指定sshd监听的网络地址，默认监听所有地址。可以使用下面的格式：</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="gh"># ListenAddress host|IPv4_addr|IPv6_addr</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="gh"># ListenAddress host|IPv4_addr:port</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="gh"># ListenAddress [host|IPv6_addr]:port</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="gh"># 如果未指定 port ，那么将使用 Port 指令的值</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="gh"># 可以使用多个 ListenAddress 指令监听多个地址</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="gh">#ListenAddress 0.0.0.0</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="gh">#ListenAddress ::</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="gh"># HostKey</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="gh"># 主机私钥文件的位置。如果权限不对，sshd可能会拒绝启动</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="gh"># SSH-1默认是 /etc/ssh/ssh_host_key</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="gh"># SSH-2默认是 /etc/ssh/ssh_host_rsa_key 和 /etc/ssh/ssh_host_dsa_key</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="gh"># 一台主机可以拥有多个不同的私钥。&quot;rsa1&quot;仅用于SSH-1，&quot;dsa&quot;和&quot;rsa&quot;仅用于SSH-2</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="gh">#HostKey /etc/ssh/ssh_host_rsa_key</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="gh">#HostKey /etc/ssh/ssh_host_ecdsa_key</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="gh">#HostKey /etc/ssh/ssh_host_ed25519_key</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="gh"># 指定SSH-2允许使用的加密算法。多个算法之间使用逗号分隔。可以使用的算法如下：</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="gh"># &quot;aes128-cbc&quot;, &quot;aes192-cbc&quot;, &quot;aes256-cbc&quot;, &quot;aes128-ctr&quot;, &quot;aes192-ctr&quot;, &quot;aes256-ctr&quot;,</span>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="gh"># &quot;3des-cbc&quot;, &quot;arcfour128&quot;, &quot;arcfour256&quot;, &quot;arcfour&quot;, &quot;blowfish-cbc&quot;, &quot;cast128-cbc&quot;</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="gh"># 默认值是可以使用上述所有算法</span>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="gh"># Ciphers and keying</span>
</span><span id="__span-14-33"><a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="gh">#RekeyLimit default none</span>
</span><span id="__span-14-34"><a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a>
</span><span id="__span-14-35"><a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="gh"># 指定sshd将日志消息通过哪个日志子系统(facility)发送。有效值是：DAEMON, USER, AUTH(默认), LOCAL0, LOCAL1, LOCAL2, LOCAL3,</span>
</span><span id="__span-14-36"><a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="gh"># LOCAL4, LOCAL5, LOCAL6, LOCAL7</span>
</span><span id="__span-14-37"><a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="gh"># Logging</span>
</span><span id="__span-14-38"><a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="gh">#SyslogFacility AUTH</span>
</span><span id="__span-14-39"><a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a>
</span><span id="__span-14-40"><a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="gh"># 指定 sshd(8) 的日志等级(详细程度)。可用值如下：</span>
</span><span id="__span-14-41"><a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="gh"># QUIET, FATAL, ERROR, INFO(默认), VERBOSE, DEBUG, DEBUG1, DEBUG2, DEBUG3</span>
</span><span id="__span-14-42"><a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="gh"># DEBUG 与 DEBUG1 等价；DEBUG2 和 DEBUG3 则分别指定了更详细、更罗嗦的日志输出</span>
</span><span id="__span-14-43"><a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="gh"># 比 DEBUG 更详细的日志可能会泄漏用户的敏感信息，因此反对使用</span>
</span><span id="__span-14-44"><a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="gh">#LogLevel INFO</span>
</span><span id="__span-14-45"><a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a>
</span><span id="__span-14-46"><a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="gh"># Authentication:</span>
</span><span id="__span-14-47"><a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a>
</span><span id="__span-14-48"><a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a><span class="gh"># 限制用户必须在指定的时限内认证成功，0 表示无限制。默认值是 120 秒</span>
</span><span id="__span-14-49"><a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="gh">#LoginGraceTime 2m</span>
</span><span id="__span-14-50"><a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a>
</span><span id="__span-14-51"><a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a><span class="gh"># 是否允许 root 登录。可用值如下：</span>
</span><span id="__span-14-52"><a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a><span class="gh"># &quot;yes&quot;(默认) 表示允许。&quot;no&quot;表示禁止</span>
</span><span id="__span-14-53"><a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a><span class="gh"># &quot;without-password&quot;表示禁止使用密码认证登录</span>
</span><span id="__span-14-54"><a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a><span class="gh"># &quot;forced-commands-only&quot;表示只有在指定了command选项时才允许使用公钥认证登录。同时其它认证方法全部被禁止。该值常用于做远程备份之类的事情</span>
</span><span id="__span-14-55"><a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="gh">#PermitRootLogin prohibit-password</span>
</span><span id="__span-14-56"><a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a>
</span><span id="__span-14-57"><a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a><span class="gh"># 指定是否要求sshd在接受连接请求前对用户主目录和相关的配置文件进行宿主和权限检查。强烈建议使用默认值&quot;yes&quot;来预防可能出现的低级错误</span>
</span><span id="__span-14-58"><a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a><span class="gh">#StrictModes yes</span>
</span><span id="__span-14-59"><a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a>
</span><span id="__span-14-60"><a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a><span class="gh"># 指定每个连接最大允许的认证次数。默认值是 6</span>
</span><span id="__span-14-61"><a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a><span class="gh"># 如果失败认证的次数超过这个数值的一半，连接将被强制断开，且会生成额外的失败日志消息</span>
</span><span id="__span-14-62"><a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a><span class="gh">#MaxAuthTries 6</span>
</span><span id="__span-14-63"><a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a>
</span><span id="__span-14-64"><a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a><span class="gh">#MaxSessions 10</span>
</span><span id="__span-14-65"><a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a>
</span><span id="__span-14-66"><a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a><span class="gh"># 是否允许公钥认证。仅可以用于SSH-2。默认值为&quot;yes&quot;</span>
</span><span id="__span-14-67"><a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a><span class="gh">#PubkeyAuthentication yes</span>
</span><span id="__span-14-68"><a id="__codelineno-14-68" name="__codelineno-14-68" href="#__codelineno-14-68"></a>
</span><span id="__span-14-69"><a id="__codelineno-14-69" name="__codelineno-14-69" href="#__codelineno-14-69"></a>######################################################################################################################
</span><span id="__span-14-70"><a id="__codelineno-14-70" name="__codelineno-14-70" href="#__codelineno-14-70"></a>
</span><span id="__span-14-71"><a id="__codelineno-14-71" name="__codelineno-14-71" href="#__codelineno-14-71"></a><span class="gh"># 存放该用户可以用来登录的 RSA/DSA 公钥</span>
</span><span id="__span-14-72"><a id="__codelineno-14-72" name="__codelineno-14-72" href="#__codelineno-14-72"></a><span class="gh"># 该指令中可以使用下列根据连接时的实际情况进行展开的符号：</span>
</span><span id="__span-14-73"><a id="__codelineno-14-73" name="__codelineno-14-73" href="#__codelineno-14-73"></a><span class="gh"># %% 表示&#39;%&#39;、%h 表示用户的主目录、%u 表示该用户的用户名</span>
</span><span id="__span-14-74"><a id="__codelineno-14-74" name="__codelineno-14-74" href="#__codelineno-14-74"></a><span class="gh"># 经过扩展之后的值必须要么是绝对路径，要么是相对于用户主目录的相对路径</span>
</span><span id="__span-14-75"><a id="__codelineno-14-75" name="__codelineno-14-75" href="#__codelineno-14-75"></a><span class="gh"># 默认值是&quot;.ssh/authorized_keys&quot;</span>
</span><span id="__span-14-76"><a id="__codelineno-14-76" name="__codelineno-14-76" href="#__codelineno-14-76"></a><span class="gh"># Expect .ssh/authorized_keys2 to be disregarded by default in future</span>
</span><span id="__span-14-77"><a id="__codelineno-14-77" name="__codelineno-14-77" href="#__codelineno-14-77"></a><span class="gh">#AuthorizedKeysFile .ssh/authorized_keys .ssh/authorized_keys2</span>
</span><span id="__span-14-78"><a id="__codelineno-14-78" name="__codelineno-14-78" href="#__codelineno-14-78"></a>
</span><span id="__span-14-79"><a id="__codelineno-14-79" name="__codelineno-14-79" href="#__codelineno-14-79"></a>######################################################################################################################
</span><span id="__span-14-80"><a id="__codelineno-14-80" name="__codelineno-14-80" href="#__codelineno-14-80"></a>
</span><span id="__span-14-81"><a id="__codelineno-14-81" name="__codelineno-14-81" href="#__codelineno-14-81"></a><span class="gh">#AuthorizedPrincipalsFile none</span>
</span><span id="__span-14-82"><a id="__codelineno-14-82" name="__codelineno-14-82" href="#__codelineno-14-82"></a>
</span><span id="__span-14-83"><a id="__codelineno-14-83" name="__codelineno-14-83" href="#__codelineno-14-83"></a><span class="gh">#AuthorizedKeysCommand none</span>
</span><span id="__span-14-84"><a id="__codelineno-14-84" name="__codelineno-14-84" href="#__codelineno-14-84"></a><span class="gh">#AuthorizedKeysCommandUser nobody</span>
</span><span id="__span-14-85"><a id="__codelineno-14-85" name="__codelineno-14-85" href="#__codelineno-14-85"></a>
</span><span id="__span-14-86"><a id="__codelineno-14-86" name="__codelineno-14-86" href="#__codelineno-14-86"></a><span class="gh"># 是否使用强可信主机认证(通过检查远程主机名和关联的用户名进行认证)。仅用于SSH-1</span>
</span><span id="__span-14-87"><a id="__codelineno-14-87" name="__codelineno-14-87" href="#__codelineno-14-87"></a><span class="gh"># 这是通过在RSA认证成功后再检查 ~/.rhosts 或 /etc/hosts.equiv 进行认证的</span>
</span><span id="__span-14-88"><a id="__codelineno-14-88" name="__codelineno-14-88" href="#__codelineno-14-88"></a><span class="gh"># 出于安全考虑，建议使用默认值&quot;no&quot;</span>
</span><span id="__span-14-89"><a id="__codelineno-14-89" name="__codelineno-14-89" href="#__codelineno-14-89"></a><span class="gh">#RhostsRSAAuthentication</span>
</span><span id="__span-14-90"><a id="__codelineno-14-90" name="__codelineno-14-90" href="#__codelineno-14-90"></a>
</span><span id="__span-14-91"><a id="__codelineno-14-91" name="__codelineno-14-91" href="#__codelineno-14-91"></a><span class="gh"># 这个指令与 RhostsRSAAuthentication 类似，但是仅可以用于SSH-2。推荐使用默认值&quot;no&quot;</span>
</span><span id="__span-14-92"><a id="__codelineno-14-92" name="__codelineno-14-92" href="#__codelineno-14-92"></a><span class="gh"># 推荐使用默认值&quot;no&quot;禁止这种不安全的认证方式</span>
</span><span id="__span-14-93"><a id="__codelineno-14-93" name="__codelineno-14-93" href="#__codelineno-14-93"></a><span class="gh"># For this to work you will also need host keys in /etc/ssh/ssh_known_hosts</span>
</span><span id="__span-14-94"><a id="__codelineno-14-94" name="__codelineno-14-94" href="#__codelineno-14-94"></a><span class="gh">#HostbasedAuthentication no</span>
</span><span id="__span-14-95"><a id="__codelineno-14-95" name="__codelineno-14-95" href="#__codelineno-14-95"></a>
</span><span id="__span-14-96"><a id="__codelineno-14-96" name="__codelineno-14-96" href="#__codelineno-14-96"></a><span class="gh">#HostbasedUsesNameFromPacketOnly</span>
</span><span id="__span-14-97"><a id="__codelineno-14-97" name="__codelineno-14-97" href="#__codelineno-14-97"></a><span class="gh"># 在开启 HostbasedAuthentication 的情况下</span>
</span><span id="__span-14-98"><a id="__codelineno-14-98" name="__codelineno-14-98" href="#__codelineno-14-98"></a><span class="gh"># 指定服务器在使用 ~/.shosts ~/.rhosts /etc/hosts.equiv 进行远程主机名匹配时，是否进行反向域名查询</span>
</span><span id="__span-14-99"><a id="__codelineno-14-99" name="__codelineno-14-99" href="#__codelineno-14-99"></a><span class="gh"># &quot;yes&quot;表示sshd信任客户端提供的主机名而不进行反向查询。默认值是&quot;no&quot;</span>
</span><span id="__span-14-100"><a id="__codelineno-14-100" name="__codelineno-14-100" href="#__codelineno-14-100"></a>
</span><span id="__span-14-101"><a id="__codelineno-14-101" name="__codelineno-14-101" href="#__codelineno-14-101"></a><span class="gh"># 是否在 RhostsRSAAuthentication 或 HostbasedAuthentication 过程中忽略用户的 ~/.ssh/known_hosts 文件</span>
</span><span id="__span-14-102"><a id="__codelineno-14-102" name="__codelineno-14-102" href="#__codelineno-14-102"></a><span class="gh"># 默认值是&quot;no&quot;。为了提高安全性，可以设为&quot;yes&quot;</span>
</span><span id="__span-14-103"><a id="__codelineno-14-103" name="__codelineno-14-103" href="#__codelineno-14-103"></a><span class="gh"># Change to yes if you don&#39;t trust ~/.ssh/known_hosts for</span>
</span><span id="__span-14-104"><a id="__codelineno-14-104" name="__codelineno-14-104" href="#__codelineno-14-104"></a><span class="gh"># HostbasedAuthentication</span>
</span><span id="__span-14-105"><a id="__codelineno-14-105" name="__codelineno-14-105" href="#__codelineno-14-105"></a><span class="gh">#IgnoreUserKnownHosts no</span>
</span><span id="__span-14-106"><a id="__codelineno-14-106" name="__codelineno-14-106" href="#__codelineno-14-106"></a>
</span><span id="__span-14-107"><a id="__codelineno-14-107" name="__codelineno-14-107" href="#__codelineno-14-107"></a><span class="gh"># 是否在 RhostsRSAAuthentication 或 HostbasedAuthentication 过程中忽略 .rhosts 和 .shosts 文件</span>
</span><span id="__span-14-108"><a id="__codelineno-14-108" name="__codelineno-14-108" href="#__codelineno-14-108"></a><span class="gh"># 不过 /etc/hosts.equiv 和 /etc/shosts.equiv 仍将被使用。推荐设为默认值&quot;yes&quot;</span>
</span><span id="__span-14-109"><a id="__codelineno-14-109" name="__codelineno-14-109" href="#__codelineno-14-109"></a><span class="gh"># Don&#39;t read the user&#39;s ~/.rhosts and ~/.shosts files</span>
</span><span id="__span-14-110"><a id="__codelineno-14-110" name="__codelineno-14-110" href="#__codelineno-14-110"></a><span class="gh">#IgnoreRhosts yes</span>
</span><span id="__span-14-111"><a id="__codelineno-14-111" name="__codelineno-14-111" href="#__codelineno-14-111"></a>
</span><span id="__span-14-112"><a id="__codelineno-14-112" name="__codelineno-14-112" href="#__codelineno-14-112"></a>
</span><span id="__span-14-113"><a id="__codelineno-14-113" name="__codelineno-14-113" href="#__codelineno-14-113"></a><span class="gh"># To disable tunneled clear text passwords, change to no here!</span>
</span><span id="__span-14-114"><a id="__codelineno-14-114" name="__codelineno-14-114" href="#__codelineno-14-114"></a>
</span><span id="__span-14-115"><a id="__codelineno-14-115" name="__codelineno-14-115" href="#__codelineno-14-115"></a><span class="gh"># 是否允许使用基于密码的认证。默认为&quot;yes&quot;</span>
</span><span id="__span-14-116"><a id="__codelineno-14-116" name="__codelineno-14-116" href="#__codelineno-14-116"></a><span class="gh">#PasswordAuthentication yes</span>
</span><span id="__span-14-117"><a id="__codelineno-14-117" name="__codelineno-14-117" href="#__codelineno-14-117"></a>
</span><span id="__span-14-118"><a id="__codelineno-14-118" name="__codelineno-14-118" href="#__codelineno-14-118"></a><span class="gh"># 是否允许密码为空的用户远程登录。默认为&quot;no&quot;</span>
</span><span id="__span-14-119"><a id="__codelineno-14-119" name="__codelineno-14-119" href="#__codelineno-14-119"></a><span class="gh">#PermitEmptyPasswords no</span>
</span><span id="__span-14-120"><a id="__codelineno-14-120" name="__codelineno-14-120" href="#__codelineno-14-120"></a>
</span><span id="__span-14-121"><a id="__codelineno-14-121" name="__codelineno-14-121" href="#__codelineno-14-121"></a><span class="gh"># 是否允许质疑-应答(challenge-response)认证。默认值是&quot;yes&quot;</span>
</span><span id="__span-14-122"><a id="__codelineno-14-122" name="__codelineno-14-122" href="#__codelineno-14-122"></a><span class="gh"># 所有 login.conf(5) 中允许的认证方式都被支持</span>
</span><span id="__span-14-123"><a id="__codelineno-14-123" name="__codelineno-14-123" href="#__codelineno-14-123"></a><span class="gh"># Change to yes to enable challenge-response passwords (beware issues with</span>
</span><span id="__span-14-124"><a id="__codelineno-14-124" name="__codelineno-14-124" href="#__codelineno-14-124"></a><span class="gh"># some PAM modules and threads)</span>
</span><span id="__span-14-125"><a id="__codelineno-14-125" name="__codelineno-14-125" href="#__codelineno-14-125"></a>ChallengeResponseAuthentication no
</span><span id="__span-14-126"><a id="__codelineno-14-126" name="__codelineno-14-126" href="#__codelineno-14-126"></a>
</span><span id="__span-14-127"><a id="__codelineno-14-127" name="__codelineno-14-127" href="#__codelineno-14-127"></a><span class="gh"># Kerberos options</span>
</span><span id="__span-14-128"><a id="__codelineno-14-128" name="__codelineno-14-128" href="#__codelineno-14-128"></a>
</span><span id="__span-14-129"><a id="__codelineno-14-129" name="__codelineno-14-129" href="#__codelineno-14-129"></a><span class="gh"># 是否要求用户为 PasswordAuthentication 提供的密码必须通过 Kerberos KDC 认证，也就是是否使用Kerberos认证</span>
</span><span id="__span-14-130"><a id="__codelineno-14-130" name="__codelineno-14-130" href="#__codelineno-14-130"></a><span class="gh"># 要使用Kerberos认证，服务器需要一个可以校验 KDC identity 的 Kerberos servtab 。默认值是&quot;no&quot;</span>
</span><span id="__span-14-131"><a id="__codelineno-14-131" name="__codelineno-14-131" href="#__codelineno-14-131"></a><span class="gh">#KerberosAuthentication no</span>
</span><span id="__span-14-132"><a id="__codelineno-14-132" name="__codelineno-14-132" href="#__codelineno-14-132"></a>
</span><span id="__span-14-133"><a id="__codelineno-14-133" name="__codelineno-14-133" href="#__codelineno-14-133"></a><span class="gh"># 如果 Kerberos 密码认证失败，那么该密码还将要通过其它的认证机制(比如 /etc/passwd)</span>
</span><span id="__span-14-134"><a id="__codelineno-14-134" name="__codelineno-14-134" href="#__codelineno-14-134"></a><span class="gh"># 默认值为&quot;yes&quot;</span>
</span><span id="__span-14-135"><a id="__codelineno-14-135" name="__codelineno-14-135" href="#__codelineno-14-135"></a><span class="gh">#KerberosOrLocalPasswd yes</span>
</span><span id="__span-14-136"><a id="__codelineno-14-136" name="__codelineno-14-136" href="#__codelineno-14-136"></a>
</span><span id="__span-14-137"><a id="__codelineno-14-137" name="__codelineno-14-137" href="#__codelineno-14-137"></a><span class="gh"># 是否在用户退出登录后自动销毁用户的 ticket 。默认值是&quot;yes&quot;</span>
</span><span id="__span-14-138"><a id="__codelineno-14-138" name="__codelineno-14-138" href="#__codelineno-14-138"></a><span class="gh">#KerberosTicketCleanup yes</span>
</span><span id="__span-14-139"><a id="__codelineno-14-139" name="__codelineno-14-139" href="#__codelineno-14-139"></a>
</span><span id="__span-14-140"><a id="__codelineno-14-140" name="__codelineno-14-140" href="#__codelineno-14-140"></a><span class="gh"># 如果使用了 AFS 并且该用户有一个 Kerberos 5 TGT，那么开启该指令后</span>
</span><span id="__span-14-141"><a id="__codelineno-14-141" name="__codelineno-14-141" href="#__codelineno-14-141"></a><span class="gh"># 将会在访问用户的家目录前尝试获取一个 AFS token 。默认为&quot;no&quot;</span>
</span><span id="__span-14-142"><a id="__codelineno-14-142" name="__codelineno-14-142" href="#__codelineno-14-142"></a><span class="gh">#KerberosGetAFSToken no</span>
</span><span id="__span-14-143"><a id="__codelineno-14-143" name="__codelineno-14-143" href="#__codelineno-14-143"></a>
</span><span id="__span-14-144"><a id="__codelineno-14-144" name="__codelineno-14-144" href="#__codelineno-14-144"></a><span class="gh"># GSSAPI options</span>
</span><span id="__span-14-145"><a id="__codelineno-14-145" name="__codelineno-14-145" href="#__codelineno-14-145"></a>
</span><span id="__span-14-146"><a id="__codelineno-14-146" name="__codelineno-14-146" href="#__codelineno-14-146"></a><span class="gh"># 是否允许使用基于 GSSAPI 的用户认证。默认值为&quot;no&quot;。仅用于SSH-2</span>
</span><span id="__span-14-147"><a id="__codelineno-14-147" name="__codelineno-14-147" href="#__codelineno-14-147"></a><span class="gh">#GSSAPIAuthentication no</span>
</span><span id="__span-14-148"><a id="__codelineno-14-148" name="__codelineno-14-148" href="#__codelineno-14-148"></a>
</span><span id="__span-14-149"><a id="__codelineno-14-149" name="__codelineno-14-149" href="#__codelineno-14-149"></a><span class="gh"># 是否在用户退出登录后自动销毁用户凭证缓存。默认值是&quot;yes&quot;。仅用于SSH-2</span>
</span><span id="__span-14-150"><a id="__codelineno-14-150" name="__codelineno-14-150" href="#__codelineno-14-150"></a><span class="gh">#GSSAPICleanupCredentials yes</span>
</span><span id="__span-14-151"><a id="__codelineno-14-151" name="__codelineno-14-151" href="#__codelineno-14-151"></a>
</span><span id="__span-14-152"><a id="__codelineno-14-152" name="__codelineno-14-152" href="#__codelineno-14-152"></a>
</span><span id="__span-14-153"><a id="__codelineno-14-153" name="__codelineno-14-153" href="#__codelineno-14-153"></a><span class="gh">#GSSAPIStrictAcceptorCheck yes</span>
</span><span id="__span-14-154"><a id="__codelineno-14-154" name="__codelineno-14-154" href="#__codelineno-14-154"></a><span class="gh">#GSSAPIKeyExchange no</span>
</span><span id="__span-14-155"><a id="__codelineno-14-155" name="__codelineno-14-155" href="#__codelineno-14-155"></a>
</span><span id="__span-14-156"><a id="__codelineno-14-156" name="__codelineno-14-156" href="#__codelineno-14-156"></a><span class="gh"># Set this to &#39;yes&#39; to enable PAM authentication, account processing,</span>
</span><span id="__span-14-157"><a id="__codelineno-14-157" name="__codelineno-14-157" href="#__codelineno-14-157"></a><span class="gh"># and session processing. If this is enabled, PAM authentication will</span>
</span><span id="__span-14-158"><a id="__codelineno-14-158" name="__codelineno-14-158" href="#__codelineno-14-158"></a><span class="gh"># be allowed through the ChallengeResponseAuthentication and</span>
</span><span id="__span-14-159"><a id="__codelineno-14-159" name="__codelineno-14-159" href="#__codelineno-14-159"></a><span class="gh"># PasswordAuthentication.  Depending on your PAM configuration,</span>
</span><span id="__span-14-160"><a id="__codelineno-14-160" name="__codelineno-14-160" href="#__codelineno-14-160"></a><span class="gh"># PAM authentication via ChallengeResponseAuthentication may bypass</span>
</span><span id="__span-14-161"><a id="__codelineno-14-161" name="__codelineno-14-161" href="#__codelineno-14-161"></a><span class="gh"># the setting of &quot;PermitRootLogin without-password&quot;</span>
</span><span id="__span-14-162"><a id="__codelineno-14-162" name="__codelineno-14-162" href="#__codelineno-14-162"></a><span class="gh"># If you just want the PAM account and session checks to run without</span>
</span><span id="__span-14-163"><a id="__codelineno-14-163" name="__codelineno-14-163" href="#__codelineno-14-163"></a><span class="gh"># PAM authentication, then enable this but set PasswordAuthentication</span>
</span><span id="__span-14-164"><a id="__codelineno-14-164" name="__codelineno-14-164" href="#__codelineno-14-164"></a><span class="gh"># and ChallengeResponseAuthentication to &#39;no&#39;</span>
</span><span id="__span-14-165"><a id="__codelineno-14-165" name="__codelineno-14-165" href="#__codelineno-14-165"></a>UsePAM yes
</span><span id="__span-14-166"><a id="__codelineno-14-166" name="__codelineno-14-166" href="#__codelineno-14-166"></a>
</span><span id="__span-14-167"><a id="__codelineno-14-167" name="__codelineno-14-167" href="#__codelineno-14-167"></a><span class="gh">#AllowAgentForwarding yes</span>
</span><span id="__span-14-168"><a id="__codelineno-14-168" name="__codelineno-14-168" href="#__codelineno-14-168"></a>
</span><span id="__span-14-169"><a id="__codelineno-14-169" name="__codelineno-14-169" href="#__codelineno-14-169"></a><span class="gh"># 是否允许TCP转发，默认值为&quot;yes&quot;</span>
</span><span id="__span-14-170"><a id="__codelineno-14-170" name="__codelineno-14-170" href="#__codelineno-14-170"></a><span class="gh"># 禁止TCP转发并不能增强安全性，除非禁止了用户对shell的访问，因为用户可以安装他们自己的转发器</span>
</span><span id="__span-14-171"><a id="__codelineno-14-171" name="__codelineno-14-171" href="#__codelineno-14-171"></a>AllowTcpForwarding yes
</span><span id="__span-14-172"><a id="__codelineno-14-172" name="__codelineno-14-172" href="#__codelineno-14-172"></a>
</span><span id="__span-14-173"><a id="__codelineno-14-173" name="__codelineno-14-173" href="#__codelineno-14-173"></a>######################################################################################################################
</span><span id="__span-14-174"><a id="__codelineno-14-174" name="__codelineno-14-174" href="#__codelineno-14-174"></a>
</span><span id="__span-14-175"><a id="__codelineno-14-175" name="__codelineno-14-175" href="#__codelineno-14-175"></a><span class="gh"># 是否允许远程主机连接本地的转发端口。默认值是&quot;no&quot;</span>
</span><span id="__span-14-176"><a id="__codelineno-14-176" name="__codelineno-14-176" href="#__codelineno-14-176"></a><span class="gh"># sshd(8) 默认将远程端口转发绑定到loopback地址。这样将阻止其它远程主机连接到转发端口</span>
</span><span id="__span-14-177"><a id="__codelineno-14-177" name="__codelineno-14-177" href="#__codelineno-14-177"></a><span class="gh"># GatewayPorts 指令可以让 sshd 将远程端口转发绑定到非loopback地址，这样就可以允许远程主机连接了</span>
</span><span id="__span-14-178"><a id="__codelineno-14-178" name="__codelineno-14-178" href="#__codelineno-14-178"></a><span class="gh"># &quot;no&quot;表示仅允许本地连接，&quot;yes&quot;表示强制将远程端口转发绑定到统配地址(wildcard address)</span>
</span><span id="__span-14-179"><a id="__codelineno-14-179" name="__codelineno-14-179" href="#__codelineno-14-179"></a><span class="gh"># &quot;clientspecified&quot;表示允许客户端选择将远程端口转发绑定到哪个地址</span>
</span><span id="__span-14-180"><a id="__codelineno-14-180" name="__codelineno-14-180" href="#__codelineno-14-180"></a>GatewayPorts yes
</span><span id="__span-14-181"><a id="__codelineno-14-181" name="__codelineno-14-181" href="#__codelineno-14-181"></a>
</span><span id="__span-14-182"><a id="__codelineno-14-182" name="__codelineno-14-182" href="#__codelineno-14-182"></a>######################################################################################################################
</span><span id="__span-14-183"><a id="__codelineno-14-183" name="__codelineno-14-183" href="#__codelineno-14-183"></a>
</span><span id="__span-14-184"><a id="__codelineno-14-184" name="__codelineno-14-184" href="#__codelineno-14-184"></a><span class="gh"># 是否允许进行 X11 转发。默认值是&quot;no&quot;，设为&quot;yes&quot;表示允许</span>
</span><span id="__span-14-185"><a id="__codelineno-14-185" name="__codelineno-14-185" href="#__codelineno-14-185"></a><span class="gh"># 如果允许X11转发并且sshd(8)代理的显示区被配置为在含有通配符的地址(X11UseLocalhost)上监听</span>
</span><span id="__span-14-186"><a id="__codelineno-14-186" name="__codelineno-14-186" href="#__codelineno-14-186"></a><span class="gh"># 那么将可能有额外的信息被泄漏。由于使用X11转发的可能带来的风险，此指令默认值为&quot;no&quot;</span>
</span><span id="__span-14-187"><a id="__codelineno-14-187" name="__codelineno-14-187" href="#__codelineno-14-187"></a><span class="gh"># 需要注意的是，禁止X11转发并不能禁止用户转发X11通信，因为用户可以安装他们自己的转发器</span>
</span><span id="__span-14-188"><a id="__codelineno-14-188" name="__codelineno-14-188" href="#__codelineno-14-188"></a><span class="gh"># 如果启用了 UseLogin ，那么X11转发将被自动禁止</span>
</span><span id="__span-14-189"><a id="__codelineno-14-189" name="__codelineno-14-189" href="#__codelineno-14-189"></a>X11Forwarding yes
</span><span id="__span-14-190"><a id="__codelineno-14-190" name="__codelineno-14-190" href="#__codelineno-14-190"></a>
</span><span id="__span-14-191"><a id="__codelineno-14-191" name="__codelineno-14-191" href="#__codelineno-14-191"></a><span class="gh"># 指定sshdX11 转发的第一个可用的显示区(display)数字。默认值是 10</span>
</span><span id="__span-14-192"><a id="__codelineno-14-192" name="__codelineno-14-192" href="#__codelineno-14-192"></a><span class="gh"># 这个可以用于防止 sshd 占用了真实的 X11 服务器显示区，从而发生混淆</span>
</span><span id="__span-14-193"><a id="__codelineno-14-193" name="__codelineno-14-193" href="#__codelineno-14-193"></a><span class="gh">#X11DisplayOffset 10</span>
</span><span id="__span-14-194"><a id="__codelineno-14-194" name="__codelineno-14-194" href="#__codelineno-14-194"></a>
</span><span id="__span-14-195"><a id="__codelineno-14-195" name="__codelineno-14-195" href="#__codelineno-14-195"></a><span class="gh"># sshd是否应当将X11转发服务器绑定到本地loopback地址。默认值是&quot;yes&quot;</span>
</span><span id="__span-14-196"><a id="__codelineno-14-196" name="__codelineno-14-196" href="#__codelineno-14-196"></a><span class="gh"># sshd 默认将转发服务器绑定到本地loopback地址并将 DISPLAY 环境变量的主机名部分设为&quot;localhost&quot;</span>
</span><span id="__span-14-197"><a id="__codelineno-14-197" name="__codelineno-14-197" href="#__codelineno-14-197"></a><span class="gh"># 这可以防止远程主机连接到 proxy display 。不过某些老旧的X11客户端不能在此配置下正常工作</span>
</span><span id="__span-14-198"><a id="__codelineno-14-198" name="__codelineno-14-198" href="#__codelineno-14-198"></a><span class="gh"># 为了兼容这些老旧的X11客户端，你可以设为&quot;no&quot;</span>
</span><span id="__span-14-199"><a id="__codelineno-14-199" name="__codelineno-14-199" href="#__codelineno-14-199"></a><span class="gh">#X11UseLocalhost yes</span>
</span><span id="__span-14-200"><a id="__codelineno-14-200" name="__codelineno-14-200" href="#__codelineno-14-200"></a><span class="gh">#PermitTTY yes</span>
</span><span id="__span-14-201"><a id="__codelineno-14-201" name="__codelineno-14-201" href="#__codelineno-14-201"></a>
</span><span id="__span-14-202"><a id="__codelineno-14-202" name="__codelineno-14-202" href="#__codelineno-14-202"></a><span class="gh"># 指定sshd是否在每一次交互式登录时打印 /etc/motd 文件的内容。默认值是&quot;yes&quot;</span>
</span><span id="__span-14-203"><a id="__codelineno-14-203" name="__codelineno-14-203" href="#__codelineno-14-203"></a>PrintMotd no
</span><span id="__span-14-204"><a id="__codelineno-14-204" name="__codelineno-14-204" href="#__codelineno-14-204"></a>
</span><span id="__span-14-205"><a id="__codelineno-14-205" name="__codelineno-14-205" href="#__codelineno-14-205"></a><span class="gh"># 指定sshd是否在每一次交互式登录时打印最后一位用户的登录时间。默认值是&quot;yes&quot;</span>
</span><span id="__span-14-206"><a id="__codelineno-14-206" name="__codelineno-14-206" href="#__codelineno-14-206"></a><span class="gh">#PrintLastLog yes</span>
</span><span id="__span-14-207"><a id="__codelineno-14-207" name="__codelineno-14-207" href="#__codelineno-14-207"></a>
</span><span id="__span-14-208"><a id="__codelineno-14-208" name="__codelineno-14-208" href="#__codelineno-14-208"></a><span class="gh"># 指定系统是否向客户端发送TCPkeepalive消息。默认&quot;yes&quot;。消息可以检测到死连接、连接不当关闭、客户端崩溃等异常。可以设为&quot;no&quot;关闭这个特性</span>
</span><span id="__span-14-209"><a id="__codelineno-14-209" name="__codelineno-14-209" href="#__codelineno-14-209"></a><span class="gh">#TCPKeepAlive yes</span>
</span><span id="__span-14-210"><a id="__codelineno-14-210" name="__codelineno-14-210" href="#__codelineno-14-210"></a>
</span><span id="__span-14-211"><a id="__codelineno-14-211" name="__codelineno-14-211" href="#__codelineno-14-211"></a><span class="gh"># 是否在交互式会话的登录过程中使用 login(1) 。默认值是&quot;no&quot;</span>
</span><span id="__span-14-212"><a id="__codelineno-14-212" name="__codelineno-14-212" href="#__codelineno-14-212"></a><span class="gh"># 如果开启此指令，那么 X11Forwarding 将会被禁止，因为 login(1) 不知道如何处理 xauth(1) cookies</span>
</span><span id="__span-14-213"><a id="__codelineno-14-213" name="__codelineno-14-213" href="#__codelineno-14-213"></a><span class="gh"># 需要注意的是，login(1) 是禁止用于远程执行命令的</span>
</span><span id="__span-14-214"><a id="__codelineno-14-214" name="__codelineno-14-214" href="#__codelineno-14-214"></a><span class="gh"># 如果指定了 UsePrivilegeSeparation ，那么它将在认证完成后被禁用</span>
</span><span id="__span-14-215"><a id="__codelineno-14-215" name="__codelineno-14-215" href="#__codelineno-14-215"></a><span class="gh">#UseLogin no</span>
</span><span id="__span-14-216"><a id="__codelineno-14-216" name="__codelineno-14-216" href="#__codelineno-14-216"></a>
</span><span id="__span-14-217"><a id="__codelineno-14-217" name="__codelineno-14-217" href="#__codelineno-14-217"></a><span class="gh"># 是否让sshd通过创建非特权子进程处理接入请求的方法来进行权限分离。默认值是&quot;yes&quot;</span>
</span><span id="__span-14-218"><a id="__codelineno-14-218" name="__codelineno-14-218" href="#__codelineno-14-218"></a><span class="gh"># 认证成功后，将以该认证用户的身份创建另一个子进程,这样做的目的是为了防止通过有缺陷的子进程提升权限，从而使系统更加安全</span>
</span><span id="__span-14-219"><a id="__codelineno-14-219" name="__codelineno-14-219" href="#__codelineno-14-219"></a><span class="gh">#UsePrivilegeSeparation sandbox</span>
</span><span id="__span-14-220"><a id="__codelineno-14-220" name="__codelineno-14-220" href="#__codelineno-14-220"></a>
</span><span id="__span-14-221"><a id="__codelineno-14-221" name="__codelineno-14-221" href="#__codelineno-14-221"></a><span class="gh"># 指定是否允许 sshd(8) 处理 ~/.ssh/environment 以及 ~/.ssh/authorized_keys 中的 environment= 选项</span>
</span><span id="__span-14-222"><a id="__codelineno-14-222" name="__codelineno-14-222" href="#__codelineno-14-222"></a><span class="gh"># 默认值是&quot;no&quot;。如果设为&quot;yes&quot;可能会导致用户有机会使用某些机制(比如 LD_PRELOAD)绕过访问控制，造成安全漏洞</span>
</span><span id="__span-14-223"><a id="__codelineno-14-223" name="__codelineno-14-223" href="#__codelineno-14-223"></a><span class="gh">#PermitUserEnvironment no</span>
</span><span id="__span-14-224"><a id="__codelineno-14-224" name="__codelineno-14-224" href="#__codelineno-14-224"></a>
</span><span id="__span-14-225"><a id="__codelineno-14-225" name="__codelineno-14-225" href="#__codelineno-14-225"></a><span class="gh"># 是否对通信数据进行压缩，还是延迟到认证成功之后再对通信数据进行压缩</span>
</span><span id="__span-14-226"><a id="__codelineno-14-226" name="__codelineno-14-226" href="#__codelineno-14-226"></a><span class="gh"># 可用值：&quot;yes&quot;, &quot;delayed&quot;(默认), &quot;no&quot;</span>
</span><span id="__span-14-227"><a id="__codelineno-14-227" name="__codelineno-14-227" href="#__codelineno-14-227"></a><span class="gh">#Compression delayed</span>
</span><span id="__span-14-228"><a id="__codelineno-14-228" name="__codelineno-14-228" href="#__codelineno-14-228"></a>
</span><span id="__span-14-229"><a id="__codelineno-14-229" name="__codelineno-14-229" href="#__codelineno-14-229"></a>######################################################################################################################
</span><span id="__span-14-230"><a id="__codelineno-14-230" name="__codelineno-14-230" href="#__codelineno-14-230"></a>
</span><span id="__span-14-231"><a id="__codelineno-14-231" name="__codelineno-14-231" href="#__codelineno-14-231"></a><span class="gh"># 设置一个以秒记的时长，如果超过这么长时间没有收到客户端的任何数据</span>
</span><span id="__span-14-232"><a id="__codelineno-14-232" name="__codelineno-14-232" href="#__codelineno-14-232"></a><span class="gh"># sshd(8) 将通过安全通道向客户端发送一个&quot;alive&quot;消息，并等候应答</span>
</span><span id="__span-14-233"><a id="__codelineno-14-233" name="__codelineno-14-233" href="#__codelineno-14-233"></a><span class="gh"># 默认值 0 表示不发送&quot;alive&quot;消息。这个选项仅对SSH-2有效</span>
</span><span id="__span-14-234"><a id="__codelineno-14-234" name="__codelineno-14-234" href="#__codelineno-14-234"></a><span class="gh">#ClientAliveInterval 0</span>
</span><span id="__span-14-235"><a id="__codelineno-14-235" name="__codelineno-14-235" href="#__codelineno-14-235"></a>
</span><span id="__span-14-236"><a id="__codelineno-14-236" name="__codelineno-14-236" href="#__codelineno-14-236"></a>######################################################################################################################
</span><span id="__span-14-237"><a id="__codelineno-14-237" name="__codelineno-14-237" href="#__codelineno-14-237"></a>
</span><span id="__span-14-238"><a id="__codelineno-14-238" name="__codelineno-14-238" href="#__codelineno-14-238"></a><span class="gh"># sshd在未收到任何客户端回应前最多允许发送多少个&quot;alive&quot;消息。默认值是 3</span>
</span><span id="__span-14-239"><a id="__codelineno-14-239" name="__codelineno-14-239" href="#__codelineno-14-239"></a><span class="gh"># 到达这个上限后，sshd(8) 将强制断开连接、关闭会话</span>
</span><span id="__span-14-240"><a id="__codelineno-14-240" name="__codelineno-14-240" href="#__codelineno-14-240"></a><span class="gh"># 需要注意的是，&quot;alive&quot;消息与 TCPKeepAlive 有很大差异</span>
</span><span id="__span-14-241"><a id="__codelineno-14-241" name="__codelineno-14-241" href="#__codelineno-14-241"></a><span class="gh"># &quot;alive&quot;消息是通过加密连接发送的，因此不会被欺骗；而 TCPKeepAlive 却是可以被欺骗的</span>
</span><span id="__span-14-242"><a id="__codelineno-14-242" name="__codelineno-14-242" href="#__codelineno-14-242"></a><span class="gh"># 如果 ClientAliveInterval 被设为 15 并且将 ClientAliveCountMax 保持为默认值</span>
</span><span id="__span-14-243"><a id="__codelineno-14-243" name="__codelineno-14-243" href="#__codelineno-14-243"></a><span class="gh"># 那么无应答的客户端大约会在45秒后被强制断开。这个指令仅可以用于SSH-2协议</span>
</span><span id="__span-14-244"><a id="__codelineno-14-244" name="__codelineno-14-244" href="#__codelineno-14-244"></a><span class="gh">#ClientAliveCountMax 3</span>
</span><span id="__span-14-245"><a id="__codelineno-14-245" name="__codelineno-14-245" href="#__codelineno-14-245"></a>
</span><span id="__span-14-246"><a id="__codelineno-14-246" name="__codelineno-14-246" href="#__codelineno-14-246"></a>######################################################################################################################
</span><span id="__span-14-247"><a id="__codelineno-14-247" name="__codelineno-14-247" href="#__codelineno-14-247"></a>
</span><span id="__span-14-248"><a id="__codelineno-14-248" name="__codelineno-14-248" href="#__codelineno-14-248"></a><span class="gh"># 指定sshd是否应该对远程主机名进行反向解析，以检查此主机名是否与其IP地址真实对应。默认值为&quot;yes&quot;</span>
</span><span id="__span-14-249"><a id="__codelineno-14-249" name="__codelineno-14-249" href="#__codelineno-14-249"></a><span class="gh">#UseDNS no</span>
</span><span id="__span-14-250"><a id="__codelineno-14-250" name="__codelineno-14-250" href="#__codelineno-14-250"></a>
</span><span id="__span-14-251"><a id="__codelineno-14-251" name="__codelineno-14-251" href="#__codelineno-14-251"></a><span class="gh"># 指定在哪个文件中存放SSH守护进程的进程号，默认为 /var/run/sshd.pid 文件</span>
</span><span id="__span-14-252"><a id="__codelineno-14-252" name="__codelineno-14-252" href="#__codelineno-14-252"></a><span class="gh">#PidFile /var/run/sshd.pid</span>
</span><span id="__span-14-253"><a id="__codelineno-14-253" name="__codelineno-14-253" href="#__codelineno-14-253"></a>
</span><span id="__span-14-254"><a id="__codelineno-14-254" name="__codelineno-14-254" href="#__codelineno-14-254"></a><span class="gh"># 最大允许保持多少个未认证的连接。默认值是 10</span>
</span><span id="__span-14-255"><a id="__codelineno-14-255" name="__codelineno-14-255" href="#__codelineno-14-255"></a><span class="gh"># 到达限制后，将不再接受新连接，除非先前的连接认证成功或超出 LoginGraceTime 的限制</span>
</span><span id="__span-14-256"><a id="__codelineno-14-256" name="__codelineno-14-256" href="#__codelineno-14-256"></a><span class="gh">#MaxStartups 10:30:100</span>
</span><span id="__span-14-257"><a id="__codelineno-14-257" name="__codelineno-14-257" href="#__codelineno-14-257"></a>
</span><span id="__span-14-258"><a id="__codelineno-14-258" name="__codelineno-14-258" href="#__codelineno-14-258"></a><span class="gh"># 是否允许 tun(4) 设备转发。可用值如下：</span>
</span><span id="__span-14-259"><a id="__codelineno-14-259" name="__codelineno-14-259" href="#__codelineno-14-259"></a><span class="gh"># &quot;yes&quot;, &quot;point-to-point&quot;(layer 3), &quot;ethernet&quot;(layer 2), &quot;no&quot;(默认)</span>
</span><span id="__span-14-260"><a id="__codelineno-14-260" name="__codelineno-14-260" href="#__codelineno-14-260"></a><span class="gh"># &quot;yes&quot;同时蕴含着&quot;point-to-point&quot;和&quot;ethernet&quot;</span>
</span><span id="__span-14-261"><a id="__codelineno-14-261" name="__codelineno-14-261" href="#__codelineno-14-261"></a><span class="gh">#PermitTunnel no</span>
</span><span id="__span-14-262"><a id="__codelineno-14-262" name="__codelineno-14-262" href="#__codelineno-14-262"></a>
</span><span id="__span-14-263"><a id="__codelineno-14-263" name="__codelineno-14-263" href="#__codelineno-14-263"></a><span class="gh">#ChrootDirectory none</span>
</span><span id="__span-14-264"><a id="__codelineno-14-264" name="__codelineno-14-264" href="#__codelineno-14-264"></a><span class="gh">#VersionAddendum none</span>
</span><span id="__span-14-265"><a id="__codelineno-14-265" name="__codelineno-14-265" href="#__codelineno-14-265"></a>
</span><span id="__span-14-266"><a id="__codelineno-14-266" name="__codelineno-14-266" href="#__codelineno-14-266"></a><span class="gh"># 这个特性仅能用于SSH-2，默认什么内容也不显示。&quot;none&quot;表示禁用这个特性</span>
</span><span id="__span-14-267"><a id="__codelineno-14-267" name="__codelineno-14-267" href="#__codelineno-14-267"></a><span class="gh"># no default banner path</span>
</span><span id="__span-14-268"><a id="__codelineno-14-268" name="__codelineno-14-268" href="#__codelineno-14-268"></a><span class="gh">#Banner none</span>
</span><span id="__span-14-269"><a id="__codelineno-14-269" name="__codelineno-14-269" href="#__codelineno-14-269"></a>
</span><span id="__span-14-270"><a id="__codelineno-14-270" name="__codelineno-14-270" href="#__codelineno-14-270"></a>######################################################################################################################
</span><span id="__span-14-271"><a id="__codelineno-14-271" name="__codelineno-14-271" href="#__codelineno-14-271"></a><span class="gh"># AcceptEnv</span>
</span><span id="__span-14-272"><a id="__codelineno-14-272" name="__codelineno-14-272" href="#__codelineno-14-272"></a><span class="gh"># 指定客户端发送的哪些环境变量将会被传递到会话环境中。[注意]只有SSH-2协议支持环境变量的传递</span>
</span><span id="__span-14-273"><a id="__codelineno-14-273" name="__codelineno-14-273" href="#__codelineno-14-273"></a><span class="gh"># 细节可以参考/etc/ssh/ssh_config中的 SendEnv 配置指令</span>
</span><span id="__span-14-274"><a id="__codelineno-14-274" name="__codelineno-14-274" href="#__codelineno-14-274"></a><span class="gh"># 指令的值是空格分隔的变量名列表(其中可以使用&#39;*&#39;和&#39;?&#39;作为通配符)。也可以使用多个 AcceptEnv 达到同样的目的</span>
</span><span id="__span-14-275"><a id="__codelineno-14-275" name="__codelineno-14-275" href="#__codelineno-14-275"></a><span class="gh"># 需要注意的是，有些环境变量可能会被用于绕过禁止用户使用的环境变量。由于这个原因，该指令应当小心使用</span>
</span><span id="__span-14-276"><a id="__codelineno-14-276" name="__codelineno-14-276" href="#__codelineno-14-276"></a><span class="gh"># 默认是不传递任何环境变量</span>
</span><span id="__span-14-277"><a id="__codelineno-14-277" name="__codelineno-14-277" href="#__codelineno-14-277"></a><span class="gh"># Allow client to pass locale environment variables</span>
</span><span id="__span-14-278"><a id="__codelineno-14-278" name="__codelineno-14-278" href="#__codelineno-14-278"></a>AcceptEnv LANG LC_*
</span><span id="__span-14-279"><a id="__codelineno-14-279" name="__codelineno-14-279" href="#__codelineno-14-279"></a>
</span><span id="__span-14-280"><a id="__codelineno-14-280" name="__codelineno-14-280" href="#__codelineno-14-280"></a>######################################################################################################################
</span><span id="__span-14-281"><a id="__codelineno-14-281" name="__codelineno-14-281" href="#__codelineno-14-281"></a>
</span><span id="__span-14-282"><a id="__codelineno-14-282" name="__codelineno-14-282" href="#__codelineno-14-282"></a><span class="gh"># 系统内开启ssh服务和sftp服务都是通过/usr/sbin/sshd这个后台程序监听22端口，而sftp服务作为一个子服务，是通过/etc/ssh/sshd_config配置</span>
</span><span id="__span-14-283"><a id="__codelineno-14-283" name="__codelineno-14-283" href="#__codelineno-14-283"></a><span class="gh"># 文件中的Subsystem实现的，如果没有配置Subsystem参数，则系统是不能sftp访问的</span>
</span><span id="__span-14-284"><a id="__codelineno-14-284" name="__codelineno-14-284" href="#__codelineno-14-284"></a><span class="gh"># override default of no subsystems</span>
</span><span id="__span-14-285"><a id="__codelineno-14-285" name="__codelineno-14-285" href="#__codelineno-14-285"></a>Subsystem   sftp    /usr/lib/openssh/sftp-server
</span><span id="__span-14-286"><a id="__codelineno-14-286" name="__codelineno-14-286" href="#__codelineno-14-286"></a>
</span><span id="__span-14-287"><a id="__codelineno-14-287" name="__codelineno-14-287" href="#__codelineno-14-287"></a><span class="gh"># AllowGroups</span>
</span><span id="__span-14-288"><a id="__codelineno-14-288" name="__codelineno-14-288" href="#__codelineno-14-288"></a><span class="gh"># 这个指令后面跟着一串用空格分隔的组名列表(其中可以使用&quot;*&quot;和&quot;?&quot;通配符)。默认允许所有组登录</span>
</span><span id="__span-14-289"><a id="__codelineno-14-289" name="__codelineno-14-289" href="#__codelineno-14-289"></a><span class="gh"># 如果使用了这个指令，那么将仅允许这些组中的成员登录，而拒绝其它所有组</span>
</span><span id="__span-14-290"><a id="__codelineno-14-290" name="__codelineno-14-290" href="#__codelineno-14-290"></a><span class="gh"># 这里的&quot;组&quot;是指&quot;主组&quot;(primary group)，也就是/etc/passwd文件中指定的组</span>
</span><span id="__span-14-291"><a id="__codelineno-14-291" name="__codelineno-14-291" href="#__codelineno-14-291"></a><span class="gh"># 这里只允许使用组的名字而不允许使用GID。相关的 allow/deny 指令按照下列顺序处理：</span>
</span><span id="__span-14-292"><a id="__codelineno-14-292" name="__codelineno-14-292" href="#__codelineno-14-292"></a><span class="gh"># DenyUsers, AllowUsers, DenyGroups, AllowGroups</span>
</span><span id="__span-14-293"><a id="__codelineno-14-293" name="__codelineno-14-293" href="#__codelineno-14-293"></a><span class="gh">#AllowGroups&lt;组名1&gt; &lt;组名2&gt; &lt;组名3&gt; ..</span>
</span><span id="__span-14-294"><a id="__codelineno-14-294" name="__codelineno-14-294" href="#__codelineno-14-294"></a><span class="gu">##指定允许通过远程访问的组，多个组以空格隔开。当多个用户需要通过ssh登录系统时，可将所有用户加入一个组中</span>
</span><span id="__span-14-295"><a id="__codelineno-14-295" name="__codelineno-14-295" href="#__codelineno-14-295"></a>
</span><span id="__span-14-296"><a id="__codelineno-14-296" name="__codelineno-14-296" href="#__codelineno-14-296"></a><span class="gh"># DenyGroups</span>
</span><span id="__span-14-297"><a id="__codelineno-14-297" name="__codelineno-14-297" href="#__codelineno-14-297"></a><span class="gh"># 这个指令后面跟着一串用空格分隔的组名列表(其中可以使用&quot;*&quot;和&quot;?&quot;通配符)。默认允许所有组登录</span>
</span><span id="__span-14-298"><a id="__codelineno-14-298" name="__codelineno-14-298" href="#__codelineno-14-298"></a><span class="gh"># 如果使用了这个指令，那么这些组中的成员将被拒绝登录</span>
</span><span id="__span-14-299"><a id="__codelineno-14-299" name="__codelineno-14-299" href="#__codelineno-14-299"></a><span class="gh"># 这里的&quot;组&quot;是指&quot;主组&quot;(primary group)，也就是/etc/passwd文件中指定的组</span>
</span><span id="__span-14-300"><a id="__codelineno-14-300" name="__codelineno-14-300" href="#__codelineno-14-300"></a><span class="gh"># 这里只允许使用组的名字而不允许使用GID。相关的 allow/deny 指令按照下列顺序处理：</span>
</span><span id="__span-14-301"><a id="__codelineno-14-301" name="__codelineno-14-301" href="#__codelineno-14-301"></a><span class="gh"># DenyUsers, AllowUsers, DenyGroups, AllowGroups</span>
</span><span id="__span-14-302"><a id="__codelineno-14-302" name="__codelineno-14-302" href="#__codelineno-14-302"></a><span class="gh">#DenyGroups&lt;组名1&gt; &lt;组名2&gt; &lt;组名3&gt; ..</span>
</span><span id="__span-14-303"><a id="__codelineno-14-303" name="__codelineno-14-303" href="#__codelineno-14-303"></a><span class="gu">##指定禁止通过远程访问的组，多个组以空格隔开</span>
</span><span id="__span-14-304"><a id="__codelineno-14-304" name="__codelineno-14-304" href="#__codelineno-14-304"></a>
</span><span id="__span-14-305"><a id="__codelineno-14-305" name="__codelineno-14-305" href="#__codelineno-14-305"></a>######################################################################################################################
</span><span id="__span-14-306"><a id="__codelineno-14-306" name="__codelineno-14-306" href="#__codelineno-14-306"></a>
</span><span id="__span-14-307"><a id="__codelineno-14-307" name="__codelineno-14-307" href="#__codelineno-14-307"></a><span class="gh"># AllowUsers</span>
</span><span id="__span-14-308"><a id="__codelineno-14-308" name="__codelineno-14-308" href="#__codelineno-14-308"></a><span class="gh"># 这个指令后面跟着一串用空格分隔的用户名列表(其中可以使用&quot;*&quot;和&quot;?&quot;通配符)。默认允许所有用户登录</span>
</span><span id="__span-14-309"><a id="__codelineno-14-309" name="__codelineno-14-309" href="#__codelineno-14-309"></a><span class="gh"># 如果使用了这个指令，那么将仅允许这些用户登录，而拒绝其它所有用户</span>
</span><span id="__span-14-310"><a id="__codelineno-14-310" name="__codelineno-14-310" href="#__codelineno-14-310"></a><span class="gh"># 如果指定了 USER@HOST 模式的用户，那么 USER 和 HOST 将同时被检查。# override default of no subsystems</span>
</span><span id="__span-14-311"><a id="__codelineno-14-311" name="__codelineno-14-311" href="#__codelineno-14-311"></a><span class="gh"># 这里只允许使用用户的名字而不允许使用UID。相关的 allow/deny 指令按照下列顺序处理：Subsystem sftp /usr/lib/openssh/sftp-server</span>
</span><span id="__span-14-312"><a id="__codelineno-14-312" name="__codelineno-14-312" href="#__codelineno-14-312"></a><span class="gh"># DenyUsers, AllowUsers, DenyGroups, AllowGroups</span>
</span><span id="__span-14-313"><a id="__codelineno-14-313" name="__codelineno-14-313" href="#__codelineno-14-313"></a><span class="gh">#AllowUsers&lt;用户名1&gt; &lt;用户名2&gt; &lt;用户名3&gt; ..</span>
</span><span id="__span-14-314"><a id="__codelineno-14-314" name="__codelineno-14-314" href="#__codelineno-14-314"></a><span class="gu">##指定允许通过远程访问的用户，多个用户以空格隔开</span>
</span><span id="__span-14-315"><a id="__codelineno-14-315" name="__codelineno-14-315" href="#__codelineno-14-315"></a>
</span><span id="__span-14-316"><a id="__codelineno-14-316" name="__codelineno-14-316" href="#__codelineno-14-316"></a><span class="gh"># DenyUsers</span>
</span><span id="__span-14-317"><a id="__codelineno-14-317" name="__codelineno-14-317" href="#__codelineno-14-317"></a><span class="gh"># 这个指令后面跟着一串用空格分隔的用户名列表(其中可以使用&quot;*&quot;和&quot;?&quot;通配符)。默认允许所有用户登录</span>
</span><span id="__span-14-318"><a id="__codelineno-14-318" name="__codelineno-14-318" href="#__codelineno-14-318"></a><span class="gh"># 如果使用了这个指令，那么这些用户将被拒绝登录</span>
</span><span id="__span-14-319"><a id="__codelineno-14-319" name="__codelineno-14-319" href="#__codelineno-14-319"></a><span class="gh"># 如果指定了 USER@HOST 模式的用户，那么 USER 和 HOST 将同时被检查</span>
</span><span id="__span-14-320"><a id="__codelineno-14-320" name="__codelineno-14-320" href="#__codelineno-14-320"></a><span class="gh"># 这里只允许使用用户的名字而不允许使用UID。相关的 allow/deny 指令按照下列顺序处理：</span>
</span><span id="__span-14-321"><a id="__codelineno-14-321" name="__codelineno-14-321" href="#__codelineno-14-321"></a><span class="gh"># DenyUsers, AllowUsers, DenyGroups, AllowGroups</span>
</span><span id="__span-14-322"><a id="__codelineno-14-322" name="__codelineno-14-322" href="#__codelineno-14-322"></a><span class="gh">#DenyUsers&lt;用户名1&gt; &lt;用户名2&gt; &lt;用户名3&gt; ..</span>
</span><span id="__span-14-323"><a id="__codelineno-14-323" name="__codelineno-14-323" href="#__codelineno-14-323"></a><span class="gu">##指定禁止通过远程访问的用户，多个用户以空格隔开</span>
</span><span id="__span-14-324"><a id="__codelineno-14-324" name="__codelineno-14-324" href="#__codelineno-14-324"></a>
</span><span id="__span-14-325"><a id="__codelineno-14-325" name="__codelineno-14-325" href="#__codelineno-14-325"></a>######################################################################################################################
</span><span id="__span-14-326"><a id="__codelineno-14-326" name="__codelineno-14-326" href="#__codelineno-14-326"></a>
</span><span id="__span-14-327"><a id="__codelineno-14-327" name="__codelineno-14-327" href="#__codelineno-14-327"></a><span class="gh"># Match</span>
</span><span id="__span-14-328"><a id="__codelineno-14-328" name="__codelineno-14-328" href="#__codelineno-14-328"></a><span class="gh"># 引入一个条件块。块的结尾标志是另一个 Match 指令或者文件结尾</span>
</span><span id="__span-14-329"><a id="__codelineno-14-329" name="__codelineno-14-329" href="#__codelineno-14-329"></a><span class="gh"># 如果 Match 行上指定的条件都满足，那么随后的指令将覆盖全局配置中的指令</span>
</span><span id="__span-14-330"><a id="__codelineno-14-330" name="__codelineno-14-330" href="#__codelineno-14-330"></a><span class="gh"># Match 的值是一个或多个&quot;条件-模式&quot;对。可用的&quot;条件&quot;是：User, Group, Host, Address</span>
</span><span id="__span-14-331"><a id="__codelineno-14-331" name="__codelineno-14-331" href="#__codelineno-14-331"></a><span class="gh"># 只有下列指令可以在 Match 块中使用：AllowTcpForwarding, Banner,</span>
</span><span id="__span-14-332"><a id="__codelineno-14-332" name="__codelineno-14-332" href="#__codelineno-14-332"></a><span class="gh"># ForceCommand, GatewayPorts, GSSApiAuthentication,</span>
</span><span id="__span-14-333"><a id="__codelineno-14-333" name="__codelineno-14-333" href="#__codelineno-14-333"></a><span class="gh"># KbdInteractiveAuthentication, KerberosAuthentication,</span>
</span><span id="__span-14-334"><a id="__codelineno-14-334" name="__codelineno-14-334" href="#__codelineno-14-334"></a><span class="gh"># PasswordAuthentication, PermitOpen, PermitRootLogin,</span>
</span><span id="__span-14-335"><a id="__codelineno-14-335" name="__codelineno-14-335" href="#__codelineno-14-335"></a><span class="gh"># RhostsRSAAuthentication, RSAAuthentication, X11DisplayOffset,</span>
</span><span id="__span-14-336"><a id="__codelineno-14-336" name="__codelineno-14-336" href="#__codelineno-14-336"></a><span class="gh"># X11Forwarding, X11UseLocalHost</span>
</span><span id="__span-14-337"><a id="__codelineno-14-337" name="__codelineno-14-337" href="#__codelineno-14-337"></a>
</span><span id="__span-14-338"><a id="__codelineno-14-338" name="__codelineno-14-338" href="#__codelineno-14-338"></a><span class="gh"># 指定TCP端口转发允许的目的地，可以使用空格分隔多个转发目标。默认允许所有转发请求</span>
</span><span id="__span-14-339"><a id="__codelineno-14-339" name="__codelineno-14-339" href="#__codelineno-14-339"></a><span class="gh"># 合法的指令格式如下：</span>
</span><span id="__span-14-340"><a id="__codelineno-14-340" name="__codelineno-14-340" href="#__codelineno-14-340"></a><span class="gh"># PermitOpen host:port</span>
</span><span id="__span-14-341"><a id="__codelineno-14-341" name="__codelineno-14-341" href="#__codelineno-14-341"></a><span class="gh"># PermitOpen IPv4_addr:port</span>
</span><span id="__span-14-342"><a id="__codelineno-14-342" name="__codelineno-14-342" href="#__codelineno-14-342"></a><span class="gh"># PermitOpen [IPv6_addr]:port</span>
</span><span id="__span-14-343"><a id="__codelineno-14-343" name="__codelineno-14-343" href="#__codelineno-14-343"></a><span class="gh"># &quot;any&quot;可以用于移除所有限制并允许一切转发请求</span>
</span><span id="__span-14-344"><a id="__codelineno-14-344" name="__codelineno-14-344" href="#__codelineno-14-344"></a>
</span><span id="__span-14-345"><a id="__codelineno-14-345" name="__codelineno-14-345" href="#__codelineno-14-345"></a><span class="gh"># Example of overriding settings on a per-user basis</span>
</span><span id="__span-14-346"><a id="__codelineno-14-346" name="__codelineno-14-346" href="#__codelineno-14-346"></a><span class="gh">#Match User anoncvs</span>
</span><span id="__span-14-347"><a id="__codelineno-14-347" name="__codelineno-14-347" href="#__codelineno-14-347"></a><span class="gh">#   X11Forwarding no</span>
</span><span id="__span-14-348"><a id="__codelineno-14-348" name="__codelineno-14-348" href="#__codelineno-14-348"></a><span class="gh">#   AllowTcpForwarding no</span>
</span><span id="__span-14-349"><a id="__codelineno-14-349" name="__codelineno-14-349" href="#__codelineno-14-349"></a><span class="gh">#   PermitTTY no</span>
</span><span id="__span-14-350"><a id="__codelineno-14-350" name="__codelineno-14-350" href="#__codelineno-14-350"></a>
</span><span id="__span-14-351"><a id="__codelineno-14-351" name="__codelineno-14-351" href="#__codelineno-14-351"></a><span class="gh">#   ForceCommand cvs server</span>
</span><span id="__span-14-352"><a id="__codelineno-14-352" name="__codelineno-14-352" href="#__codelineno-14-352"></a><span class="gh">#   ForceCommand</span>
</span><span id="__span-14-353"><a id="__codelineno-14-353" name="__codelineno-14-353" href="#__codelineno-14-353"></a><span class="gh">#   强制执行这里指定的命令而忽略客户端提供的任何命令。这个命令将使用用户的登录shell执行(shell -c)</span>
</span><span id="__span-14-354"><a id="__codelineno-14-354" name="__codelineno-14-354" href="#__codelineno-14-354"></a><span class="gh">#   这可以应用于 shell 、命令、子系统的完成，通常用于 Match 块中</span>
</span><span id="__span-14-355"><a id="__codelineno-14-355" name="__codelineno-14-355" href="#__codelineno-14-355"></a><span class="gh">#   这个命令最初是在客户端通过 SSH_ORIGINAL_COMMAND 环境变量来支持的</span>
</span><span id="__span-14-356"><a id="__codelineno-14-356" name="__codelineno-14-356" href="#__codelineno-14-356"></a>
</span><span id="__span-14-357"><a id="__codelineno-14-357" name="__codelineno-14-357" href="#__codelineno-14-357"></a>PermitRootLogin yes
</span><span id="__span-14-358"><a id="__codelineno-14-358" name="__codelineno-14-358" href="#__codelineno-14-358"></a>
</span><span id="__span-14-359"><a id="__codelineno-14-359" name="__codelineno-14-359" href="#__codelineno-14-359"></a><span class="gh"># 指定sshd守护进程监听的端口号，默认为 22 。可以使用多条指令监听多个端口</span>
</span><span id="__span-14-360"><a id="__codelineno-14-360" name="__codelineno-14-360" href="#__codelineno-14-360"></a><span class="gh"># 默认将在本机的所有网络接口上监听，但是可以通过 ListenAddress 指定只在某个特定的接口上监听</span>
</span><span id="__span-14-361"><a id="__codelineno-14-361" name="__codelineno-14-361" href="#__codelineno-14-361"></a>Port 22
</span></code></pre></div>
<h3 id="ssh_2">SSH端口转发<a class="headerlink" href="#ssh_2" title="Permanent link">&para;</a></h3>
<p>SSH端口转发将其他TCP端口的网络数据通过SSH链路转发，并自动加密和解密</p>
<h4 id="_5">本地转发实例<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="gh"># 命令格式：ssh -L &lt;local port&gt;:&lt;remote host&gt;:&lt;remote port&gt; &lt;SSH hostname&gt;</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="gh"># 实例：一台LDAP server，但限制远程机器连接，此时利用ssh端口转发实现从远程机器测试server的目的(这里的远程机器是相对于server来讲的)</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="gh"># LDAP client执行此命令建立ssh本地端口转发，实现通过ssh隧道从本地7001端口连接远端的389端口</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>ssh -L 7001:localhost:389 LDAPServer
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="gh"># SSH 同时提供了 GatewayPorts 关键字，我们可以通过指定它与其他机器共享这个本地端口转发</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>ssh -g -L &lt;local port&gt;:&lt;remote host&gt;:&lt;remote port&gt; &lt;SSH hostname&gt;
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>......................|||.........................
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>......LDAP Client.....|||......LDAP Server........
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>......................|||.........................
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>.......########.......|||.........................
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>.......########.......|||.....############........
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>.......########.......|||.....############........
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>......@@@@@@@@@@......|||.....#@@@@#######........
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>.....############.....|||.....############........
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>.....############.....|||.....############........
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>...Local Port 7001....|||.......LDAP Port 389.....
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>........↘.............|||..............↗..........
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>.....SSH Clinet...▒▒▒▒▒▒▒.....SSH Server.....
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>...................SSH tunnel.....................
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>..................................................
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="gh"># 本地服务器LDAP Client若提示无法解析hostname LDAPServer,则在/etc/hosts文件添加localhost LDAPServer即可</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="gh"># 在选择端口号时要注意非管理员帐号是无权绑定 1-1023 端口的，所以一般是选用一个 1024-65535 之间的并且尚未使用的端口号即可</span>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="gh"># 然后我们可以将远程机器（LDAP Client）上的应用直接配置到本机的 7001 端口上（而不是 LDAP 服务器的 389 端口上）</span>
</span></code></pre></div>
<h4 id="_6">远程转发实例<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>假设由于网络或防火墙的原因我们不能用SSH直接从LDAP Client Host连接到LDAP服务器（Ldap Server Host），但是反向连接却是被允许的,
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>此时我们的选择自然就是远程端口转发了
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="gh"># 命令格式：</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>ssh -R &lt;local port&gt;:&lt;remote host&gt;:&lt;remote port&gt; &lt;SSH hostname&gt;
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="gh"># 在LDAP服务器（LdapServertHost）端执行如下命令：</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="gh"># -n阻止从stdin读取，因为您不想从命令行使用隧道</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="gh"># -N表示您不想执行远程命令，只需执行端口转发</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>ssh -nN -R 7001:localhost:389 LdapClientHost
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>......................|||.........................
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>......LDAP Client.....|||......LDAP Server........
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>......................|||.........................
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>.......########.......|||.........................
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>.......########.......|||.....############........
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>.......########.......|||.....############........
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>......@@@@@@@@@@......|||.....#@@@@#######........
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>.....############.....|||.....############........
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>.....############.....|||.....############........
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>...Local Port 7001....|||.......LDAP Port 389.....
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>........↘.............|||..............↗..........
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>.....SSH Server...▒▒▒▒▒▒▒.....SSH Client.....
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>...................SSH tunnel.....................
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>..................................................
</span></code></pre></div>
<h4 id="_7">多主机转发应用实例<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="gh"># 本地转发命令中的&lt;remote host&gt;和&lt;SSH hostname&gt;可以是不同的机器</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>ssh -L &lt;local port&gt;:&lt;remote host&gt;:&lt;remote port&gt; &lt;SSH hostname&gt;
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="gh"># 看一个涉及到四台机器 (A,B,C,D) 的例子,在 SSH Client(C) 执行下列命令来建立 SSH 连接以及端口转发：</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>ssh -g -L 7001:&lt;B&gt;:389 &lt;D&gt;
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>然后应用客户端（A）上配置连接机器（C ）的 7001 端口即可,在上述连接中，（A）&lt;-&gt; (C) 以及 (B)&lt;-&gt;(D) 之间的连接并不是安全连接
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>它们之间没有经过 SSH 的加密及解密
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>........................................................................................
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>......................................|||...............................................
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>......................................|||...............................................
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>.............#############............|||...............................................
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>.............#############............|||...............................................
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>.............LDAP Clinet(A)...........|||...........LADP Server(B)......................
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>.............#############............|||...............................................
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>.............#############............|||..........#################....................
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>.............@@@@@@@@@@@@@............|||..........##@@@@@@#########....................
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>...........#################..........|||..........#################....................
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>...........#################..........|||..........#################....................
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>..............LDAP App................|||.............LDAP Port 389.....................
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>..................↑...................|||...................↑...........................
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>..................↓...................|||...................↓...........................
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>..............SSH Client(C)...........|||..............SSH Server(D)....................
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>...........@@@@@@@@@@@@@@@@@..........|||............@@@@@@@@@@@@@@@@@..................
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>...........#################..........|||............#################..................
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>...........#################..........|||............#################..................
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>............Local Port 7001...........|||...............................................
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>..............SSH Client...▒▒▒▒▒▒▒▒▒▒▒▒▒▒...SSH Server........................
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>....................................SSH tunnel..........................................
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>........................................................................................
</span></code></pre></div>
<h4 id="_8">动态转发实例<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="gh"># 当我们在一个不安全的 WiFi 环境下上网，用 SSH 动态转发来保护我们的网页浏览及 MSN 信息无疑是十分必要的。实际是创建了一个socks代理服务</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="gh"># 命令格式：ssh -D &lt;local port&gt; &lt;SSH Server&gt;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>此时直接使用 localhost:7001 来作为正常的 SOCKS 代理来使用,SSH 所包护的范围只包括从浏览器端（SSH Client 端）到 SSH Server 端的连接
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>并不包含从 SSH Server 端 到目标网站的连接。如果后半截连接的安全不能得到充分的保证的话，这种方式仍不是合适的解决方案
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>...........................................................................................
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>.....................................|||...................................................
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>.....................................|||...................................................
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>...........Brower、MSN Client........|||.......________________________________............
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>............@############@...........|||.......|::::::::::::::::::::::::::::::|............
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>............@############@...........|||.......|::::::::WEB Site,MSN...:::::::|............
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>............@############@...........|||.......|::::::::::::::::::::::::::::::|............
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>..........@################@.........|||.......|::::::::::::::::::::::::::::::|............
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>..........@################@.........|||.......|::::::::::::::::::::::::::::::|............
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>..........@################@.........|||.......--------------------------------............
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>..............Port 7001..............|||.............Dynamic Port(动态端口).................
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>..............SSH Clinet....▒▒▒▒▒▒▒▒▒▒▒▒.....SSH Server...........................
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>...................................SSH tunnel..............................................
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>.....................................|||...................................................
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>.....................................|||...................................................
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>...........................................................................................
</span></code></pre></div>
<h4 id="x">X协议转发实例<a class="headerlink" href="#x" title="Permanent link">&para;</a></h4>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="gh"># 可用作远程桌面连接，被远程端是Windows可安装xming作为xserver。ssh client可以选择putty配置ssh访问并建立x-forward（转发）</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>在X Server端执行一下命令，发起一个SSH连接。然后在X Client端运行远程X桌面连接客户端
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>ssh -X &lt;SSH Server&gt;
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>..................................................
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>......X Server........|||......X Clinet...........
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>......................|||.........................
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>.......########.......|||.........................
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>.......########.......|||.....############........
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>.......########.......|||.....############........
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>......@@@@@@@@@@......|||.....#@@@@#######........
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>.....############.....|||.....############........
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>.....############.....|||.....############........
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>..........↑...........|||..DISPLAY=locahost:10.1..
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>..........↓...........|||..............↓..........
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>.....SSH Client...▒▒▒▒▒▒▒.....SSH Server.....
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>...................SSH tunnel.....................
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>..................................................
</span></code></pre></div>
<h2 id="esnet">主机调整 [es.net]<a class="headerlink" href="#esnet" title="Permanent link">&para;</a></h2>
<p><a href="http://fasterdata.es.net/performance-testing/troubleshooting">网络故障排查参考</a></p>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="gu">## 关于超大型数据集传输问题(引用es.net)</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>在Unix环境中，scp，sftp和rsync通常用于在主机之间复制数据。虽然这些工具在本地环境中运行良好，但它们在WAN上的性能很差。scp和sftp
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>的openssh版本具有内置的1MB缓冲区，严重限制了WAN上的性能。尽管rsync不是openssh发行版的一部分，但rsync通常使用ssh作为传输，因此
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>受到底层ssh实现所施加的限制。 如果您需要在RTT超过20毫秒的网络路径上传输大型数据集，请不要使用这些工具
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>匹兹堡超级计算机中心提供了解决scp和sftp关于这个问题的补丁：HPN-SSH：https://www.psc.edu/hpn-ssh
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="gh"># 根据es net官网TCP注意事项</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>注意：应该单独使用net.tcp_mem，因为默认设置没问题。一些性能专家说，还要增加net.core.optmem_max以匹配net.core.rmem_max
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>和net.core.wmem_max，但我们没有发现这有任何区别。一些专家还说将net.ipv4.tcp_timestamps和net.ipv4.tcp_sack设置为0
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>这样做可以减少CPU负载，但默认值是1对于性能其实更有帮助
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>对于较旧的操作系（例如CentOS5/6），增加net.core.netdev_max_backlog值也可以提高性能
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="gh"># UDP调整</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="k">1.</span> 使用jumbo frames在9k MTUs下可以使性能提高4-5倍
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="k">2.</span> 数据包大小：最好的性能是MTU大小减去数据包头大小，例如：9000Byte MTU，ipv4是8972，ipv6是8952
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="k">3.</span> socket缓存大小：对于UDP，缓冲区大小与TCP的方式无关，但默认值仍然不够大。在大多数情况下，将套接字缓冲区设置为4M似乎有很大帮助
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="k">4.</span> CPU选择：10G的UDP通常是CPU限制，因此需要考虑内核，尤其在Sandy或lvy Bridge主板
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="gh"># 虚拟机调整</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="gu">## XEN、KVM类型</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>要将所有的主机处理器功能传递给guest虚拟机执行
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>qemu -cpu host
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>如果希望保留兼容性，则可以向guest虚拟机公开所选功能。如果所有主机都具有这些功能，则会保留兼容性
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>qemu -cpu qemu64,+ssse3,+sse4.1,+sse4.2,+x2apic
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>要查看主机CPU与guest虚拟机功能之间的区别，只需比较每个系统上以下命令的输出
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a>grep flags /proc/cpuinfo | uniq
</span><span id="__span-20-32"><a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a>
</span><span id="__span-20-33"><a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>qemu默认使用用户模式网络(slirp)，无需事先安装即可在主机使用管理权限，但是很慢，获得高性能可通过-net tap命令行开关切换到桥接模式
</span><span id="__span-20-34"><a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a>qemu -net nic,model = virtio,mac=...-net tap,ifname=...
</span><span id="__span-20-35"><a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a>或
</span><span id="__span-20-36"><a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a>qemu -net nic,model = virtio,mac=... -net bridge,br=...,helper=/usr/local/libexec/qemu-bridge-helper
</span><span id="__span-20-37"><a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a>
</span><span id="__span-20-38"><a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a>除了virtio之外，vt-d passthrough方法可提供更高的性能
</span><span id="__span-20-39"><a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a>qemu -net none -device vfio-pci,host=...
</span><span id="__span-20-40"><a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a>
</span><span id="__span-20-41"><a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a>QEMU支持各种存储格式和后端。最容易使用的是raw和qcow2格式，但为了获得最佳性能，最好使用原始分区。创建逻辑卷或分区并将其分配给guest虚拟机：
</span><span id="__span-20-42"><a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a>qemu -drive file=/dev/mapper/ImagesVolumeGroup-Guest1,cache=none,if=virtio
</span><span id="__span-20-43"><a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a>
</span><span id="__span-20-44"><a id="__codelineno-20-44" name="__codelineno-20-44" href="#__codelineno-20-44"></a>QEMU还支持各种缓存模式。如果您使用的是原始卷或分区，最好完全避免缓存，这会减少数据副本和总线流量
</span><span id="__span-20-45"><a id="__codelineno-20-45" name="__codelineno-20-45" href="#__codelineno-20-45"></a>
</span><span id="__span-20-46"><a id="__codelineno-20-46" name="__codelineno-20-46" href="#__codelineno-20-46"></a>qemu -drive file=/dev/mapper/ImagesVolumeGroup-Guest1,cache=none,if=virtio
</span><span id="__span-20-47"><a id="__codelineno-20-47" name="__codelineno-20-47" href="#__codelineno-20-47"></a>
</span><span id="__span-20-48"><a id="__codelineno-20-48" name="__codelineno-20-48" href="#__codelineno-20-48"></a>与网络一样，QEMU支持多种存储接口。默认值IDE受到来宾的高度支持，但可能很慢，尤其是磁盘阵列。如果您的guest虚拟机支持它，请使用virtio接口
</span><span id="__span-20-49"><a id="__codelineno-20-49" name="__codelineno-20-49" href="#__codelineno-20-49"></a>不要在主机上使用linux文件系统btrfs来获取图像文件。这将导致低IO性能。当客户端进行高IO流量时，kvm guest虚拟机甚至可能会冻结
</span><span id="__span-20-50"><a id="__codelineno-20-50" name="__codelineno-20-50" href="#__codelineno-20-50"></a>
</span><span id="__span-20-51"><a id="__codelineno-20-51" name="__codelineno-20-51" href="#__codelineno-20-51"></a>qemu -drive file=/dev/mapper/ImagesVolumeGroup-Guest1,cache=none,if=virtio
</span><span id="__span-20-52"><a id="__codelineno-20-52" name="__codelineno-20-52" href="#__codelineno-20-52"></a>
</span><span id="__span-20-53"><a id="__codelineno-20-53" name="__codelineno-20-53" href="#__codelineno-20-53"></a><span class="gu">## VMware类型</span>
</span><span id="__span-20-54"><a id="__codelineno-20-54" name="__codelineno-20-54" href="#__codelineno-20-54"></a>
</span><span id="__span-20-55"><a id="__codelineno-20-55" name="__codelineno-20-55" href="#__codelineno-20-55"></a>[<span class="nt">VMware兼容性指南</span>](<span class="na">http://www.vmware.com/resources/compatibility/search.php</span>)
</span></code></pre></div>
<h2 id="_9">优化内核参数 [根据实际情况调整]<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>修改内核参数方法:</p>
<p>echo追加到文件里如：echo "1" &gt;/proc/sys/net/ipv4/tcp_syn_retries，或使用sysctl -w命令，但重启后失效,把参数添加到
/etc/sysctl.conf中，然后执行sysctl -p使参数生效，永久生效。内核生产环境常用优化参数参考，具体优化值要参考应用场景和设备</p>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="gh"># 下列参数设置后，文件所在目录为：/proc/sys/kernel/</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="gh"># 开启execshield,即内存缓冲区溢出保护</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>kernel.exec-shield = 1
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>kernel.randomize_va_space = 1
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>kernel.sysrq = 0    # 控制内核的系统请求调试功能，为安全起见设为0关闭
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>kernel.core_uses_pid = 1    # 控制核心转储是否将PID附加到核心文件名,用于调试多线程应用程序
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>kernel.msgmnb = 65536   # 每个消息队列的大小（单位：字节）限制
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>kernel.msgmax = 65536   # 整个系统最大消息队列数量限制
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>kernel.shmmax = 67108864 # 增加分配给shm(单个共享内存段)的最大内存量(单位：字节)限制，计算公式64G * 1024 * 1024 * 1024(字节)
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>kernel.shmall = 4294967296  # 所有内存大小(单位：页，1页 = 4Kb)，计算公式16G * 1024 * 1024 * 1024/4KB(页)
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="gh"># 下列参数设置后，文件所在目录为：/proc/sys/net/bridge/</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="gh"># bridge-nf使得netfilter可以对Linux网桥上的IPv4/ARP/IPv6包过滤，以下是常用配置，1代表启用，0代表不启用</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>net.bridge.bridge-nf-call-arptables = 0     # 是否启用在arptables的FORWARD中过滤网桥的ARP包(默认：0)
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>net.bridge.bridge-nf-call-ip6tables = 0     # 是否启用在ip6tables链中过滤IPv6包(默认：0)
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>net.bridge.bridge-nf-call-iptables = 0      # 是否启用在iptables链中过滤IPv4包(默认：0)
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>net.bridge.bridge-nf-filter-vlan-tagged = 0 # 是否启用在iptables/arptables中过滤打了vlan标签的包(默认：0)
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="gh"># 下列参数设置后，文件所在目录为：/proc/sys/net/core/</span>
</span><span id="__span-21-23"><a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>
</span><span id="__span-21-24"><a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a>net.core.rmem_default = 65535   # 为TCP socket预留用于接收缓冲的内存默认值（单位：字节）
</span><span id="__span-21-25"><a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>net.core.rmem_max = 25165824     # 为TCP socket预留用于接收缓冲的内存最大值（单位：字节）(24MB)
</span><span id="__span-21-26"><a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>net.core.wmem_default = 65535   # 为TCP socket预留用于发送缓冲的内存默认值（单位：字节）
</span><span id="__span-21-27"><a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a>net.core.wmem_max = 25165824     # 为TCP socket预留用于发送缓冲的内存最大值（单位：字节）
</span><span id="__span-21-28"><a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a>net.core.hot_list_length = 256  # 增加要缓存的skb-heads数目
</span><span id="__span-21-29"><a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a>net.core.optmem_max = 40960     # 增加内存缓冲区的最大数量(默认：20480)
</span><span id="__span-21-30"><a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a>net.core.busy_poll = 50 # 轮询有助于减少网络接收路径中的延迟,允许套接字层代码轮询网络设备的接收队列，并禁用网络中断(默认：0)
</span><span id="__span-21-31"><a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a>net.core.netdev_max_backlog = 16384 # 当接口接收数据包的速度超过内核可以处理的速度时，增加incoming连接的数量，backlog队列设置
</span><span id="__span-21-32"><a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a>                                    在INPUT端排队的最大数据包数,高负载可以增加该值(默认：1000)
</span><span id="__span-21-33"><a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a>net.core.somaxconn = 1024  # 增加incoming连接数,somaxconn定义每个listen调用分配的request_sock结构的数量。此队列在监听套接字的
</span><span id="__span-21-34"><a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a>                           生命周期中是持久性的,web应用环境非常有必要调整此值
</span><span id="__span-21-35"><a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a>
</span><span id="__span-21-36"><a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a>net.core.default_qdisc = fq     # 推荐用于Centos7、Debian8主机
</span><span id="__span-21-37"><a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a>                                在centos5或6主机需要在/etc/rc.local添加：/sbin/ifconfig ethN txqueuelen 10000
</span><span id="__span-21-38"><a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a>                                (N代表10G NIC的编号，即万兆网卡的系统编号)
</span><span id="__span-21-39"><a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a>
</span><span id="__span-21-40"><a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a><span class="gh"># 下列参数设置后，文件所在目录下：/proc/sys/fs/</span>
</span><span id="__span-21-41"><a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a>
</span><span id="__span-21-42"><a id="__codelineno-21-42" name="__codelineno-21-42" href="#__codelineno-21-42"></a>fs.file-max = 2097152    # 增加文件句柄和inode缓存的大小
</span><span id="__span-21-43"><a id="__codelineno-21-43" name="__codelineno-21-43" href="#__codelineno-21-43"></a>
</span><span id="__span-21-44"><a id="__codelineno-21-44" name="__codelineno-21-44" href="#__codelineno-21-44"></a><span class="gh"># 下列参数设置后，文件所在目录为：/proc/sys/net/ipv4/</span>
</span><span id="__span-21-45"><a id="__codelineno-21-45" name="__codelineno-21-45" href="#__codelineno-21-45"></a>
</span><span id="__span-21-46"><a id="__codelineno-21-46" name="__codelineno-21-46" href="#__codelineno-21-46"></a>net.ipv4.ip_forward = 1 # 值为0表示禁止数据转发，1则开启
</span><span id="__span-21-47"><a id="__codelineno-21-47" name="__codelineno-21-47" href="#__codelineno-21-47"></a>net.ipv4.tcp_no_metrics_save = 1    # 不要在关闭连接时缓存metrics
</span><span id="__span-21-48"><a id="__codelineno-21-48" name="__codelineno-21-48" href="#__codelineno-21-48"></a>net.ipv4.tcp_congestion_control = cubic # 设置默认拥塞控制算法是cubic,(推荐使用htcp)
</span><span id="__span-21-49"><a id="__codelineno-21-49" name="__codelineno-21-49" href="#__codelineno-21-49"></a>net.ipv4.tcp_mtu_probing = 1    # 设置主机启用jumbo frames，避免MTU黑洞问题
</span><span id="__span-21-50"><a id="__codelineno-21-50" name="__codelineno-21-50" href="#__codelineno-21-50"></a>net.ipv4.tcp_rfc1337 = 1    # 防止TCP时间等待
</span><span id="__span-21-51"><a id="__codelineno-21-51" name="__codelineno-21-51" href="#__codelineno-21-51"></a>net.ipv4.icmp_echo_ignore_broadcasts = 1     # 设置为1表示忽略icmp广播请求,避免放大攻击
</span><span id="__span-21-52"><a id="__codelineno-21-52" name="__codelineno-21-52" href="#__codelineno-21-52"></a>net.ipv4.icmp_echo_ignore_all = 1    # 忽略所有icmp请求,即关闭ping
</span><span id="__span-21-53"><a id="__codelineno-21-53" name="__codelineno-21-53" href="#__codelineno-21-53"></a>net.ipv4.icmp_ignore_bogus_error_responses = 1      # 开启恶意icmp错误消息保护
</span><span id="__span-21-54"><a id="__codelineno-21-54" name="__codelineno-21-54" href="#__codelineno-21-54"></a>net.ipv4.tcp_keepalive_time = 600   # TCP发送keepalive消息的频率(单位：秒),用于确认TCP连接是否有效，防止建立连接但不发送数据的攻击
</span><span id="__span-21-55"><a id="__codelineno-21-55" name="__codelineno-21-55" href="#__codelineno-21-55"></a>net.ipv4.tcp_keepalive_probes = 5   # 发送keepalive消息超时之前的探测次数    # 默认值：9，推荐5
</span><span id="__span-21-56"><a id="__codelineno-21-56" name="__codelineno-21-56" href="#__codelineno-21-56"></a>net.ipv4.tcp_keepalive_intvl = 15   # 确定了isAlive间隔探测之间的等待时间   (默认75s,建议15-30s)
</span><span id="__span-21-57"><a id="__codelineno-21-57" name="__codelineno-21-57" href="#__codelineno-21-57"></a>net.ipv4.tcp_retries1 = 3   # 放弃回应一个TCP连接请求前进行重试的次数。RFC规定值最低为3，默认值为3
</span><span id="__span-21-58"><a id="__codelineno-21-58" name="__codelineno-21-58" href="#__codelineno-21-58"></a>net.ipv4.tcp_retries2 = 5   # 在丢弃激活已建立通讯状况的TCP连接之前﹐需要进行多少次重试。默认值为15
</span><span id="__span-21-59"><a id="__codelineno-21-59" name="__codelineno-21-59" href="#__codelineno-21-59"></a>net.ipv4.tcp_orphan_retries = 3 # 本地丢弃TCP连接前进行的重试次数，默认7
</span><span id="__span-21-60"><a id="__codelineno-21-60" name="__codelineno-21-60" href="#__codelineno-21-60"></a>net.ipv4.tcp_abort_on_overflow = 0  # 守护进程过于繁忙不能接受新的连接时，就发送reset信息，默认0
</span><span id="__span-21-61"><a id="__codelineno-21-61" name="__codelineno-21-61" href="#__codelineno-21-61"></a>net.ipv4.tcp_stdurg = 0 # 默认使用tcp urg pointer字段中的主机请求解释功能，打开可能导致不能正常通信(默认：0)
</span><span id="__span-21-62"><a id="__codelineno-21-62" name="__codelineno-21-62" href="#__codelineno-21-62"></a>net.ipv4.tcp_window_scaling = 1 # 支持更大的TCP/ip会话的滑动窗口,如果TCP窗口最大超过65535(64K), 必须设置该数值为1
</span><span id="__span-21-63"><a id="__codelineno-21-63" name="__codelineno-21-63" href="#__codelineno-21-63"></a>net.ipv4.tcp_timestamps = 1 # 可防范伪造的sequence号码，启用实现更好的网络性能(默认：1)
</span><span id="__span-21-64"><a id="__codelineno-21-64" name="__codelineno-21-64" href="#__codelineno-21-64"></a>net.ipv4.tcp_sack = 1   # 开启有选择的应答,用于查看特定的遗失数据包，用于快速恢复连接状态(默认1)
</span><span id="__span-21-65"><a id="__codelineno-21-65" name="__codelineno-21-65" href="#__codelineno-21-65"></a>net.ipv4.tcp_fack = 1  # 打开fack拥塞避免和快速重传功能，注意：当tcp_sack设置为0时，此值设置1也是无效的(默认：1)
</span><span id="__span-21-66"><a id="__codelineno-21-66" name="__codelineno-21-66" href="#__codelineno-21-66"></a>net.ipv4.tcp_dsack = 1 # 允许TCP发送&quot;两个完全相同&quot;的SACK(默认：1)
</span><span id="__span-21-67"><a id="__codelineno-21-67" name="__codelineno-21-67" href="#__codelineno-21-67"></a>net.ipv4.tcp_ecn = 0   # TCP的直接拥塞通告功能(默认：0)
</span><span id="__span-21-68"><a id="__codelineno-21-68" name="__codelineno-21-68" href="#__codelineno-21-68"></a>net.ipv4.tcp_reordering = 5 # TCP流中重排序的数据报最大数量。一般推荐把这个数值略微调整大一些(默认：3)
</span><span id="__span-21-69"><a id="__codelineno-21-69" name="__codelineno-21-69" href="#__codelineno-21-69"></a>net.ipv4.tcp_retrans_collapse = 0  # 对于某些有bug的打印机提供针对其bug的兼容性。一般不需要这个支持,可以关闭它(默认：1)
</span><span id="__span-21-70"><a id="__codelineno-21-70" name="__codelineno-21-70" href="#__codelineno-21-70"></a>net.ipv4.tcp_app_win = 31   # 保留max_window/2^tcp_app_win数量的用于应用缓存，0表示不需要缓存(默认：31)
</span><span id="__span-21-71"><a id="__codelineno-21-71" name="__codelineno-21-71" href="#__codelineno-21-71"></a>net.ipv4.tcp_adv_win_scale = 2  # 计算缓冲开销(默认：2)
</span><span id="__span-21-72"><a id="__codelineno-21-72" name="__codelineno-21-72" href="#__codelineno-21-72"></a>net.ipv4.tcp_low_latency = 0    # 允许tcp/ip栈在高吞吐下低延迟，一般禁用，但在beowulf集群中打开很有帮助(默认：0)
</span><span id="__span-21-73"><a id="__codelineno-21-73" name="__codelineno-21-73" href="#__codelineno-21-73"></a>net.ipv4.tcp_westwood = 0   # 启用发送端的拥塞控制算法，可对带宽利用情况进行优化(默认：0)
</span><span id="__span-21-74"><a id="__codelineno-21-74" name="__codelineno-21-74" href="#__codelineno-21-74"></a>net.ipv4.tcp_bic = 0    # 为快速长距离网络启用binary increase congestion；可更好利用(默认：0)
</span><span id="__span-21-75"><a id="__codelineno-21-75" name="__codelineno-21-75" href="#__codelineno-21-75"></a>net.ipv4.ip_local_port_range = 1024 65000   # 对外连接端口范围，RHEL 7 default: 32768 61000
</span><span id="__span-21-76"><a id="__codelineno-21-76" name="__codelineno-21-76" href="#__codelineno-21-76"></a>net.ipv4.ip_conntrack_max = 65536   # 系统最大支持的ipv4连接数(默认：65536)，但如果内存128M以下，最大只有8192
</span><span id="__span-21-77"><a id="__codelineno-21-77" name="__codelineno-21-77" href="#__codelineno-21-77"></a>net.ipv4.tcp_syncookies = 1 # 开启SYN Cookies，当出现SYN等待队列溢出时，启用cookies来处理，可以做SYN洪水攻击保护(默认：0)
</span><span id="__span-21-78"><a id="__codelineno-21-78" name="__codelineno-21-78" href="#__codelineno-21-78"></a>net.ipv4.tcp_syn_retries = 3        # 在内核放弃建立连接之前发送SYN包的数量,此值不应大于255，默认是5，高负载物理
</span><span id="__span-21-79"><a id="__codelineno-21-79" name="__codelineno-21-79" href="#__codelineno-21-79"></a>                                    通信良好时，建议为2，此值仅针对对外连接，对进来的连接则由tcp_retries决定
</span><span id="__span-21-80"><a id="__codelineno-21-80" name="__codelineno-21-80" href="#__codelineno-21-80"></a>net.ipv4.tcp_synack_retries = 2 # 对于远端的连接请求SYN，内核会发送SYN+ACK数据包以确认收到上一个SYN请求。即三次握手的第二次握手
</span><span id="__span-21-81"><a id="__codelineno-21-81" name="__codelineno-21-81" href="#__codelineno-21-81"></a>                                此设置决定内核放弃连接之前发送SYN+ACK包的数量，不应大于255，默认为5
</span><span id="__span-21-82"><a id="__codelineno-21-82" name="__codelineno-21-82" href="#__codelineno-21-82"></a>net.ipv4.tcp_fin_timeout = 15   # 此参数决定了TCP连接保持在FIN-WAIT-2状态的时间，(默认60s，建议15-30s)对于生成或支持高级别网络
</span><span id="__span-21-83"><a id="__codelineno-21-83" name="__codelineno-21-83" href="#__codelineno-21-83"></a>                                流量的工作负载或系统，此值设置到10秒以下
</span><span id="__span-21-84"><a id="__codelineno-21-84" name="__codelineno-21-84" href="#__codelineno-21-84"></a>net.ipv4.tcp_max_syn_backlog = 2048 # 记录尚未收到客户端确认信息的连接请求的最大值，内存大于128Mb默认1024，内存小于128时，则值
</span><span id="__span-21-85"><a id="__codelineno-21-85" name="__codelineno-21-85" href="#__codelineno-21-85"></a>                                      默认时128,服务器过载时可增加此值
</span><span id="__span-21-86"><a id="__codelineno-21-86" name="__codelineno-21-86" href="#__codelineno-21-86"></a>net.ipv4.tcp_limit_output_bytes = 131072 # 默认是262144字节；限制设备上的字节数，以减少较大队列大小导致的延迟效应；对于延迟优先
</span><span id="__span-21-87"><a id="__codelineno-21-87" name="__codelineno-21-87" href="#__codelineno-21-87"></a>                                         级高于吞吐量的工作负载或环境，降低此值可以改善延迟，推荐131072字节
</span><span id="__span-21-88"><a id="__codelineno-21-88" name="__codelineno-21-88" href="#__codelineno-21-88"></a>
</span><span id="__span-21-89"><a id="__codelineno-21-89" name="__codelineno-21-89" href="#__codelineno-21-89"></a><span class="gh"># 增加time-wait存储池大小可防止简单DOS攻击</span>
</span><span id="__span-21-90"><a id="__codelineno-21-90" name="__codelineno-21-90" href="#__codelineno-21-90"></a>net.ipv4.tcp_max_tw_buckets = 1440000 # 指定允许在任何时间存在的“time-wait”状态的最大sockets数。如果超过最大值，则会立即销毁处于
</span><span id="__span-21-91"><a id="__codelineno-21-91" name="__codelineno-21-91" href="#__codelineno-21-91"></a>                                    “time-wait”状态的套接字并显示警告。此设置用于阻止某些类型的拒绝服务攻击。在降低此值之前应小心
</span><span id="__span-21-92"><a id="__codelineno-21-92" name="__codelineno-21-92" href="#__codelineno-21-92"></a>                                    谨慎。更改后，应增加其值，尤其是在系统中添加了更多内存或网络需求较高且环境较少受外部威胁影响时
</span><span id="__span-21-93"><a id="__codelineno-21-93" name="__codelineno-21-93" href="#__codelineno-21-93"></a>                                    默认262144，当网络需求很高且环境较少受到外部威胁时，可以增加到450000
</span><span id="__span-21-94"><a id="__codelineno-21-94" name="__codelineno-21-94" href="#__codelineno-21-94"></a>net.ipv4.tcp_tw_recycle = 1 # 开启TCP连接中time_wait sockets的快速回收,默认为0
</span><span id="__span-21-95"><a id="__codelineno-21-95" name="__codelineno-21-95" href="#__codelineno-21-95"></a>net.ipv4.tcp_tw_reuse = 1   # 开启TCP连接复用，允许将time_wait sockets重新用于新的TCP连接(主要针对time_wait连接)启用后，此参数
</span><span id="__span-21-96"><a id="__codelineno-21-96" name="__codelineno-21-96" href="#__codelineno-21-96"></a>                            可以绕过通常与套接字创建相关的分配和初始化开销，从而节省CPU周期，系统负载和时间
</span><span id="__span-21-97"><a id="__codelineno-21-97" name="__codelineno-21-97" href="#__codelineno-21-97"></a>net.ipv4.tcp_max_orphans = 32768  # 告诉内核有多少TCP套接字未附加到系统保留的任何用户文件句柄的最大数量,如果超过此数量，则立即重置
</span><span id="__span-21-98"><a id="__codelineno-21-98" name="__codelineno-21-98" href="#__codelineno-21-98"></a>                                    孤立连接并打印警告。此限制仅用于防止简单的DoS攻击，但不能人为地依赖此限制或降低限制，而是增加
</span><span id="__span-21-99"><a id="__codelineno-21-99" name="__codelineno-21-99" href="#__codelineno-21-99"></a>                                    它（可能在增加已安装的内存之后），如果网络条件需要超过默认值，调整网络服务以延迟并更积极地杀死
</span><span id="__span-21-100"><a id="__codelineno-21-100" name="__codelineno-21-100" href="#__codelineno-21-100"></a>                                    这些状态。再次提醒：每个orphan都会吃掉大约64K的unswappable内存(默认：8192)
</span><span id="__span-21-101"><a id="__codelineno-21-101" name="__codelineno-21-101" href="#__codelineno-21-101"></a>
</span><span id="__span-21-102"><a id="__codelineno-21-102" name="__codelineno-21-102" href="#__codelineno-21-102"></a><span class="gh"># 增加读取缓冲区空间</span>
</span><span id="__span-21-103"><a id="__codelineno-21-103" name="__codelineno-21-103" href="#__codelineno-21-103"></a>net.ipv4.udp_rmem_min = 16384
</span><span id="__span-21-104"><a id="__codelineno-21-104" name="__codelineno-21-104" href="#__codelineno-21-104"></a>net.ipv4.tcp_rmem = 4096 87380 25165824 # 三个值表示TCP套接字接收缓冲区的最小值、默认值和最大值
</span><span id="__span-21-105"><a id="__codelineno-21-105" name="__codelineno-21-105" href="#__codelineno-21-105"></a>
</span><span id="__span-21-106"><a id="__codelineno-21-106" name="__codelineno-21-106" href="#__codelineno-21-106"></a><span class="gh"># 增加可分配的写缓冲区空间</span>
</span><span id="__span-21-107"><a id="__codelineno-21-107" name="__codelineno-21-107" href="#__codelineno-21-107"></a>net.ipv4.udp_wmem_min = 16384
</span><span id="__span-21-108"><a id="__codelineno-21-108" name="__codelineno-21-108" href="#__codelineno-21-108"></a>net.ipv4.tcp_wmem = 4096 65536 25165824 # 三个参数依次为：最小值，默认值和最大值；最小值表示新创建的
</span><span id="__span-21-109"><a id="__codelineno-21-109" name="__codelineno-21-109" href="#__codelineno-21-109"></a>                                            套接字作为其创建的一部分有权获得的最小接收缓冲区大小；默认值表示TCP套接字接收缓冲区的
</span><span id="__span-21-110"><a id="__codelineno-21-110" name="__codelineno-21-110" href="#__codelineno-21-110"></a>                                            初始大小；最大值表示TCP套接字的自动调整发送缓冲区的最大接收缓冲区大小，该值不会覆盖
</span><span id="__span-21-111"><a id="__codelineno-21-111" name="__codelineno-21-111" href="#__codelineno-21-111"></a>                                            net.core.rmem_max。根据系统中可用的内存量，此设置的默认值介于64K字节和4M字节之间
</span><span id="__span-21-112"><a id="__codelineno-21-112" name="__codelineno-21-112" href="#__codelineno-21-112"></a>                                            建议使用16M字节或更高的最大值（取决于内核级别），尤其是10千兆位适配器
</span><span id="__span-21-113"><a id="__codelineno-21-113" name="__codelineno-21-113" href="#__codelineno-21-113"></a>
</span><span id="__span-21-114"><a id="__codelineno-21-114" name="__codelineno-21-114" href="#__codelineno-21-114"></a><span class="gh"># 增加可分配的最大总缓冲区空间,此为以page为单位（4096字节）测量</span>
</span><span id="__span-21-115"><a id="__codelineno-21-115" name="__codelineno-21-115" href="#__codelineno-21-115"></a>net.ipv4.udp_mem = 65536 131072 262144
</span><span id="__span-21-116"><a id="__codelineno-21-116" name="__codelineno-21-116" href="#__codelineno-21-116"></a>net.ipv4.tcp_mem = 65536 131072 262144  # 第一次低于此值,TCP没有内存压力,第二次进入内存压力阶段,
</span><span id="__span-21-117"><a id="__codelineno-21-117" name="__codelineno-21-117" href="#__codelineno-21-117"></a>                                        第三次TCP拒绝分配socket(默认：5814 7754 11628)
</span><span id="__span-21-118"><a id="__codelineno-21-118" name="__codelineno-21-118" href="#__codelineno-21-118"></a>
</span><span id="__span-21-119"><a id="__codelineno-21-119" name="__codelineno-21-119" href="#__codelineno-21-119"></a><span class="gh"># 下列参数设置后，文件所在目录及其目录下：/proc/sys/net/ipv4/conf/</span>
</span><span id="__span-21-120"><a id="__codelineno-21-120" name="__codelineno-21-120" href="#__codelineno-21-120"></a>
</span><span id="__span-21-121"><a id="__codelineno-21-121" name="__codelineno-21-121" href="#__codelineno-21-121"></a><span class="gh">#启用源路由核查功能，反向路径过滤</span>
</span><span id="__span-21-122"><a id="__codelineno-21-122" name="__codelineno-21-122" href="#__codelineno-21-122"></a><span class="gh"># 0 ——未进行源验证</span>
</span><span id="__span-21-123"><a id="__codelineno-21-123" name="__codelineno-21-123" href="#__codelineno-21-123"></a><span class="gh"># 1 ——处于如 RFC3704 所定义的严格模式</span>
</span><span id="__span-21-124"><a id="__codelineno-21-124" name="__codelineno-21-124" href="#__codelineno-21-124"></a><span class="gh"># 2 ——处于如 RFC3704 所定义的松散模式</span>
</span><span id="__span-21-125"><a id="__codelineno-21-125" name="__codelineno-21-125" href="#__codelineno-21-125"></a>net.ipv4.conf.all.rp_filter = 1
</span><span id="__span-21-126"><a id="__codelineno-21-126" name="__codelineno-21-126" href="#__codelineno-21-126"></a>net.ipv4.conf.default.rp_filter = 1
</span><span id="__span-21-127"><a id="__codelineno-21-127" name="__codelineno-21-127" href="#__codelineno-21-127"></a>
</span><span id="__span-21-128"><a id="__codelineno-21-128" name="__codelineno-21-128" href="#__codelineno-21-128"></a><span class="gh"># 确保无人能修改路由表</span>
</span><span id="__span-21-129"><a id="__codelineno-21-129" name="__codelineno-21-129" href="#__codelineno-21-129"></a>net.ipv4.conf.all.accept_redirects = 0
</span><span id="__span-21-130"><a id="__codelineno-21-130" name="__codelineno-21-130" href="#__codelineno-21-130"></a>net.ipv4.conf.all.secure_redirects = 0
</span><span id="__span-21-131"><a id="__codelineno-21-131" name="__codelineno-21-131" href="#__codelineno-21-131"></a>net.ipv4.conf.default.accept_redirects = 0  # 禁止icmp重定向检查
</span><span id="__span-21-132"><a id="__codelineno-21-132" name="__codelineno-21-132" href="#__codelineno-21-132"></a>net.ipv4.conf.default.secure_redirects = 0
</span><span id="__span-21-133"><a id="__codelineno-21-133" name="__codelineno-21-133" href="#__codelineno-21-133"></a>
</span><span id="__span-21-134"><a id="__codelineno-21-134" name="__codelineno-21-134" href="#__codelineno-21-134"></a><span class="gh"># 不充当路由器</span>
</span><span id="__span-21-135"><a id="__codelineno-21-135" name="__codelineno-21-135" href="#__codelineno-21-135"></a>net.ipv4.conf.all.send_redirects = 0
</span><span id="__span-21-136"><a id="__codelineno-21-136" name="__codelineno-21-136" href="#__codelineno-21-136"></a>net.ipv4.conf.default.send_redirects = 0
</span><span id="__span-21-137"><a id="__codelineno-21-137" name="__codelineno-21-137" href="#__codelineno-21-137"></a>
</span><span id="__span-21-138"><a id="__codelineno-21-138" name="__codelineno-21-138" href="#__codelineno-21-138"></a><span class="gh"># 记录在不可达的地址的数据包(错误的路由)；开启并记录欺骗、源路由、重定向数据包</span>
</span><span id="__span-21-139"><a id="__codelineno-21-139" name="__codelineno-21-139" href="#__codelineno-21-139"></a>net.ipv4.conf.all.log_martians = 1
</span><span id="__span-21-140"><a id="__codelineno-21-140" name="__codelineno-21-140" href="#__codelineno-21-140"></a>net.ipv4.conf.default.log_martians = 1
</span><span id="__span-21-141"><a id="__codelineno-21-141" name="__codelineno-21-141" href="#__codelineno-21-141"></a>
</span><span id="__span-21-142"><a id="__codelineno-21-142" name="__codelineno-21-142" href="#__codelineno-21-142"></a>net.ipv4.conf.all.accept_source_route = 0   # 处理无源路由的包
</span><span id="__span-21-143"><a id="__codelineno-21-143" name="__codelineno-21-143" href="#__codelineno-21-143"></a>net.ipv4.conf.default.accept_source_route = 0   # 禁用所有IP源路由
</span><span id="__span-21-144"><a id="__codelineno-21-144" name="__codelineno-21-144" href="#__codelineno-21-144"></a>
</span><span id="__span-21-145"><a id="__codelineno-21-145" name="__codelineno-21-145" href="#__codelineno-21-145"></a><span class="gh"># 下列参数设置后，文件所在目录下：/proc/sys/net/ipv4/route/</span>
</span><span id="__span-21-146"><a id="__codelineno-21-146" name="__codelineno-21-146" href="#__codelineno-21-146"></a>
</span><span id="__span-21-147"><a id="__codelineno-21-147" name="__codelineno-21-147" href="#__codelineno-21-147"></a>net.ipv4.route.gc_timeout = 100     # 路由刷新频率
</span><span id="__span-21-148"><a id="__codelineno-21-148" name="__codelineno-21-148" href="#__codelineno-21-148"></a>
</span><span id="__span-21-149"><a id="__codelineno-21-149" name="__codelineno-21-149" href="#__codelineno-21-149"></a><span class="gh"># 下列参数设置后，文件所在目录下(防火墙相关)：/proc/sys/net/netfilter/</span>
</span><span id="__span-21-150"><a id="__codelineno-21-150" name="__codelineno-21-150" href="#__codelineno-21-150"></a>
</span><span id="__span-21-151"><a id="__codelineno-21-151" name="__codelineno-21-151" href="#__codelineno-21-151"></a><span class="gh"># nf_conntrack是Linux内核连接跟踪的模块：与nf_conntrack相关的内核参数有三个：</span>
</span><span id="__span-21-152"><a id="__codelineno-21-152" name="__codelineno-21-152" href="#__codelineno-21-152"></a><span class="gh"># 1、nf_conntrack_max：连接跟踪表的大小，建议根据内存计算该值CONNTRACK_MAX = RAMSIZE (in bytes) / 16384 / (x / 32)</span>
</span><span id="__span-21-153"><a id="__codelineno-21-153" name="__codelineno-21-153" href="#__codelineno-21-153"></a>     并满足nf_conntrack_max=4*nf_conntrack_buckets，默认262144
</span><span id="__span-21-154"><a id="__codelineno-21-154" name="__codelineno-21-154" href="#__codelineno-21-154"></a><span class="gh"># 2、nf_conntrack_buckets：哈希表的大小，(nf_conntrack_max/nf_conntrack_buckets就是每条哈希记录链表的长度)，默认65536</span>
</span><span id="__span-21-155"><a id="__codelineno-21-155" name="__codelineno-21-155" href="#__codelineno-21-155"></a><span class="gh"># 3、nf_conntrack_tcp_timeout_established：tcp会话的超时时间，默认：432000 (5天)</span>
</span><span id="__span-21-156"><a id="__codelineno-21-156" name="__codelineno-21-156" href="#__codelineno-21-156"></a>
</span><span id="__span-21-157"><a id="__codelineno-21-157" name="__codelineno-21-157" href="#__codelineno-21-157"></a><span class="gh"># 以下为64内存推荐配置</span>
</span><span id="__span-21-158"><a id="__codelineno-21-158" name="__codelineno-21-158" href="#__codelineno-21-158"></a>net.nf_conntrack_max = 262144
</span><span id="__span-21-159"><a id="__codelineno-21-159" name="__codelineno-21-159" href="#__codelineno-21-159"></a>net.netfilter.nf_conntrack_max = 65536   # 系统支持的最大ipv4连接数(默认：65536)
</span><span id="__span-21-160"><a id="__codelineno-21-160" name="__codelineno-21-160" href="#__codelineno-21-160"></a>net.netfilter.nf_conntrack_tcp_timeout_established = 300 # 已建立的tcp连接超时时间(默认：43200，即5天)
</span><span id="__span-21-161"><a id="__codelineno-21-161" name="__codelineno-21-161" href="#__codelineno-21-161"></a>net.netfilter.nf_conntrack_buckets = 1048576(默认：65535)
</span><span id="__span-21-162"><a id="__codelineno-21-162" name="__codelineno-21-162" href="#__codelineno-21-162"></a>net.netfilter.nf_conntrack_tcp_timeout_time_wait = 30  # time_wait状态超时时间，超过该时间就清除该连接(默认：120)
</span><span id="__span-21-163"><a id="__codelineno-21-163" name="__codelineno-21-163" href="#__codelineno-21-163"></a>net.netfilter.nf_conntrack_tcp_timeout_close_wait = 60  # close_wait状态超时时间，超过该时间就清除该连接(默认：60)
</span><span id="__span-21-164"><a id="__codelineno-21-164" name="__codelineno-21-164" href="#__codelineno-21-164"></a>net.netfilter.nf_conntrack_tcp_timeout_fin_wait = 30    # fin_wait状态超时时间，超过该时间就清除该连接(默认：120)
</span></code></pre></div>
<h2 id="_10">不常用设置和记录<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<h3 id="_11">服务器配置双机互信<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># 服务器1的IP：192.168.1.1   服务器2的IP：192.168.1.2</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="c1"># 在两台服务器上分别按照以下步骤操作</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w">   </span><span class="c1"># 创建公钥和密钥</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>cat<span class="w"> </span>~/.ssh/id_rsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>authorized_keys<span class="w">    </span><span class="c1"># 将自己的公钥追加到认证公钥</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="c1"># 将公钥互相复制到对应的主机</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="c1"># 方法一:使用ssh-copy-id命令</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>ssh-copy-id<span class="w"> </span>-i<span class="w"> </span>/root/.ssh/id_rsa.pub<span class="w"> </span>root@192.168.1.2<span class="w"> </span><span class="c1"># 在1主机执行，复制公钥到远程主机192.168.1.2,cat追加公钥到authorized_keys</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>ssh-copy-id<span class="w"> </span>-i<span class="w"> </span>/root/.ssh/id_rsa.pub<span class="w"> </span>root@192.168.1.1<span class="w"> </span><span class="c1"># 在2主机执行，复制公钥到远程主机192.168.1.1,cat追加公钥到authorized_keys</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="c1"># 方法二：使用ssh命令并用cat追加到authorized_keys中</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>ssh<span class="w"> </span><span class="m">192</span>.168.1.2<span class="w"> </span>cat<span class="w"> </span>~/.ssh/id_rsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>authorized_keys<span class="w">    </span><span class="c1"># 在服务器1上操作，将服务器2的公钥追加到认证公钥</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>ssh<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w"> </span>cat<span class="w"> </span>~/.ssh/id_rsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>authorized_keys<span class="w">    </span><span class="c1"># 在服务器2上操作，将服务器1的公钥追加到认证公钥</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>ssh<span class="w"> </span><span class="m">192</span>.168.1.2<span class="w"> </span>ifconfig<span class="w">    </span><span class="c1"># 测试,在服务器1上执行下面的命令，如果配置正确的话就无需输入密码也能显示服务器2的网卡信息</span>
</span></code></pre></div>
<h3 id="centospythonyum">centos完全重装python和yum<a class="headerlink" href="#centospythonyum" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># 删除现有Python</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>rpm<span class="w"> </span>-qa<span class="p">|</span>grep<span class="w"> </span>python<span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>rpm<span class="w"> </span>-ev<span class="w"> </span>--allmatches<span class="w"> </span>--nodeps<span class="w"> </span><span class="c1"># 强制删除已安装程序及其关联</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>whereis<span class="w"> </span>python<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>rm<span class="w"> </span>-frv<span class="w"> </span><span class="c1"># 删除所有残余文件,xargs，允许你对输出执行其他某些命令</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>whereis<span class="w"> </span>python<span class="w"> </span><span class="c1"># 验证删除，返回无结果</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="c1"># 删除现有的yum</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>rpm<span class="w"> </span>-qa<span class="p">|</span>grep<span class="w"> </span>yum<span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>rpm<span class="w"> </span>-ev<span class="w"> </span>--allmatches<span class="w"> </span>--nodeps
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>whereis<span class="w"> </span>yum<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>rm<span class="w"> </span>-frv
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="c1"># 从http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/下载相应的包,由于源中版本会更新，具体请查看URL中的版本！</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>rpm<span class="w"> </span>-Uvh<span class="w"> </span>--replacepkgs<span class="w"> </span>*.rpm<span class="w">    </span><span class="c1"># 可能之间还需要zlib和zlib-devel包，根据情况下载并安装！安装完进行测试</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="c1"># 源码编译安装yum</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>wget<span class="w"> </span>http://yum.baseurl.org/download/3.4/yum-3.4.3.tar.gz
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>tar<span class="w"> </span>xvf<span class="w"> </span>yum-3.4.3.tar.gz<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>yum-3.4.3
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>yummain.py<span class="w"> </span>install<span class="w"> </span>yum
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="c1"># 如果结果提示错误： CRITICAL:yum.cli:Config Error: Error accessing file for config file:///etc/缺少配置文件</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="c1"># 在etc目录下面新建yum.conf文件，然后再次运行 yummain.py install yum，顺利完成安装</span>
</span></code></pre></div>
<h3 id="root">普通账号赋予root权限<a class="headerlink" href="#root" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># 建议使用方法二，不要轻易使用方法三</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="s"># 方法一： 修改 /etc/sudoers 文件，找到%wheel一行，把前面的注释（#）去掉</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="s">Allows people in group wheel to run all commands</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="s">%wheel    ALL=(ALL)    ALL</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="s">然后修改用户，使其属于root组（wheel），命令如下：</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="s">#usermod -g root tommy</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="s">修改完毕，现在可以用tommy帐号登录，然后用命令 sudo su - ，即可获得root权限进行操作</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="s">comment</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="s"># 方法二： 修改 /etc/sudoers 文件，找到root一行，在root下面添加一行，如下所示：</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="s">Allow root to run any commands anywhere</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="s">root    ALL=(ALL)     ALL</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="s">tommy   ALL=(ALL)     ALL</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="s">修改完毕，现在可以用tommy帐号登录，然后用命令 sudo su - ，即可获得root权限进行操作</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="s">comment</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="s"># 方法三： 修改 /etc/passwd 文件，找到如下行，把用户ID修改为 0 ，如下所示：</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="s">tommy:x:500:500:tommy:/home/tommy:/bin/bash</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="s">修改后如下</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="s">tommy:x:0:500:tommy:/home/tommy:/bin/bash</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="s">保存，用tommy账户登录后，直接获取的就是root帐号的权限</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="s">comment</span>
</span></code></pre></div>
<h3 id="-float-ipip">未采用双机热备防止服务中断--float IP(浮动IP配置)<a class="headerlink" href="#-float-ipip" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="s">有两台Linux服务器，其中一台主机（IP：192.168.2.2）对外提供了一定的网络服务，另一台从机（IP：192.168.2.3）能提供相同的服务，但IP地址</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="s">没有对外部公开,客户端连接的都是192.168.2.2这个IP地址，如果主机故障，则会使网络服务暂时中断</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="s">由于没有采用双机热备份技术,考虑用Linux脚本来实现简单的浮动IP技术，当主机故障时从机获得192.168.2.2这个IP，暂时替代主机提供服务，当主机</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="s">恢复时，从机自动释放这个IP</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="s">思路：</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="s">利用单个网卡绑定多个IP地址的技术和crontab自动执行技术</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="s">为主机的网卡多绑定一个静态IP，如192.168.2.8,这个地址便于从机判断的</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="s">为从机的网卡多绑定一个动态IP，127.0.0.1，它在主机故障时将会被脚本修改为192.168.2.2</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="s">在从机上添加一个脚本 /root/autoFloatIP.sh，使用crontab技术让这个脚本每分钟执行一次，这个脚本的作用是判断主机的地址192.168.2.8能否</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="s">Ping通，一旦不正常则将让自己的网卡多余的那个IP地址改为192.168.2.2，如果主机恢复，则将这个地址改回为127.0.0.1</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="s">comment</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="c1"># 步骤如下：</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="c1"># 1. 为主机添加一个静态IP192.168.2.8，在/etc/sysconfig/network-scripts目录修改类似ifcfg-eth0:1的文件，内容为:</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="nv">DEVICE</span><span class="o">=</span>eth0:1
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="nv">IPADDR</span><span class="o">=</span><span class="m">139</span>.24.214.82
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a><span class="nv">NETMASK</span><span class="o">=</span><span class="w"> </span><span class="m">255</span>.255.255.0
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a><span class="nv">ONBOOT</span><span class="o">=</span><span class="w"> </span>yes
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a><span class="c1"># 2. 在从机上，在/root下建立一个脚本autoFloatIP.sh,内容如下：</span>
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a><span class="c1">#!/bin/bash</span>
</span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a><span class="nv">c1</span><span class="o">=</span><span class="k">$(</span>ping<span class="w"> </span><span class="m">139</span>.24.214.82<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="p">|</span>grep<span class="w"> </span>Unreachable<span class="p">|</span>wc<span class="w"> </span>-l<span class="k">)</span>
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$c1</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a><span class="nv">c2</span><span class="o">=</span><span class="k">$(</span>ping<span class="w"> </span><span class="m">139</span>.24.214.82<span class="w"> </span>-c<span class="w"> </span><span class="m">10</span><span class="p">|</span>grep<span class="w"> </span>Unreachable<span class="p">|</span>wc<span class="w"> </span>-l<span class="k">)</span>
</span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$c2</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a><span class="w">    </span><span class="nv">c3</span><span class="o">=</span><span class="k">$(</span>ping<span class="w"> </span><span class="m">139</span>.24.214.22<span class="w"> </span>-c<span class="w"> </span><span class="m">10</span><span class="p">|</span>grep<span class="w"> </span>Unreachable<span class="p">|</span>wc<span class="w"> </span>-l<span class="k">)</span>
</span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$c3</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a><span class="w">         </span>/sbin/ifconfig<span class="w"> </span>eth0:1<span class="w"> </span><span class="m">139</span>.24.214.22<span class="w"> </span>netmask<span class="w"> </span><span class="m">255</span>.255.254.0
</span><span id="__span-25-30"><a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;float ip to 22&quot;</span>
</span><span id="__span-25-31"><a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a><span class="w">      </span><span class="k">fi</span>
</span><span id="__span-25-32"><a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a><span class="k">fi</span>
</span><span id="__span-25-33"><a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;can not connect&quot;</span>
</span><span id="__span-25-34"><a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a><span class="k">else</span>
</span><span id="__span-25-35"><a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a><span class="nv">c4</span><span class="o">=</span><span class="k">$(</span>/sbin/ifconfig<span class="p">|</span>grep<span class="w"> </span><span class="m">139</span>.24.214.22<span class="p">|</span>wc<span class="w"> </span>-l<span class="k">)</span>
</span><span id="__span-25-36"><a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$c4</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-25-37"><a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a><span class="w">    </span>/sbin/ifconfig<span class="w"> </span>eth0:2<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>netmask<span class="w"> </span><span class="m">255</span>.255.254.0
</span><span id="__span-25-38"><a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;reset ip&quot;</span>
</span><span id="__span-25-39"><a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a><span class="k">fi</span>
</span><span id="__span-25-40"><a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;connection is ok&quot;</span>
</span><span id="__span-25-41"><a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a><span class="k">fi</span>
</span><span id="__span-25-42"><a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>
</span><span id="__span-25-43"><a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a><span class="c1"># 其中关键的命令如下，用这个方法来动态修改IP，动态IP在电脑重启会消失</span>
</span><span id="__span-25-44"><a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a>/sbin/ifconfig<span class="w"> </span>eth0:1<span class="w"> </span><span class="m">139</span>.24.214.22<span class="w"> </span>netmask<span class="w"> </span><span class="m">255</span>.255.254.0
</span><span id="__span-25-45"><a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a>/sbin/ifconfig<span class="w"> </span>eth0:2<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>netmask<span class="w"> </span><span class="m">255</span>.255.254.0
</span><span id="__span-25-46"><a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a>
</span><span id="__span-25-47"><a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a><span class="c1"># 3. 从机上建立crontab，加上如下一行并保存</span>
</span><span id="__span-25-48"><a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>/root/autoFloatIP.sh<span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</span></code></pre></div>
<h3 id="centosip">安装最新稳定centos内核&amp;更改为静态ip、网卡名称<a class="headerlink" href="#centosip" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># 在CentOS主机上安装最新的稳定内核</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="c1"># 导入key（内核3.0以上需要导入key）,如果已经修改了repo的gpgcheck=0也可以不导入key</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>rpm<span class="w"> </span>--import<span class="w"> </span>https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="c1"># To install ELRepo for RHEL-6, SL-6 or CentOS-6</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>rpm<span class="w"> </span>-Uvh<span class="w"> </span>http://www.elrepo.org/elrepo-release-6-8.el6.elrepo.noarch.rpm
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="c1"># 安装elrepo的yum源,To install ELRepo for RHEL-7, SL-7 or CentOS-7</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>rpm<span class="w"> </span>-Uvh<span class="w"> </span>http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="c1"># 安装内核,在yum的ELRepo源中，有mainline颁布的，可以这样安装</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>yum<span class="w"> </span>--enablerepo<span class="o">=</span>elrepo-kernel<span class="w"> </span>install<span class="w">  </span>kernel-ml-devel<span class="w"> </span>kernel-ml<span class="w"> </span>-y
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>yum<span class="w"> </span>--enablerepo<span class="o">=</span>elrepo-kernel<span class="w">  </span>install<span class="w">  </span>kernel-lt<span class="w"> </span>-y<span class="w">   </span><span class="c1"># 安装long term的内核</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="c1"># 配置Grub使用新内核，配置完后重启启用新内核</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="c1">## CentOS 6配置，修改/boot/grub/grub.conf</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">  </span><span class="nv">default</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="c1"># 更改为 0</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">  </span><span class="nv">fallback</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="c1"># 添加此项</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="c1">## CentOS 7</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>grub2-set-default<span class="w"> </span><span class="m">0</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>grub2-install<span class="w"> </span>/dev/sda
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>grub2-mkconfig<span class="w"> </span>-o<span class="w"> </span>/boot/grub2/grub.cfg
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="c1"># 更改为静态IP：/etc/sysconfig/network-scripts/ifcfg-ens33</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a><span class="nv">BOOTPROTO</span><span class="o">=</span><span class="s2">&quot;static&quot;</span><span class="w"> </span><span class="c1">#dhcp改为static</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="nv">ONBOOT</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="w"> </span><span class="c1">#开机启用本配置</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="nv">IPADDR</span><span class="o">=</span><span class="m">192</span>.168.7.106<span class="w"> </span><span class="c1">#静态IP</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="nv">GATEWAY</span><span class="o">=</span><span class="m">192</span>.168.7.1<span class="w"> </span><span class="c1">#默认网关</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="nv">NETMASK</span><span class="o">=</span><span class="m">255</span>.255.255.0<span class="w"> </span><span class="c1">#子网掩码</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="nv">DNS1</span><span class="o">=</span><span class="m">192</span>.168.7.1<span class="w"> </span><span class="c1">#DNS 配置</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a>vim<span class="w"> </span>/etc/sysconfig/grub<span class="w">     </span><span class="c1"># 编辑 grub 配置文件,实际是/etc/default/grub的软连接</span>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a><span class="c1"># 为GRUB_CMDLINE_LINUX变量增加2个参数，具体内容如下(加粗)：</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a><span class="nv">GRUB_CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&quot;crashkernel=auto rd.lvm.lv=cl/root rd.lvm.lv=cl/swap net.ifnames=0 biosdevname=0 rhgb quiet&quot;</span>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a><span class="c1"># 重新生成 grub 配置文件，然后重新启动 Linux 操作系统，通过 ip addr 可以看到网卡名称已经变为 eth0</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a>grub2-mkconfig<span class="w"> </span>-o<span class="w"> </span>/boot/grub2/grub.cfg
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a><span class="c1"># 修改网卡配置文件，原网卡配置文件名称为 ifcfg-ens33，这里需要修改为ethx的格式，并适当调整网卡配置文件</span>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a>mv<span class="w"> </span>/etc/sysconfig/network-scripts/ifcfg-ens33<span class="w"> </span>/etc/sysconfig/network-scripts/ifcfg-eth0
</span><span id="__span-26-38"><a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a><span class="c1"># 修改ifcfg-eth0文件如下内容(其它内容不变)</span>
</span><span id="__span-26-39"><a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a><span class="nv">NAME</span><span class="o">=</span>eth0
</span><span id="__span-26-40"><a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a><span class="nv">DEVICE</span><span class="o">=</span>eth0
</span><span id="__span-26-41"><a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a>
</span><span id="__span-26-42"><a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>network.service<span class="w">    </span><span class="c1"># 重启网络服务，注意：ifcfg-ens33 文件最好删除掉，否则重启 network 服务时候会报错</span>
</span></code></pre></div>
<h2 id="linux_5">Linux数据恢复：最好是备份而不是尝试恢复<a class="headerlink" href="#linux_5" title="Permanent link">&para;</a></h2>
<h3 id="systemrescuecd">SystemRescueCd<a class="headerlink" href="#systemrescuecd" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># 官网：http://www.system-rescue-cd.org/</span>
</span></code></pre></div>
<h3 id="_12">其他<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="gh"># 参考链接：https://help.ubuntu.com/community/DataRecovery</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>情况一：丢失分区：如果分区出错且分区表不显示该分区，只要未向该空间写入数据，则数据仍会存在
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="gh"># GNU Parted</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="k">1.</span> 使用live cd或额外系统，进入系统终端首先执行，swapoff -a，挂载问题磁盘
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="k">2.</span> 运行partted，parted /dev/sda,这里/dev/sda表示需要恢复的设备
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="k">3.</span> 运行恢复选项：rescue START END，如果找到潜在的分区则会提示是否添加到分区表中
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="gh"># Testdisk</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>testdisk也可以恢复分区。安装testdisk软件包。 运行testdisk，它将扫描您的计算机中的介质，并为您提供菜单驱动的方法来恢复分区
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="gh"># Gpart</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>安装gpart，执行gpart /dev/sda，/dev/sda表示需要恢复的设备,最好是gpart -W /dev/sda /dev/sdb写入到另一个设备
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>情况二：映像损坏的设备，文件系统或驱动器
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a><span class="gh"># GNU ddrescue(安装后命令为ddrescue)</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>网址：http://www.gnu.org/software/ddrescue/ddrescue.html
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span class="gh"># dd_rescue</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>网址：http://www.garloff.de/kurt/linux/ddrescue/
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>
</span><span id="__span-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>如果您正在成像的文件系统的大小大于4 gig，则将无法使用MSDOS（VFAT）文件系统（通常在USB驱动器上找到）来存储图像，因为最大大小限制为4G
</span><span id="__span-28-24"><a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a>这样的文件系统上的文件。 使用EXT3或其他可以处理此类文件大小的文件系统
</span><span id="__span-28-25"><a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>
</span><span id="__span-28-26"><a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a><span class="gh"># 将在/dev/hd2的分区恢复到/dev/hdb2</span>
</span><span id="__span-28-27"><a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a>ddrescue -r3 /dev/hda2 /dev/hdb2 logfie
</span><span id="__span-28-28"><a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a>e2fsck -v -f /dev/hdb2
</span><span id="__span-28-29"><a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a>mount -t ext2 -o ro /dev/hdb2 /mnt
</span><span id="__span-28-30"><a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a>
</span><span id="__span-28-31"><a id="__codelineno-28-31" name="__codelineno-28-31" href="#__codelineno-28-31"></a><span class="gh"># 恢复在/dev/cdrom中的一个CD-ROM,将cdimage写入空白的CD-ROM</span>
</span><span id="__span-28-32"><a id="__codelineno-28-32" name="__codelineno-28-32" href="#__codelineno-28-32"></a>ddrescue -b 2048 /dev/cdrom cdimage logfie
</span><span id="__span-28-33"><a id="__codelineno-28-33" name="__codelineno-28-33" href="#__codelineno-28-33"></a>
</span><span id="__span-28-34"><a id="__codelineno-28-34" name="__codelineno-28-34" href="#__codelineno-28-34"></a>从恢复的映像提取文件系统来恢复文件
</span><span id="__span-28-35"><a id="__codelineno-28-35" name="__codelineno-28-35" href="#__codelineno-28-35"></a>安装sleuthkit软件
</span><span id="__span-28-36"><a id="__codelineno-28-36" name="__codelineno-28-36" href="#__codelineno-28-36"></a>mmls file -b    此命令来显示在映像中找到的分区
</span><span id="__span-28-37"><a id="__codelineno-28-37" name="__codelineno-28-37" href="#__codelineno-28-37"></a>mount -o loop,offset=16384 file mnt 显示多个分区，此示例从块32处安装dos分区，计算字节数需要乘512，得出16384
</span><span id="__span-28-38"><a id="__codelineno-28-38" name="__codelineno-28-38" href="#__codelineno-28-38"></a>mount -t ntfs -or,force,loop,offset=32256 file mnt  挂载windows创建的ntfs分区(63乘512=32256)
</span><span id="__span-28-39"><a id="__codelineno-28-39" name="__codelineno-28-39" href="#__codelineno-28-39"></a>
</span><span id="__span-28-40"><a id="__codelineno-28-40" name="__codelineno-28-40" href="#__codelineno-28-40"></a>利用foremost恢复文件,假设需要恢复的是/dev/hda
</span><span id="__span-28-41"><a id="__codelineno-28-41" name="__codelineno-28-41" href="#__codelineno-28-41"></a>foremost -i /dev/hda -o /recovery/foremost
</span><span id="__span-28-42"><a id="__codelineno-28-42" name="__codelineno-28-42" href="#__codelineno-28-42"></a>foremost -t jpg -i /dev/hda -o /recovery/foremost  恢复特定类型文件
</span><span id="__span-28-43"><a id="__codelineno-28-43" name="__codelineno-28-43" href="#__codelineno-28-43"></a>
</span><span id="__span-28-44"><a id="__codelineno-28-44" name="__codelineno-28-44" href="#__codelineno-28-44"></a>scalpel软件也可用来恢复：scalpel File -o dir  File是映像文件或设备，dir是输出目录
</span><span id="__span-28-45"><a id="__codelineno-28-45" name="__codelineno-28-45" href="#__codelineno-28-45"></a>
</span><span id="__span-28-46"><a id="__codelineno-28-46" name="__codelineno-28-46" href="#__codelineno-28-46"></a>magicrescue使用magic bytes扫描文件来识别文件的存在和类型
</span><span id="__span-28-47"><a id="__codelineno-28-47" name="__codelineno-28-47" href="#__codelineno-28-47"></a>从/dev/sda1分区恢复gzip和png文件：magicrescue -r gzip -r png -d~/output /dev/sda1
</span><span id="__span-28-48"><a id="__codelineno-28-48" name="__codelineno-28-48" href="#__codelineno-28-48"></a>
</span><span id="__span-28-49"><a id="__codelineno-28-49" name="__codelineno-28-49" href="#__codelineno-28-49"></a>Photorec旨在从数码相机的内存或硬盘中恢复丢失的照片，已扩展支持80多种不同类型文件，photorec是testdisk软件包的一部分
</span><span id="__span-28-50"><a id="__codelineno-28-50" name="__codelineno-28-50" href="#__codelineno-28-50"></a>
</span><span id="__span-28-51"><a id="__codelineno-28-51" name="__codelineno-28-51" href="#__codelineno-28-51"></a>ntfsprogs可以从NTFS系统恢复已删除文件，Windows和linux下都有此软件，大致有三种模式：
</span><span id="__span-28-52"><a id="__codelineno-28-52" name="__codelineno-28-52" href="#__codelineno-28-52"></a><span class="k">1.</span> 扫描：搜索已删除的文件并查找有关它们的信息，nftsundelete /dev/sda1
</span><span id="__span-28-53"><a id="__codelineno-28-53" name="__codelineno-28-53" href="#__codelineno-28-53"></a><span class="k">2.</span> 取消删除：ntfsundelete /dev/sda1 -u -i 3689 -o work.doc -d~/output
</span><span id="__span-28-54"><a id="__codelineno-28-54" name="__codelineno-28-54" href="#__codelineno-28-54"></a><span class="k">3.</span> 复制：ntfsdelete /dev/sda1 -u -m *.jpg
</span><span id="__span-28-55"><a id="__codelineno-28-55" name="__codelineno-28-55" href="#__codelineno-28-55"></a>ntfsundelete /dev/sda1 -u -i 14159  根据文件的inode恢复
</span><span id="__span-28-56"><a id="__codelineno-28-56" name="__codelineno-28-56" href="#__codelineno-28-56"></a>
</span><span id="__span-28-57"><a id="__codelineno-28-57" name="__codelineno-28-57" href="#__codelineno-28-57"></a>sleuth kit和autopsy是两个基于GUI的恢复软件
</span><span id="__span-28-58"><a id="__codelineno-28-58" name="__codelineno-28-58" href="#__codelineno-28-58"></a>
</span><span id="__span-28-59"><a id="__codelineno-28-59" name="__codelineno-28-59" href="#__codelineno-28-59"></a><span class="gh"># extundelete 主页：http://extundelete.sourceforge.net/</span>
</span><span id="__span-28-60"><a id="__codelineno-28-60" name="__codelineno-28-60" href="#__codelineno-28-60"></a>下载地址：http://nchc.dl.sourceforge.net/project/extundelete/extundelete/0.2.0/extundelete-0.2.0.tar.bz2
</span><span id="__span-28-61"><a id="__codelineno-28-61" name="__codelineno-28-61" href="#__codelineno-28-61"></a>ubuntu用户可直接安装: apt-get install extundelete
</span><span id="__span-28-62"><a id="__codelineno-28-62" name="__codelineno-28-62" href="#__codelineno-28-62"></a>./configure &amp;&amp; make &amp;&amp; make install    # 如果提示找不到ext2fs库，使用 yum -y install e2fsprogs* 安装
</span><span id="__span-28-63"><a id="__codelineno-28-63" name="__codelineno-28-63" href="#__codelineno-28-63"></a>
</span><span id="__span-28-64"><a id="__codelineno-28-64" name="__codelineno-28-64" href="#__codelineno-28-64"></a><span class="gh"># 数据恢复</span>
</span><span id="__span-28-65"><a id="__codelineno-28-65" name="__codelineno-28-65" href="#__codelineno-28-65"></a><span class="k">1.</span> 卸载需要恢复文件的分区
</span><span id="__span-28-66"><a id="__codelineno-28-66" name="__codelineno-28-66" href="#__codelineno-28-66"></a>fuser -k /mnt/test/               &lt;-- 结束使用某分区的进程树
</span><span id="__span-28-67"><a id="__codelineno-28-67" name="__codelineno-28-67" href="#__codelineno-28-67"></a>umount /mnt/test                  &lt;-- 卸载分区
</span><span id="__span-28-68"><a id="__codelineno-28-68" name="__codelineno-28-68" href="#__codelineno-28-68"></a>
</span><span id="__span-28-69"><a id="__codelineno-28-69" name="__codelineno-28-69" href="#__codelineno-28-69"></a><span class="k">2.</span> 使用extundelete查看分区上存在的文件
</span><span id="__span-28-70"><a id="__codelineno-28-70" name="__codelineno-28-70" href="#__codelineno-28-70"></a>extundelete --inode 2 /dev/sdb1    # --inode为查找某i节点中的内容，使用2则说明为搜索，如果需进入目录搜索，只须要指定目录I节点即可
</span><span id="__span-28-71"><a id="__codelineno-28-71" name="__codelineno-28-71" href="#__codelineno-28-71"></a>
</span><span id="__span-28-72"><a id="__codelineno-28-72" name="__codelineno-28-72" href="#__codelineno-28-72"></a><span class="gh"># --restore-inode 恢复指定的I节点文件，默认全将恢复出来的文件放在当前路径RECOVERED_FILES/ 目录下，文件名为 file.I节点号</span>
</span><span id="__span-28-73"><a id="__codelineno-28-73" name="__codelineno-28-73" href="#__codelineno-28-73"></a>extundelete --restore-inode 13 /dev/sdb1
</span><span id="__span-28-74"><a id="__codelineno-28-74" name="__codelineno-28-74" href="#__codelineno-28-74"></a>
</span><span id="__span-28-75"><a id="__codelineno-28-75" name="__codelineno-28-75" href="#__codelineno-28-75"></a>ls RECOVERED_FILES/
</span><span id="__span-28-76"><a id="__codelineno-28-76" name="__codelineno-28-76" href="#__codelineno-28-76"></a>mount /dev/sdb1 /mnt/test/
</span><span id="__span-28-77"><a id="__codelineno-28-77" name="__codelineno-28-77" href="#__codelineno-28-77"></a>mv RECOVERED_FILES/file.13 /mnt/test/resolv.conf
</span><span id="__span-28-78"><a id="__codelineno-28-78" name="__codelineno-28-78" href="#__codelineno-28-78"></a>mv RECOVERED_FILES/file.14 /mnt/test/hosts
</span><span id="__span-28-79"><a id="__codelineno-28-79" name="__codelineno-28-79" href="#__codelineno-28-79"></a>cat /mnt/test/hosts            # 查看被恢复出来的文件 是否与源文件一致
</span><span id="__span-28-80"><a id="__codelineno-28-80" name="__codelineno-28-80" href="#__codelineno-28-80"></a>cat /mnt/test/resolv.conf
</span></code></pre></div>
<h2 id="_13">基本服务搭建<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<h3 id="_14">时间同步<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>http://www.ntp.org
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>https://chrony.tuxfamily.org
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="gu">## ntp配置</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>driftfile /var/lib/ntp/drift
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="gh"># Permit time synchronization with our time source, but do not</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="gh"># permit the source to query or modify the service on this system.</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>restrict default nomodify notrap nopeer noquery
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="gh"># Permit all access over the loopback interface.  This could</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="gh"># be tightened as well, but to do so would effect some of</span>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="gh"># the administrative functions.</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>restrict 127.0.0.1
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>restrict ::1
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="gh"># Hosts on local network are less restricted.</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="gh">#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="gh"># Use public servers from the pool.ntp.org project.</span>
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="gh"># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>server 0.centos.pool.ntp.org iburst
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>server 1.centos.pool.ntp.org iburst
</span><span id="__span-29-25"><a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a>server 2.centos.pool.ntp.org iburst
</span><span id="__span-29-26"><a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a>server 3.centos.pool.ntp.org iburst
</span><span id="__span-29-27"><a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a>
</span><span id="__span-29-28"><a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a><span class="gh">#broadcast 192.168.1.255 autokey        # broadcast server</span>
</span><span id="__span-29-29"><a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a><span class="gh">#broadcastclient                        # broadcast client</span>
</span><span id="__span-29-30"><a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a><span class="gh">#broadcast 224.0.1.1 autokey            # multicast server</span>
</span><span id="__span-29-31"><a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a><span class="gh">#multicastclient 224.0.1.1              # multicast client</span>
</span><span id="__span-29-32"><a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a><span class="gh">#manycastserver 239.255.254.254         # manycast server</span>
</span><span id="__span-29-33"><a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a><span class="gh">#manycastclient 239.255.254.254 autokey # manycast client</span>
</span><span id="__span-29-34"><a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a>
</span><span id="__span-29-35"><a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a><span class="gh"># Enable public key cryptography.</span>
</span><span id="__span-29-36"><a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a><span class="gh">#crypto</span>
</span><span id="__span-29-37"><a id="__codelineno-29-37" name="__codelineno-29-37" href="#__codelineno-29-37"></a>
</span><span id="__span-29-38"><a id="__codelineno-29-38" name="__codelineno-29-38" href="#__codelineno-29-38"></a>includefile /etc/ntp/crypto/pw
</span><span id="__span-29-39"><a id="__codelineno-29-39" name="__codelineno-29-39" href="#__codelineno-29-39"></a>
</span><span id="__span-29-40"><a id="__codelineno-29-40" name="__codelineno-29-40" href="#__codelineno-29-40"></a><span class="gh"># Key file containing the keys and key identifiers used when operating</span>
</span><span id="__span-29-41"><a id="__codelineno-29-41" name="__codelineno-29-41" href="#__codelineno-29-41"></a><span class="gh"># with symmetric key cryptography.</span>
</span><span id="__span-29-42"><a id="__codelineno-29-42" name="__codelineno-29-42" href="#__codelineno-29-42"></a>keys /etc/ntp/keys
</span><span id="__span-29-43"><a id="__codelineno-29-43" name="__codelineno-29-43" href="#__codelineno-29-43"></a>
</span><span id="__span-29-44"><a id="__codelineno-29-44" name="__codelineno-29-44" href="#__codelineno-29-44"></a><span class="gh"># Specify the key identifiers which are trusted.</span>
</span><span id="__span-29-45"><a id="__codelineno-29-45" name="__codelineno-29-45" href="#__codelineno-29-45"></a><span class="gh">#trustedkey 4 8 42</span>
</span><span id="__span-29-46"><a id="__codelineno-29-46" name="__codelineno-29-46" href="#__codelineno-29-46"></a>
</span><span id="__span-29-47"><a id="__codelineno-29-47" name="__codelineno-29-47" href="#__codelineno-29-47"></a><span class="gh"># Specify the key identifier to use with the ntpdc utility.</span>
</span><span id="__span-29-48"><a id="__codelineno-29-48" name="__codelineno-29-48" href="#__codelineno-29-48"></a><span class="gh">#requestkey 8</span>
</span><span id="__span-29-49"><a id="__codelineno-29-49" name="__codelineno-29-49" href="#__codelineno-29-49"></a>
</span><span id="__span-29-50"><a id="__codelineno-29-50" name="__codelineno-29-50" href="#__codelineno-29-50"></a><span class="gh"># Specify the key identifier to use with the ntpq utility.</span>
</span><span id="__span-29-51"><a id="__codelineno-29-51" name="__codelineno-29-51" href="#__codelineno-29-51"></a><span class="gh">#controlkey 8</span>
</span><span id="__span-29-52"><a id="__codelineno-29-52" name="__codelineno-29-52" href="#__codelineno-29-52"></a>
</span><span id="__span-29-53"><a id="__codelineno-29-53" name="__codelineno-29-53" href="#__codelineno-29-53"></a><span class="gh"># Enable writing of statistics records.</span>
</span><span id="__span-29-54"><a id="__codelineno-29-54" name="__codelineno-29-54" href="#__codelineno-29-54"></a><span class="gh">#statistics clockstats cryptostats loopstats peerstats</span>
</span><span id="__span-29-55"><a id="__codelineno-29-55" name="__codelineno-29-55" href="#__codelineno-29-55"></a>
</span><span id="__span-29-56"><a id="__codelineno-29-56" name="__codelineno-29-56" href="#__codelineno-29-56"></a><span class="gh"># Disable the monitoring facility to prevent amplification attacks using ntpdc</span>
</span><span id="__span-29-57"><a id="__codelineno-29-57" name="__codelineno-29-57" href="#__codelineno-29-57"></a><span class="gh"># monlist command when default restrict does not include the noquery flag. See</span>
</span><span id="__span-29-58"><a id="__codelineno-29-58" name="__codelineno-29-58" href="#__codelineno-29-58"></a><span class="gh"># CVE-2013-5211 for more details.</span>
</span><span id="__span-29-59"><a id="__codelineno-29-59" name="__codelineno-29-59" href="#__codelineno-29-59"></a><span class="gh"># Note: Monitoring will not be disabled with the limited restriction flag.</span>
</span><span id="__span-29-60"><a id="__codelineno-29-60" name="__codelineno-29-60" href="#__codelineno-29-60"></a>disable monitor
</span><span id="__span-29-61"><a id="__codelineno-29-61" name="__codelineno-29-61" href="#__codelineno-29-61"></a>
</span><span id="__span-29-62"><a id="__codelineno-29-62" name="__codelineno-29-62" href="#__codelineno-29-62"></a>----------------------------------------------------------------------------------------------------------------------
</span><span id="__span-29-63"><a id="__codelineno-29-63" name="__codelineno-29-63" href="#__codelineno-29-63"></a>
</span><span id="__span-29-64"><a id="__codelineno-29-64" name="__codelineno-29-64" href="#__codelineno-29-64"></a><span class="gu">## 内外网隔离情况chrony master client配置</span>
</span><span id="__span-29-65"><a id="__codelineno-29-65" name="__codelineno-29-65" href="#__codelineno-29-65"></a><span class="gh"># Master,假设网段为192.168.165.x</span>
</span><span id="__span-29-66"><a id="__codelineno-29-66" name="__codelineno-29-66" href="#__codelineno-29-66"></a>initstepslew 1 client1 client3 client6
</span><span id="__span-29-67"><a id="__codelineno-29-67" name="__codelineno-29-67" href="#__codelineno-29-67"></a>driftfile /var/lib/chrony/drift
</span><span id="__span-29-68"><a id="__codelineno-29-68" name="__codelineno-29-68" href="#__codelineno-29-68"></a>local stratum 8
</span><span id="__span-29-69"><a id="__codelineno-29-69" name="__codelineno-29-69" href="#__codelineno-29-69"></a>manual
</span><span id="__span-29-70"><a id="__codelineno-29-70" name="__codelineno-29-70" href="#__codelineno-29-70"></a>allow 192.168.165.0/24
</span><span id="__span-29-71"><a id="__codelineno-29-71" name="__codelineno-29-71" href="#__codelineno-29-71"></a>smoothtime 400 0.01
</span><span id="__span-29-72"><a id="__codelineno-29-72" name="__codelineno-29-72" href="#__codelineno-29-72"></a>rtcsync
</span><span id="__span-29-73"><a id="__codelineno-29-73" name="__codelineno-29-73" href="#__codelineno-29-73"></a>
</span><span id="__span-29-74"><a id="__codelineno-29-74" name="__codelineno-29-74" href="#__codelineno-29-74"></a><span class="gh"># Client,客户端均是相同配置</span>
</span><span id="__span-29-75"><a id="__codelineno-29-75" name="__codelineno-29-75" href="#__codelineno-29-75"></a>server master iburst
</span><span id="__span-29-76"><a id="__codelineno-29-76" name="__codelineno-29-76" href="#__codelineno-29-76"></a>driftfile /var/lib/chrony/drift
</span><span id="__span-29-77"><a id="__codelineno-29-77" name="__codelineno-29-77" href="#__codelineno-29-77"></a>allow 192.168.165.0/24
</span><span id="__span-29-78"><a id="__codelineno-29-78" name="__codelineno-29-78" href="#__codelineno-29-78"></a>makestep 1.0 3
</span><span id="__span-29-79"><a id="__codelineno-29-79" name="__codelineno-29-79" href="#__codelineno-29-79"></a>rtcsync
</span><span id="__span-29-80"><a id="__codelineno-29-80" name="__codelineno-29-80" href="#__codelineno-29-80"></a>
</span><span id="__span-29-81"><a id="__codelineno-29-81" name="__codelineno-29-81" href="#__codelineno-29-81"></a>
</span><span id="__span-29-82"><a id="__codelineno-29-82" name="__codelineno-29-82" href="#__codelineno-29-82"></a>如果没有合适的计算机被指定为主服务器，或者要求即使客户端出现故障也要使客户端保持同步 ，则本地指令的orphan选项将启用一种特殊模式，
</span><span id="__span-29-83"><a id="__codelineno-29-83" name="__codelineno-29-83" href="#__codelineno-29-83"></a>在该模式下，可以从多台计算机中自动选择主服务器。他们都需要使用相同的 本地配置并相互轮询。具有最小引用ID（基于其IP地址）的服务器将
</span><span id="__span-29-84"><a id="__codelineno-29-84" name="__codelineno-29-84" href="#__codelineno-29-84"></a>充当主服务器的角色，其他服务器将与其同步。当它失败时，具有第二小的参考ID的服务器将接管等
</span><span id="__span-29-85"><a id="__codelineno-29-85" name="__codelineno-29-85" href="#__codelineno-29-85"></a>
</span><span id="__span-29-86"><a id="__codelineno-29-86" name="__codelineno-29-86" href="#__codelineno-29-86"></a>第一个服务器的配置文件可能是(假设有三个服务器分别称为master1，master2和master3)。
</span><span id="__span-29-87"><a id="__codelineno-29-87" name="__codelineno-29-87" href="#__codelineno-29-87"></a>其他服务器将是相同的，`但要修改initstepslew和server指令中的主机名以指定其他服务器`。他们的客户端可能配置为轮询所有三台服务器
</span><span id="__span-29-88"><a id="__codelineno-29-88" name="__codelineno-29-88" href="#__codelineno-29-88"></a>initstepslew 1 master2 master3
</span><span id="__span-29-89"><a id="__codelineno-29-89" name="__codelineno-29-89" href="#__codelineno-29-89"></a>server master2
</span><span id="__span-29-90"><a id="__codelineno-29-90" name="__codelineno-29-90" href="#__codelineno-29-90"></a>server master3
</span><span id="__span-29-91"><a id="__codelineno-29-91" name="__codelineno-29-91" href="#__codelineno-29-91"></a>driftfile /var/lib/chrony/drift
</span><span id="__span-29-92"><a id="__codelineno-29-92" name="__codelineno-29-92" href="#__codelineno-29-92"></a>local stratum 8 orphan
</span><span id="__span-29-93"><a id="__codelineno-29-93" name="__codelineno-29-93" href="#__codelineno-29-93"></a>manual
</span><span id="__span-29-94"><a id="__codelineno-29-94" name="__codelineno-29-94" href="#__codelineno-29-94"></a>allow 192.168.165.0/24
</span><span id="__span-29-95"><a id="__codelineno-29-95" name="__codelineno-29-95" href="#__codelineno-29-95"></a>rtcsync
</span><span id="__span-29-96"><a id="__codelineno-29-96" name="__codelineno-29-96" href="#__codelineno-29-96"></a>
</span><span id="__span-29-97"><a id="__codelineno-29-97" name="__codelineno-29-97" href="#__codelineno-29-97"></a>-----------------------------------------------------------------------------------------------------------------------
</span><span id="__span-29-98"><a id="__codelineno-29-98" name="__codelineno-29-98" href="#__codelineno-29-98"></a>
</span><span id="__span-29-99"><a id="__codelineno-29-99" name="__codelineno-29-99" href="#__codelineno-29-99"></a><span class="gu">## chrony配置</span>
</span><span id="__span-29-100"><a id="__codelineno-29-100" name="__codelineno-29-100" href="#__codelineno-29-100"></a>
</span><span id="__span-29-101"><a id="__codelineno-29-101" name="__codelineno-29-101" href="#__codelineno-29-101"></a><span class="gh"># Use public servers from the pool.ntp.org project.</span>
</span><span id="__span-29-102"><a id="__codelineno-29-102" name="__codelineno-29-102" href="#__codelineno-29-102"></a><span class="gh"># Please consider joining the pool (http://www.pool.ntp.org/join.html).[必须要有]</span>
</span><span id="__span-29-103"><a id="__codelineno-29-103" name="__codelineno-29-103" href="#__codelineno-29-103"></a>server 0.centos.pool.ntp.org iburst
</span><span id="__span-29-104"><a id="__codelineno-29-104" name="__codelineno-29-104" href="#__codelineno-29-104"></a>server 1.centos.pool.ntp.org iburst
</span><span id="__span-29-105"><a id="__codelineno-29-105" name="__codelineno-29-105" href="#__codelineno-29-105"></a>server 2.centos.pool.ntp.org iburst
</span><span id="__span-29-106"><a id="__codelineno-29-106" name="__codelineno-29-106" href="#__codelineno-29-106"></a>server 3.centos.pool.ntp.org iburst
</span><span id="__span-29-107"><a id="__codelineno-29-107" name="__codelineno-29-107" href="#__codelineno-29-107"></a>
</span><span id="__span-29-108"><a id="__codelineno-29-108" name="__codelineno-29-108" href="#__codelineno-29-108"></a><span class="gh"># Record the rate at which the system clock gains/losses time.[必须要有]</span>
</span><span id="__span-29-109"><a id="__codelineno-29-109" name="__codelineno-29-109" href="#__codelineno-29-109"></a>driftfile /var/lib/chrony/drift
</span><span id="__span-29-110"><a id="__codelineno-29-110" name="__codelineno-29-110" href="#__codelineno-29-110"></a>
</span><span id="__span-29-111"><a id="__codelineno-29-111" name="__codelineno-29-111" href="#__codelineno-29-111"></a><span class="gh"># Allow the system clock to be stepped in the first three updates</span>
</span><span id="__span-29-112"><a id="__codelineno-29-112" name="__codelineno-29-112" href="#__codelineno-29-112"></a><span class="gh"># if its offset is larger than 1 second.[必须要有]</span>
</span><span id="__span-29-113"><a id="__codelineno-29-113" name="__codelineno-29-113" href="#__codelineno-29-113"></a>makestep 1.0 3
</span><span id="__span-29-114"><a id="__codelineno-29-114" name="__codelineno-29-114" href="#__codelineno-29-114"></a>
</span><span id="__span-29-115"><a id="__codelineno-29-115" name="__codelineno-29-115" href="#__codelineno-29-115"></a><span class="gh"># Enable kernel synchronization of the real-time clock (RTC).[必须要有]</span>
</span><span id="__span-29-116"><a id="__codelineno-29-116" name="__codelineno-29-116" href="#__codelineno-29-116"></a>rtcsync
</span><span id="__span-29-117"><a id="__codelineno-29-117" name="__codelineno-29-117" href="#__codelineno-29-117"></a>
</span><span id="__span-29-118"><a id="__codelineno-29-118" name="__codelineno-29-118" href="#__codelineno-29-118"></a><span class="gh"># Enable hardware timestamping on all interfaces that support it.</span>
</span><span id="__span-29-119"><a id="__codelineno-29-119" name="__codelineno-29-119" href="#__codelineno-29-119"></a><span class="gh">#hwtimestamp *</span>
</span><span id="__span-29-120"><a id="__codelineno-29-120" name="__codelineno-29-120" href="#__codelineno-29-120"></a>
</span><span id="__span-29-121"><a id="__codelineno-29-121" name="__codelineno-29-121" href="#__codelineno-29-121"></a><span class="gh"># Increase the minimum number of selectable sources required to adjust</span>
</span><span id="__span-29-122"><a id="__codelineno-29-122" name="__codelineno-29-122" href="#__codelineno-29-122"></a><span class="gh"># the system clock.</span>
</span><span id="__span-29-123"><a id="__codelineno-29-123" name="__codelineno-29-123" href="#__codelineno-29-123"></a><span class="gh">#minsources 2</span>
</span><span id="__span-29-124"><a id="__codelineno-29-124" name="__codelineno-29-124" href="#__codelineno-29-124"></a>
</span><span id="__span-29-125"><a id="__codelineno-29-125" name="__codelineno-29-125" href="#__codelineno-29-125"></a><span class="gh"># Allow NTP client access from local network.</span>
</span><span id="__span-29-126"><a id="__codelineno-29-126" name="__codelineno-29-126" href="#__codelineno-29-126"></a><span class="gh">#allow 192.168.0.0/16</span>
</span><span id="__span-29-127"><a id="__codelineno-29-127" name="__codelineno-29-127" href="#__codelineno-29-127"></a>
</span><span id="__span-29-128"><a id="__codelineno-29-128" name="__codelineno-29-128" href="#__codelineno-29-128"></a><span class="gh"># Serve time even if not synchronized to a time source.</span>
</span><span id="__span-29-129"><a id="__codelineno-29-129" name="__codelineno-29-129" href="#__codelineno-29-129"></a><span class="gh">#local stratum 10</span>
</span><span id="__span-29-130"><a id="__codelineno-29-130" name="__codelineno-29-130" href="#__codelineno-29-130"></a>
</span><span id="__span-29-131"><a id="__codelineno-29-131" name="__codelineno-29-131" href="#__codelineno-29-131"></a><span class="gh"># Specify file containing keys for NTP authentication.</span>
</span><span id="__span-29-132"><a id="__codelineno-29-132" name="__codelineno-29-132" href="#__codelineno-29-132"></a><span class="gh">#keyfile /etc/chrony.keys</span>
</span><span id="__span-29-133"><a id="__codelineno-29-133" name="__codelineno-29-133" href="#__codelineno-29-133"></a>
</span><span id="__span-29-134"><a id="__codelineno-29-134" name="__codelineno-29-134" href="#__codelineno-29-134"></a><span class="gh"># Specify directory for log files.</span>
</span><span id="__span-29-135"><a id="__codelineno-29-135" name="__codelineno-29-135" href="#__codelineno-29-135"></a>logdir /var/log/chrony
</span><span id="__span-29-136"><a id="__codelineno-29-136" name="__codelineno-29-136" href="#__codelineno-29-136"></a>
</span><span id="__span-29-137"><a id="__codelineno-29-137" name="__codelineno-29-137" href="#__codelineno-29-137"></a><span class="gh"># Select which information is logged.</span>
</span><span id="__span-29-138"><a id="__codelineno-29-138" name="__codelineno-29-138" href="#__codelineno-29-138"></a><span class="gh">#log measurements statistics tracking</span>
</span></code></pre></div>
<h3 id="vsftp">Vsftp<a class="headerlink" href="#vsftp" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>VSFTPv3.0.3版本配置vsftpd.conf文件详解
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>官网链接：https://security.appspot.com/vsftpd/vsftpd_conf.html
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>vsftpd.conf的格式非常简单。每一行都是注释或指令。注释行以＃开头并被忽略。指令行的格式为：选项=值
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>重要的是要注意在选项和值之间的=放置任何空格是错误的。每个设置都有一个默认编译，可以在配置文件中修改
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>/etc/rc.d/init.d/vsftpd # 启动脚本
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>/etc/pam.d/vsftpd   # PAM认证文件
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>/etc/vsftpd/ftpusers    # 禁止使用Vsftpd的用户列表文件
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>/etc/vsftpd/user_list   # 禁止或允许使用Vsftpd的用户列表文件
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>/var/ftp    # 匿名用户主目录
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="gu">## 基本参数</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="gh"># 接受匿名用户</span>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>anonymous_enable=YES
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="gh"># 匿名用户login时不询问口令,匿名用户直接登录</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>no_anon_password=YES
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>
</span><span id="__span-30-21"><a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a><span class="gh"># 匿名用户主目录</span>
</span><span id="__span-30-22"><a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a>anon_root=(none)
</span><span id="__span-30-23"><a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a>
</span><span id="__span-30-24"><a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="gh"># 是否允许本地登录，若启用则可以使用/etc/passwd中普通用户账号登录</span>
</span><span id="__span-30-25"><a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a><span class="gh"># 必须启用此功能才能是任何非匿名用户登录，包括虚拟用户</span>
</span><span id="__span-30-26"><a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>local_enable=YES
</span><span id="__span-30-27"><a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a>
</span><span id="__span-30-28"><a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a><span class="gh"># 本地用户(即非匿名用户)主目录</span>
</span><span id="__span-30-29"><a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a>local_root=(none)
</span><span id="__span-30-30"><a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a>
</span><span id="__span-30-31"><a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a><span class="gh"># 如果匿名用户需要密码,那么使用banned_email_file里面的电子邮件地址的用户不能登录</span>
</span><span id="__span-30-32"><a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a><span class="gh"># 设置为YES则使用/etc/vsftpd.banned_emails中指定的电子邮件密码的所有匿名用户都将被拒绝访问服务器</span>
</span><span id="__span-30-33"><a id="__codelineno-30-33" name="__codelineno-30-33" href="#__codelineno-30-33"></a><span class="gh"># 默认情况下包含此列表的文件为/etc/vsftpd.banned_emails,设置为YES时，必须存在此文件</span>
</span><span id="__span-30-34"><a id="__codelineno-30-34" name="__codelineno-30-34" href="#__codelineno-30-34"></a>deny_email_enable=YES
</span><span id="__span-30-35"><a id="__codelineno-30-35" name="__codelineno-30-35" href="#__codelineno-30-35"></a>
</span><span id="__span-30-36"><a id="__codelineno-30-36" name="__codelineno-30-36" href="#__codelineno-30-36"></a><span class="gh"># 仅在没有pam验证版本时有用,是否检查用户在/etc/shell有一个有效的shell来登录</span>
</span><span id="__span-30-37"><a id="__codelineno-30-37" name="__codelineno-30-37" href="#__codelineno-30-37"></a>check_shell=YES
</span><span id="__span-30-38"><a id="__codelineno-30-38" name="__codelineno-30-38" href="#__codelineno-30-38"></a>
</span><span id="__span-30-39"><a id="__codelineno-30-39" name="__codelineno-30-39" href="#__codelineno-30-39"></a><span class="gh"># userlist_enable=YES,userlist_deny=YES时,ftpusers和user_list均不能访问,只能本地用户访问</span>
</span><span id="__span-30-40"><a id="__codelineno-30-40" name="__codelineno-30-40" href="#__codelineno-30-40"></a><span class="gh"># userlist_enable=YES,userlist_deny=NO时,只允许userlist中用户访问</span>
</span><span id="__span-30-41"><a id="__codelineno-30-41" name="__codelineno-30-41" href="#__codelineno-30-41"></a><span class="gh"># userlist_enable=NO,userlist_deny=YES时,禁止ftpusers只允许userlist和本地用户</span>
</span><span id="__span-30-42"><a id="__codelineno-30-42" name="__codelineno-30-42" href="#__codelineno-30-42"></a>userlist_enable=YES
</span><span id="__span-30-43"><a id="__codelineno-30-43" name="__codelineno-30-43" href="#__codelineno-30-43"></a>userlist_deny=NO
</span><span id="__span-30-44"><a id="__codelineno-30-44" name="__codelineno-30-44" href="#__codelineno-30-44"></a>
</span><span id="__span-30-45"><a id="__codelineno-30-45" name="__codelineno-30-45" href="#__codelineno-30-45"></a><span class="gh"># 如果和chroot_local_user一起开启,则可以基于每个用户指定chroot()的监禁目录，每个用户的监禁都是从/etc/passwd中的主目录字符串派生</span>
</span><span id="__span-30-46"><a id="__codelineno-30-46" name="__codelineno-30-46" href="#__codelineno-30-46"></a>passwd_chroot_enable=NO
</span><span id="__span-30-47"><a id="__codelineno-30-47" name="__codelineno-30-47" href="#__codelineno-30-47"></a>
</span><span id="__span-30-48"><a id="__codelineno-30-48" name="__codelineno-30-48" href="#__codelineno-30-48"></a><span class="gh"># 定义匿名登入的使用者名称。默认值为ftp</span>
</span><span id="__span-30-49"><a id="__codelineno-30-49" name="__codelineno-30-49" href="#__codelineno-30-49"></a>ftp_username=ftp
</span><span id="__span-30-50"><a id="__codelineno-30-50" name="__codelineno-30-50" href="#__codelineno-30-50"></a>
</span><span id="__span-30-51"><a id="__codelineno-30-51" name="__codelineno-30-51" href="#__codelineno-30-51"></a><span class="gu">## vsFTPd用户权限控制</span>
</span><span id="__span-30-52"><a id="__codelineno-30-52" name="__codelineno-30-52" href="#__codelineno-30-52"></a>
</span><span id="__span-30-53"><a id="__codelineno-30-53" name="__codelineno-30-53" href="#__codelineno-30-53"></a><span class="gh"># 控制是否允许任何更改文件系统的ftp命令，这些命令是：STOR，DELE，RNFR，RNTO，MKD，RMD，APPE和SITE；即可以上传(全局控制)</span>
</span><span id="__span-30-54"><a id="__codelineno-30-54" name="__codelineno-30-54" href="#__codelineno-30-54"></a>write_enable=YES
</span><span id="__span-30-55"><a id="__codelineno-30-55" name="__codelineno-30-55" href="#__codelineno-30-55"></a>
</span><span id="__span-30-56"><a id="__codelineno-30-56" name="__codelineno-30-56" href="#__codelineno-30-56"></a><span class="gh"># 本地用户上传文件的umask，若要指定八进制值，则前缀加0，否则视为十进制整数</span>
</span><span id="__span-30-57"><a id="__codelineno-30-57" name="__codelineno-30-57" href="#__codelineno-30-57"></a>local_umask=022 # 权限755；计算方法777-022=755
</span><span id="__span-30-58"><a id="__codelineno-30-58" name="__codelineno-30-58" href="#__codelineno-30-58"></a>
</span><span id="__span-30-59"><a id="__codelineno-30-59" name="__codelineno-30-59" href="#__codelineno-30-59"></a><span class="gh"># 上传文件的权限配合umask使用</span>
</span><span id="__span-30-60"><a id="__codelineno-30-60" name="__codelineno-30-60" href="#__codelineno-30-60"></a><span class="gh"># file_open_mode=0666</span>
</span><span id="__span-30-61"><a id="__codelineno-30-61" name="__codelineno-30-61" href="#__codelineno-30-61"></a>
</span><span id="__span-30-62"><a id="__codelineno-30-62" name="__codelineno-30-62" href="#__codelineno-30-62"></a><span class="gh"># 匿名用户可以上传，设为YES时必须激活write_enable选项</span>
</span><span id="__span-30-63"><a id="__codelineno-30-63" name="__codelineno-30-63" href="#__codelineno-30-63"></a>anon_upload_enable=NO
</span><span id="__span-30-64"><a id="__codelineno-30-64" name="__codelineno-30-64" href="#__codelineno-30-64"></a>
</span><span id="__span-30-65"><a id="__codelineno-30-65" name="__codelineno-30-65" href="#__codelineno-30-65"></a><span class="gh"># 匿名用户可以建目录，设为YES时必须激活write_enable选项</span>
</span><span id="__span-30-66"><a id="__codelineno-30-66" name="__codelineno-30-66" href="#__codelineno-30-66"></a>anon_mkdir_write_enable=NO
</span><span id="__span-30-67"><a id="__codelineno-30-67" name="__codelineno-30-67" href="#__codelineno-30-67"></a>
</span><span id="__span-30-68"><a id="__codelineno-30-68" name="__codelineno-30-68" href="#__codelineno-30-68"></a>匿名用户其它的写权利(更改权限),例如删除和重命名
</span><span id="__span-30-69"><a id="__codelineno-30-69" name="__codelineno-30-69" href="#__codelineno-30-69"></a>anon_other_write_enable=NO
</span><span id="__span-30-70"><a id="__codelineno-30-70" name="__codelineno-30-70" href="#__codelineno-30-70"></a>
</span><span id="__span-30-71"><a id="__codelineno-30-71" name="__codelineno-30-71" href="#__codelineno-30-71"></a>如果设为YES，匿名登入者会被允许下载可阅读的档案。默认值为YES
</span><span id="__span-30-72"><a id="__codelineno-30-72" name="__codelineno-30-72" href="#__codelineno-30-72"></a>anon_world_visible_only=YES
</span><span id="__span-30-73"><a id="__codelineno-30-73" name="__codelineno-30-73" href="#__codelineno-30-73"></a>
</span><span id="__span-30-74"><a id="__codelineno-30-74" name="__codelineno-30-74" href="#__codelineno-30-74"></a><span class="gh"># 如果开启,那么所有非匿名登陆的用户名都会被切换成guest_username指定的用户名,即都被认为时访客登录</span>
</span><span id="__span-30-75"><a id="__codelineno-30-75" name="__codelineno-30-75" href="#__codelineno-30-75"></a>guest_enable=NO
</span><span id="__span-30-76"><a id="__codelineno-30-76" name="__codelineno-30-76" href="#__codelineno-30-76"></a>
</span><span id="__span-30-77"><a id="__codelineno-30-77" name="__codelineno-30-77" href="#__codelineno-30-77"></a><span class="gh"># 所有匿名上传的文件的所属用户将会被更改成chown_username中指定用户</span>
</span><span id="__span-30-78"><a id="__codelineno-30-78" name="__codelineno-30-78" href="#__codelineno-30-78"></a>chown_uploads=YES
</span><span id="__span-30-79"><a id="__codelineno-30-79" name="__codelineno-30-79" href="#__codelineno-30-79"></a>
</span><span id="__span-30-80"><a id="__codelineno-30-80" name="__codelineno-30-80" href="#__codelineno-30-80"></a><span class="gh"># 匿名上传文件所属用户名，设置chown_uploads时此选项才生效</span>
</span><span id="__span-30-81"><a id="__codelineno-30-81" name="__codelineno-30-81" href="#__codelineno-30-81"></a>chown_username=lightwiter
</span><span id="__span-30-82"><a id="__codelineno-30-82" name="__codelineno-30-82" href="#__codelineno-30-82"></a>
</span><span id="__span-30-83"><a id="__codelineno-30-83" name="__codelineno-30-83" href="#__codelineno-30-83"></a><span class="gh"># 如果启动这项功能，则所有列在chroot_list_file之中的使用者不能更改根目录</span>
</span><span id="__span-30-84"><a id="__codelineno-30-84" name="__codelineno-30-84" href="#__codelineno-30-84"></a><span class="gh"># 默认包含此列表文件/etc/vsftpd.chroot_list但可以通过chroot_list_file设置覆盖</span>
</span><span id="__span-30-85"><a id="__codelineno-30-85" name="__codelineno-30-85" href="#__codelineno-30-85"></a>chroot_list_enable=YES
</span><span id="__span-30-86"><a id="__codelineno-30-86" name="__codelineno-30-86" href="#__codelineno-30-86"></a>
</span><span id="__span-30-87"><a id="__codelineno-30-87" name="__codelineno-30-87" href="#__codelineno-30-87"></a><span class="gh"># 设置为YES表示允许使用&quot;async ABOR&quot;命令,一般不用,容易出问题</span>
</span><span id="__span-30-88"><a id="__codelineno-30-88" name="__codelineno-30-88" href="#__codelineno-30-88"></a>async_abor_enable=NO
</span><span id="__span-30-89"><a id="__codelineno-30-89" name="__codelineno-30-89" href="#__codelineno-30-89"></a>
</span><span id="__span-30-90"><a id="__codelineno-30-90" name="__codelineno-30-90" href="#__codelineno-30-90"></a><span class="gh"># 管控是否可用ASCII 模式上传。默认值为NO</span>
</span><span id="__span-30-91"><a id="__codelineno-30-91" name="__codelineno-30-91" href="#__codelineno-30-91"></a>ascii_upload_enable=YES
</span><span id="__span-30-92"><a id="__codelineno-30-92" name="__codelineno-30-92" href="#__codelineno-30-92"></a>
</span><span id="__span-30-93"><a id="__codelineno-30-93" name="__codelineno-30-93" href="#__codelineno-30-93"></a><span class="gh"># 管控是否可用ASCII 模式下载。默认值为NO</span>
</span><span id="__span-30-94"><a id="__codelineno-30-94" name="__codelineno-30-94" href="#__codelineno-30-94"></a>ascii_download_enable=YES
</span><span id="__span-30-95"><a id="__codelineno-30-95" name="__codelineno-30-95" href="#__codelineno-30-95"></a>
</span><span id="__span-30-96"><a id="__codelineno-30-96" name="__codelineno-30-96" href="#__codelineno-30-96"></a><span class="gh"># 这个选项必须指定一个空的目录名称且任何登入者都不能有写入的权限，当vsftpd不需要文件系统访问时，可用作安全的chroot()监狱。默认值为/usr/share/empty</span>
</span><span id="__span-30-97"><a id="__codelineno-30-97" name="__codelineno-30-97" href="#__codelineno-30-97"></a>secure_chroot_dir=/usr/share/empty
</span><span id="__span-30-98"><a id="__codelineno-30-98" name="__codelineno-30-98" href="#__codelineno-30-98"></a>
</span><span id="__span-30-99"><a id="__codelineno-30-99" name="__codelineno-30-99" href="#__codelineno-30-99"></a><span class="gu">## vsFTPd超时设置</span>
</span><span id="__span-30-100"><a id="__codelineno-30-100" name="__codelineno-30-100" href="#__codelineno-30-100"></a>
</span><span id="__span-30-101"><a id="__codelineno-30-101" name="__codelineno-30-101" href="#__codelineno-30-101"></a><span class="gh"># 空闲连接超时(以秒为单位)</span>
</span><span id="__span-30-102"><a id="__codelineno-30-102" name="__codelineno-30-102" href="#__codelineno-30-102"></a>idle_session_timeout=600
</span><span id="__span-30-103"><a id="__codelineno-30-103" name="__codelineno-30-103" href="#__codelineno-30-103"></a>
</span><span id="__span-30-104"><a id="__codelineno-30-104" name="__codelineno-30-104" href="#__codelineno-30-104"></a><span class="gh"># 数据传输超时，允许数据传输暂停而不进行任何操作的最长时间</span>
</span><span id="__span-30-105"><a id="__codelineno-30-105" name="__codelineno-30-105" href="#__codelineno-30-105"></a>data_connection_timeout=300
</span><span id="__span-30-106"><a id="__codelineno-30-106" name="__codelineno-30-106" href="#__codelineno-30-106"></a>
</span><span id="__span-30-107"><a id="__codelineno-30-107" name="__codelineno-30-107" href="#__codelineno-30-107"></a><span class="gh"># PAVS请求超时</span>
</span><span id="__span-30-108"><a id="__codelineno-30-108" name="__codelineno-30-108" href="#__codelineno-30-108"></a>ACCEPT_TIMEOUT=60
</span><span id="__span-30-109"><a id="__codelineno-30-109" name="__codelineno-30-109" href="#__codelineno-30-109"></a>
</span><span id="__span-30-110"><a id="__codelineno-30-110" name="__codelineno-30-110" href="#__codelineno-30-110"></a><span class="gh"># PROT模式连接超时</span>
</span><span id="__span-30-111"><a id="__codelineno-30-111" name="__codelineno-30-111" href="#__codelineno-30-111"></a>connect_timeout=60
</span><span id="__span-30-112"><a id="__codelineno-30-112" name="__codelineno-30-112" href="#__codelineno-30-112"></a>
</span><span id="__span-30-113"><a id="__codelineno-30-113" name="__codelineno-30-113" href="#__codelineno-30-113"></a><span class="gu">## vsFTPd 服务器功能选项</span>
</span><span id="__span-30-114"><a id="__codelineno-30-114" name="__codelineno-30-114" href="#__codelineno-30-114"></a>
</span><span id="__span-30-115"><a id="__codelineno-30-115" name="__codelineno-30-115" href="#__codelineno-30-115"></a><span class="gh"># 开启日记功能</span>
</span><span id="__span-30-116"><a id="__codelineno-30-116" name="__codelineno-30-116" href="#__codelineno-30-116"></a>xferlog_enable=YES
</span><span id="__span-30-117"><a id="__codelineno-30-117" name="__codelineno-30-117" href="#__codelineno-30-117"></a>
</span><span id="__span-30-118"><a id="__codelineno-30-118" name="__codelineno-30-118" href="#__codelineno-30-118"></a><span class="gh"># 使用标准格式</span>
</span><span id="__span-30-119"><a id="__codelineno-30-119" name="__codelineno-30-119" href="#__codelineno-30-119"></a>xferlog_std_format=YES
</span><span id="__span-30-120"><a id="__codelineno-30-120" name="__codelineno-30-120" href="#__codelineno-30-120"></a>
</span><span id="__span-30-121"><a id="__codelineno-30-121" name="__codelineno-30-121" href="#__codelineno-30-121"></a><span class="gh"># 当xferlog_std_format关闭且本选项开启时,记录所有ftp请求和回复,当调试比较有用</span>
</span><span id="__span-30-122"><a id="__codelineno-30-122" name="__codelineno-30-122" href="#__codelineno-30-122"></a>log_ftp_protocol=NO
</span><span id="__span-30-123"><a id="__codelineno-30-123" name="__codelineno-30-123" href="#__codelineno-30-123"></a>
</span><span id="__span-30-124"><a id="__codelineno-30-124" name="__codelineno-30-124" href="#__codelineno-30-124"></a><span class="gh"># 允许使用pasv模式</span>
</span><span id="__span-30-125"><a id="__codelineno-30-125" name="__codelineno-30-125" href="#__codelineno-30-125"></a>pasv_enable=YES
</span><span id="__span-30-126"><a id="__codelineno-30-126" name="__codelineno-30-126" href="#__codelineno-30-126"></a>
</span><span id="__span-30-127"><a id="__codelineno-30-127" name="__codelineno-30-127" href="#__codelineno-30-127"></a><span class="gh"># 关闭安全检查</span>
</span><span id="__span-30-128"><a id="__codelineno-30-128" name="__codelineno-30-128" href="#__codelineno-30-128"></a><span class="gh"># pasv_promiscuous+NO</span>
</span><span id="__span-30-129"><a id="__codelineno-30-129" name="__codelineno-30-129" href="#__codelineno-30-129"></a>
</span><span id="__span-30-130"><a id="__codelineno-30-130" name="__codelineno-30-130" href="#__codelineno-30-130"></a><span class="gh"># 允许使用port模式</span>
</span><span id="__span-30-131"><a id="__codelineno-30-131" name="__codelineno-30-131" href="#__codelineno-30-131"></a>port_enable=YES
</span><span id="__span-30-132"><a id="__codelineno-30-132" name="__codelineno-30-132" href="#__codelineno-30-132"></a>
</span><span id="__span-30-133"><a id="__codelineno-30-133" name="__codelineno-30-133" href="#__codelineno-30-133"></a><span class="gh"># 开启tcp_wrappers支持</span>
</span><span id="__span-30-134"><a id="__codelineno-30-134" name="__codelineno-30-134" href="#__codelineno-30-134"></a>tcp_wrappers=YES
</span><span id="__span-30-135"><a id="__codelineno-30-135" name="__codelineno-30-135" href="#__codelineno-30-135"></a>
</span><span id="__span-30-136"><a id="__codelineno-30-136" name="__codelineno-30-136" href="#__codelineno-30-136"></a><span class="gh"># 定义PAM 所使用的名称，预设为vsftpd</span>
</span><span id="__span-30-137"><a id="__codelineno-30-137" name="__codelineno-30-137" href="#__codelineno-30-137"></a>pam_service_name=vsftpd
</span><span id="__span-30-138"><a id="__codelineno-30-138" name="__codelineno-30-138" href="#__codelineno-30-138"></a>
</span><span id="__span-30-139"><a id="__codelineno-30-139" name="__codelineno-30-139" href="#__codelineno-30-139"></a><span class="gh"># 当服务器运行于最底层时使用的用户名</span>
</span><span id="__span-30-140"><a id="__codelineno-30-140" name="__codelineno-30-140" href="#__codelineno-30-140"></a>nopriv_user=nobody
</span><span id="__span-30-141"><a id="__codelineno-30-141" name="__codelineno-30-141" href="#__codelineno-30-141"></a>
</span><span id="__span-30-142"><a id="__codelineno-30-142" name="__codelineno-30-142" href="#__codelineno-30-142"></a><span class="gh"># 使vsftpd在pasv命令回复时跳转到指定的IP地址.(服务器连接跳转)</span>
</span><span id="__span-30-143"><a id="__codelineno-30-143" name="__codelineno-30-143" href="#__codelineno-30-143"></a>pasv_address=(none)
</span><span id="__span-30-144"><a id="__codelineno-30-144" name="__codelineno-30-144" href="#__codelineno-30-144"></a>
</span><span id="__span-30-145"><a id="__codelineno-30-145" name="__codelineno-30-145" href="#__codelineno-30-145"></a><span class="gu">## vsFTPd 服务器性能选项</span>
</span><span id="__span-30-146"><a id="__codelineno-30-146" name="__codelineno-30-146" href="#__codelineno-30-146"></a>
</span><span id="__span-30-147"><a id="__codelineno-30-147" name="__codelineno-30-147" href="#__codelineno-30-147"></a><span class="gh"># 是否能使用ls -R命令以防止浪费大量的服务器资源</span>
</span><span id="__span-30-148"><a id="__codelineno-30-148" name="__codelineno-30-148" href="#__codelineno-30-148"></a>ls_recurse_enable=NO
</span><span id="__span-30-149"><a id="__codelineno-30-149" name="__codelineno-30-149" href="#__codelineno-30-149"></a>
</span><span id="__span-30-150"><a id="__codelineno-30-150" name="__codelineno-30-150" href="#__codelineno-30-150"></a><span class="gh"># 是否使用单进程模式</span>
</span><span id="__span-30-151"><a id="__codelineno-30-151" name="__codelineno-30-151" href="#__codelineno-30-151"></a>one_process_model=NO
</span><span id="__span-30-152"><a id="__codelineno-30-152" name="__codelineno-30-152" href="#__codelineno-30-152"></a>
</span><span id="__span-30-153"><a id="__codelineno-30-153" name="__codelineno-30-153" href="#__codelineno-30-153"></a><span class="gh"># 当使用者登入后使用ls -al 之类的指令查询该档案的管理权时，预设会出现拥有者的UID，而不是该档案拥有者的名称。若是希望出现拥有者的名称，则将此功能开启。</span>
</span><span id="__span-30-154"><a id="__codelineno-30-154" name="__codelineno-30-154" href="#__codelineno-30-154"></a>text_userdb_names=NO
</span><span id="__span-30-155"><a id="__codelineno-30-155" name="__codelineno-30-155" href="#__codelineno-30-155"></a>
</span><span id="__span-30-156"><a id="__codelineno-30-156" name="__codelineno-30-156" href="#__codelineno-30-156"></a><span class="gh"># 显示目录清单时是用本地时间还是GMT时间,可以通过mdtm命令来达到一样的效果</span>
</span><span id="__span-30-157"><a id="__codelineno-30-157" name="__codelineno-30-157" href="#__codelineno-30-157"></a>use_localtime=NO
</span><span id="__span-30-158"><a id="__codelineno-30-158" name="__codelineno-30-158" href="#__codelineno-30-158"></a>
</span><span id="__span-30-159"><a id="__codelineno-30-159" name="__codelineno-30-159" href="#__codelineno-30-159"></a><span class="gh"># 测试平台优化</span>
</span><span id="__span-30-160"><a id="__codelineno-30-160" name="__codelineno-30-160" href="#__codelineno-30-160"></a>use_sendfile=YES
</span><span id="__span-30-161"><a id="__codelineno-30-161" name="__codelineno-30-161" href="#__codelineno-30-161"></a>
</span><span id="__span-30-162"><a id="__codelineno-30-162" name="__codelineno-30-162" href="#__codelineno-30-162"></a><span class="gu">## vsFTPd 信息类设置</span>
</span><span id="__span-30-163"><a id="__codelineno-30-163" name="__codelineno-30-163" href="#__codelineno-30-163"></a>
</span><span id="__span-30-164"><a id="__codelineno-30-164" name="__codelineno-30-164" href="#__codelineno-30-164"></a><span class="gh"># login时显示欢迎信息.如果设置了banner_file则此设置无效</span>
</span><span id="__span-30-165"><a id="__codelineno-30-165" name="__codelineno-30-165" href="#__codelineno-30-165"></a>ftpd_banner=欢迎来到FTP 网站
</span><span id="__span-30-166"><a id="__codelineno-30-166" name="__codelineno-30-166" href="#__codelineno-30-166"></a>
</span><span id="__span-30-167"><a id="__codelineno-30-167" name="__codelineno-30-167" href="#__codelineno-30-167"></a><span class="gh"># 允许为目录配置显示信息,显示每个目录下面的.message文件内容，设置message_file更改此设置</span>
</span><span id="__span-30-168"><a id="__codelineno-30-168" name="__codelineno-30-168" href="#__codelineno-30-168"></a>dirmessage_enable=YES
</span><span id="__span-30-169"><a id="__codelineno-30-169" name="__codelineno-30-169" href="#__codelineno-30-169"></a>
</span><span id="__span-30-170"><a id="__codelineno-30-170" name="__codelineno-30-170" href="#__codelineno-30-170"></a><span class="gh"># 显示会话状态信息</span>
</span><span id="__span-30-171"><a id="__codelineno-30-171" name="__codelineno-30-171" href="#__codelineno-30-171"></a>setproctitle_enable=YES
</span><span id="__span-30-172"><a id="__codelineno-30-172" name="__codelineno-30-172" href="#__codelineno-30-172"></a>
</span><span id="__span-30-173"><a id="__codelineno-30-173" name="__codelineno-30-173" href="#__codelineno-30-173"></a><span class="gu">## vsFTPd 文件定义</span>
</span><span id="__span-30-174"><a id="__codelineno-30-174" name="__codelineno-30-174" href="#__codelineno-30-174"></a>
</span><span id="__span-30-175"><a id="__codelineno-30-175" name="__codelineno-30-175" href="#__codelineno-30-175"></a><span class="gh"># 定义不能更改用户主目录的文件</span>
</span><span id="__span-30-176"><a id="__codelineno-30-176" name="__codelineno-30-176" href="#__codelineno-30-176"></a>chroot_list_file=/etc/vsftpd/vsftpd.chroot_list
</span><span id="__span-30-177"><a id="__codelineno-30-177" name="__codelineno-30-177" href="#__codelineno-30-177"></a>
</span><span id="__span-30-178"><a id="__codelineno-30-178" name="__codelineno-30-178" href="#__codelineno-30-178"></a><span class="gh"># 定义限制/允许用户登录的文件</span>
</span><span id="__span-30-179"><a id="__codelineno-30-179" name="__codelineno-30-179" href="#__codelineno-30-179"></a>userlist_file=/etc/vsftpd/vsftpd.user_list
</span><span id="__span-30-180"><a id="__codelineno-30-180" name="__codelineno-30-180" href="#__codelineno-30-180"></a>
</span><span id="__span-30-181"><a id="__codelineno-30-181" name="__codelineno-30-181" href="#__codelineno-30-181"></a><span class="gh"># 定义登录信息文件的位置</span>
</span><span id="__span-30-182"><a id="__codelineno-30-182" name="__codelineno-30-182" href="#__codelineno-30-182"></a>banner_file=/etc/vsftpd/banner
</span><span id="__span-30-183"><a id="__codelineno-30-183" name="__codelineno-30-183" href="#__codelineno-30-183"></a>
</span><span id="__span-30-184"><a id="__codelineno-30-184" name="__codelineno-30-184" href="#__codelineno-30-184"></a><span class="gh"># 禁止使用的匿名用户登陆时作为密码的电子邮件地址</span>
</span><span id="__span-30-185"><a id="__codelineno-30-185" name="__codelineno-30-185" href="#__codelineno-30-185"></a>banned_email_file=/etc/vsftpd.banned_emails
</span><span id="__span-30-186"><a id="__codelineno-30-186" name="__codelineno-30-186" href="#__codelineno-30-186"></a>
</span><span id="__span-30-187"><a id="__codelineno-30-187" name="__codelineno-30-187" href="#__codelineno-30-187"></a><span class="gh"># 日志文件位置</span>
</span><span id="__span-30-188"><a id="__codelineno-30-188" name="__codelineno-30-188" href="#__codelineno-30-188"></a>xferlog_file=/var/log/vsftpd.log
</span><span id="__span-30-189"><a id="__codelineno-30-189" name="__codelineno-30-189" href="#__codelineno-30-189"></a>
</span><span id="__span-30-190"><a id="__codelineno-30-190" name="__codelineno-30-190" href="#__codelineno-30-190"></a><span class="gh"># 目录信息文件</span>
</span><span id="__span-30-191"><a id="__codelineno-30-191" name="__codelineno-30-191" href="#__codelineno-30-191"></a>message_file=.message
</span><span id="__span-30-192"><a id="__codelineno-30-192" name="__codelineno-30-192" href="#__codelineno-30-192"></a>
</span><span id="__span-30-193"><a id="__codelineno-30-193" name="__codelineno-30-193" href="#__codelineno-30-193"></a><span class="gu">## vsFTPd 目录定义</span>
</span><span id="__span-30-194"><a id="__codelineno-30-194" name="__codelineno-30-194" href="#__codelineno-30-194"></a>
</span><span id="__span-30-195"><a id="__codelineno-30-195" name="__codelineno-30-195" href="#__codelineno-30-195"></a><span class="gh"># 定义用户配置文件的目录</span>
</span><span id="__span-30-196"><a id="__codelineno-30-196" name="__codelineno-30-196" href="#__codelineno-30-196"></a>user_config_dir=/etc/vsftpd/userconf
</span><span id="__span-30-197"><a id="__codelineno-30-197" name="__codelineno-30-197" href="#__codelineno-30-197"></a>
</span><span id="__span-30-198"><a id="__codelineno-30-198" name="__codelineno-30-198" href="#__codelineno-30-198"></a><span class="gh"># 定义本地用户登陆的根目录,注意定义根目录可以是相对路径也可以是绝对路径.相对路径是针对用户家目录来说的</span>
</span><span id="__span-30-199"><a id="__codelineno-30-199" name="__codelineno-30-199" href="#__codelineno-30-199"></a>local_root=webdisk # 此项设置每个用户登陆后其根目录为/home/username/webdisk
</span><span id="__span-30-200"><a id="__codelineno-30-200" name="__codelineno-30-200" href="#__codelineno-30-200"></a>
</span><span id="__span-30-201"><a id="__codelineno-30-201" name="__codelineno-30-201" href="#__codelineno-30-201"></a><span class="gh"># 匿名用户登陆后的根目录</span>
</span><span id="__span-30-202"><a id="__codelineno-30-202" name="__codelineno-30-202" href="#__codelineno-30-202"></a>anon_root=/var/ftp
</span><span id="__span-30-203"><a id="__codelineno-30-203" name="__codelineno-30-203" href="#__codelineno-30-203"></a>
</span><span id="__span-30-204"><a id="__codelineno-30-204" name="__codelineno-30-204" href="#__codelineno-30-204"></a><span class="gu">## vsFTPd 用户连接选项</span>
</span><span id="__span-30-205"><a id="__codelineno-30-205" name="__codelineno-30-205" href="#__codelineno-30-205"></a>
</span><span id="__span-30-206"><a id="__codelineno-30-206" name="__codelineno-30-206" href="#__codelineno-30-206"></a><span class="gh"># 可接受的最大client数目</span>
</span><span id="__span-30-207"><a id="__codelineno-30-207" name="__codelineno-30-207" href="#__codelineno-30-207"></a>max_clients=100
</span><span id="__span-30-208"><a id="__codelineno-30-208" name="__codelineno-30-208" href="#__codelineno-30-208"></a>
</span><span id="__span-30-209"><a id="__codelineno-30-209" name="__codelineno-30-209" href="#__codelineno-30-209"></a><span class="gh"># 每个ip的最大client数目</span>
</span><span id="__span-30-210"><a id="__codelineno-30-210" name="__codelineno-30-210" href="#__codelineno-30-210"></a>max_per_ip=12
</span><span id="__span-30-211"><a id="__codelineno-30-211" name="__codelineno-30-211" href="#__codelineno-30-211"></a>
</span><span id="__span-30-212"><a id="__codelineno-30-212" name="__codelineno-30-212" href="#__codelineno-30-212"></a><span class="gh"># 使用标准的20端口来连接ftp</span>
</span><span id="__span-30-213"><a id="__codelineno-30-213" name="__codelineno-30-213" href="#__codelineno-30-213"></a>connect_from_port_20=NO
</span><span id="__span-30-214"><a id="__codelineno-30-214" name="__codelineno-30-214" href="#__codelineno-30-214"></a>
</span><span id="__span-30-215"><a id="__codelineno-30-215" name="__codelineno-30-215" href="#__codelineno-30-215"></a><span class="gh"># 绑定到某个IP,其它IP不能访问</span>
</span><span id="__span-30-216"><a id="__codelineno-30-216" name="__codelineno-30-216" href="#__codelineno-30-216"></a>listen_address=192.168.0.2
</span><span id="__span-30-217"><a id="__codelineno-30-217" name="__codelineno-30-217" href="#__codelineno-30-217"></a>
</span><span id="__span-30-218"><a id="__codelineno-30-218" name="__codelineno-30-218" href="#__codelineno-30-218"></a><span class="gh"># 绑定到某个端口</span>
</span><span id="__span-30-219"><a id="__codelineno-30-219" name="__codelineno-30-219" href="#__codelineno-30-219"></a>listen_port=2121
</span><span id="__span-30-220"><a id="__codelineno-30-220" name="__codelineno-30-220" href="#__codelineno-30-220"></a>
</span><span id="__span-30-221"><a id="__codelineno-30-221" name="__codelineno-30-221" href="#__codelineno-30-221"></a><span class="gh"># 数据传输端口</span>
</span><span id="__span-30-222"><a id="__codelineno-30-222" name="__codelineno-30-222" href="#__codelineno-30-222"></a>ftp_data_port=2020
</span><span id="__span-30-223"><a id="__codelineno-30-223" name="__codelineno-30-223" href="#__codelineno-30-223"></a>
</span><span id="__span-30-224"><a id="__codelineno-30-224" name="__codelineno-30-224" href="#__codelineno-30-224"></a><span class="gh"># pasv连接模式时可以使用port 范围的上界，0 表示任意。默认值为0</span>
</span><span id="__span-30-225"><a id="__codelineno-30-225" name="__codelineno-30-225" href="#__codelineno-30-225"></a>pasv_max_port=0
</span><span id="__span-30-226"><a id="__codelineno-30-226" name="__codelineno-30-226" href="#__codelineno-30-226"></a>
</span><span id="__span-30-227"><a id="__codelineno-30-227" name="__codelineno-30-227" href="#__codelineno-30-227"></a><span class="gh"># pasv连接模式时可以使用port 范围的下界，0 表示任意。默认值为0</span>
</span><span id="__span-30-228"><a id="__codelineno-30-228" name="__codelineno-30-228" href="#__codelineno-30-228"></a>pasv_min_port=0
</span><span id="__span-30-229"><a id="__codelineno-30-229" name="__codelineno-30-229" href="#__codelineno-30-229"></a>
</span><span id="__span-30-230"><a id="__codelineno-30-230" name="__codelineno-30-230" href="#__codelineno-30-230"></a><span class="gu">## vsFTPd 数据传输选项</span>
</span><span id="__span-30-231"><a id="__codelineno-30-231" name="__codelineno-30-231" href="#__codelineno-30-231"></a>
</span><span id="__span-30-232"><a id="__codelineno-30-232" name="__codelineno-30-232" href="#__codelineno-30-232"></a><span class="gh"># 匿名用户的传输比率(bytes/s),0表示无限制</span>
</span><span id="__span-30-233"><a id="__codelineno-30-233" name="__codelineno-30-233" href="#__codelineno-30-233"></a>anon_max_rate=51200
</span><span id="__span-30-234"><a id="__codelineno-30-234" name="__codelineno-30-234" href="#__codelineno-30-234"></a>
</span><span id="__span-30-235"><a id="__codelineno-30-235" name="__codelineno-30-235" href="#__codelineno-30-235"></a><span class="gh"># 本地用户的传输比率(bytes/s),0表示无限制</span>
</span><span id="__span-30-236"><a id="__codelineno-30-236" name="__codelineno-30-236" href="#__codelineno-30-236"></a>local_max_rate=5120000
</span></code></pre></div>
<h3 id="rsync">rsync<a class="headerlink" href="#rsync" title="Permanent link">&para;</a></h3>
<h4 id="_15">选项<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>rsync [OPTION]... SRC DEST
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>rsync [OPTION]... SRC [USER@]host:DEST
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>rsync [OPTION]... [USER@]HOST:SRC DEST
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>rsync [OPTION]... [USER@]HOST::SRC DEST
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>rsync [OPTION]... SRC [USER@]HOST::DEST
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>对应于以上六种命令格式，rsync有六种不同的工作模式：
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="k">*</span><span class="w"> </span>同步本地目录。当SRC和DES路径信息都不包含有单个冒号&quot;:&quot;分隔符时就启动这种工作模式
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>  如：`rsync -a /data /backup`
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="k">*</span><span class="w"> </span>使用一个远程shell程序(如rsh、ssh)来实现将本地机器的内容拷贝到远程机器。当DST路径地址包含单个冒号&quot;:&quot;分隔符时启动该模式
</span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>  如：`rsync -avz *.c foo:src`
</span><span id="__span-31-15"><a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>
</span><span id="__span-31-16"><a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="k">*</span><span class="w"> </span>使用一个远程shell程序(如rsh、ssh)来实现将远程机器的内容拷贝到本地机器。当SRC地址路径包含单个冒号&quot;:&quot;分隔符时启动该模式
</span><span id="__span-31-17"><a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a>  如：`rsync -avz foo:src/bar /data`
</span><span id="__span-31-18"><a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a>
</span><span id="__span-31-19"><a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="k">*</span><span class="w"> </span>拉取：从远程rsync服务器中拷贝文件到本地机。当SRC路径信息包含&quot;::&quot;分隔符时启动该模式
</span><span id="__span-31-20"><a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a>  如：`rsync -av root@192.168.78.192::www /databack`
</span><span id="__span-31-21"><a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a>
</span><span id="__span-31-22"><a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a><span class="k">*</span><span class="w"> </span>推送：从本地机器拷贝文件到远程rsync服务器中。当DST路径信息包含&quot;::&quot;分隔符时启动该模式
</span><span id="__span-31-23"><a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a>  如：`rsync -av /databack root@192.168.78.192::www`
</span><span id="__span-31-24"><a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a>  rsync -av --exclude={one,two} /data root@xxxx::www    排除one和two目录
</span><span id="__span-31-25"><a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a>
</span><span id="__span-31-26"><a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a><span class="k">*</span><span class="w"> </span>列远程机的文件列表。这类似于rsync传输，不过只要在命令中省略掉本地机信息即可
</span><span id="__span-31-27"><a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a>  如：`rsync -v rsync://192.168.78.192/www`
</span><span id="__span-31-28"><a id="__codelineno-31-28" name="__codelineno-31-28" href="#__codelineno-31-28"></a>
</span><span id="__span-31-29"><a id="__codelineno-31-29" name="__codelineno-31-29" href="#__codelineno-31-29"></a>https://rsync.samba.org/resources.html
</span><span id="__span-31-30"><a id="__codelineno-31-30" name="__codelineno-31-30" href="#__codelineno-31-30"></a>原理论文：https://www.samba.org//~tridge/phd_thesis.pdf
</span><span id="__span-31-31"><a id="__codelineno-31-31" name="__codelineno-31-31" href="#__codelineno-31-31"></a>how_rsync_works:https://rsync.samba.org/how-rsync-works.html
</span><span id="__span-31-32"><a id="__codelineno-31-32" name="__codelineno-31-32" href="#__codelineno-31-32"></a>https://rsync.samba.org/examples.html
</span></code></pre></div>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>-v, --verbose               详细模式输出
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>    --info=FLAGS            细粒度的info输出
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>    --debug=FLAGS           细粒度的debug输出
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>    --msgs2stderr           special output handling for debugging
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>-q, --quiet                 suppress non-error messages
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>    --no-motd               suppress daemon-mode MOTD (see manpage caveat)
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>-c, --checksum              根据checksum跳过文件，而不是mod-time和size
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>-a, --archive               归档模式;等同于-rlptgoD (no -H,-A,-X)
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>    --no-OPTION             turn off an implied OPTION (e.g. --no-D)
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>-r, --recursive             对子目录进行递归处理
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>-R, --relative              使用相对路径的名称
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>    --no-implied-dirs       don&#39;t send implied dirs with --relative
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>-b, --backup                make backups (see --suffix &amp; --backup-dir)
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>    --backup-dir=DIR        make backups into hierarchy based in DIR
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>    --suffix=SUFFIX         set backup suffix (default ~ w/o --backup-dir)
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>-u, --update                跳过接收方比发送方较新的文件，即跳过所有已存在于DST且文件时间晚于SRC的文件
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>    --inplace               update destination files in-place (SEE MAN PAGE)
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>    --append                append data onto shorter files
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>    --append-verify         like --append, but with old data in file checksum
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>-d, --dirs                  transfer directories without recursing
</span><span id="__span-32-21"><a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>-l, --links                 保留软链接
</span><span id="__span-32-22"><a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>-L, --copy-links            将符号链接转换为对应的引用文件或引用目录
</span><span id="__span-32-23"><a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>    --copy-unsafe-links     only &quot;unsafe&quot; symlinks are transformed
</span><span id="__span-32-24"><a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>    --safe-links            ignore symlinks that point outside the source tree
</span><span id="__span-32-25"><a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a>    --munge-links           munge symlinks to make them safer (but unusable)
</span><span id="__span-32-26"><a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a>-k, --copy-dirlinks         transform symlink to a dir into referent dir
</span><span id="__span-32-27"><a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a>-K, --keep-dirlinks         treat symlinked dir on receiver as dir
</span><span id="__span-32-28"><a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a>-H, --hard-links            保留硬链接
</span><span id="__span-32-29"><a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a>-p, --perms                 保留文件权限
</span><span id="__span-32-30"><a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a>-E, --executability         preserve the file&#39;s executability
</span><span id="__span-32-31"><a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a>    --chmod=CHMOD           affect file and/or directory permissions
</span><span id="__span-32-32"><a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a>-A, --acls                  preserve ACLs (implies --perms)
</span><span id="__span-32-33"><a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a>-X, --xattrs                preserve extended attributes
</span><span id="__span-32-34"><a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a>-o, --owner                 保留文件属主信息(super-user only)
</span><span id="__span-32-35"><a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a>-g, --group                 保留文件属组信息
</span><span id="__span-32-36"><a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a>    --devices               preserve device files (super-user only)
</span><span id="__span-32-37"><a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a>    --copy-devices          copy device contents as regular file
</span><span id="__span-32-38"><a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a>    --specials              preserve special files
</span><span id="__span-32-39"><a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a>-D                          same as --devices --specials
</span><span id="__span-32-40"><a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a>-t, --times                 保留文件修改信息
</span><span id="__span-32-41"><a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a>-O, --omit-dir-times        omit directories from --times
</span><span id="__span-32-42"><a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a>-J, --omit-link-times       omit symlinks from --times
</span><span id="__span-32-43"><a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a>    --super                 receiver attempts super-user activities
</span><span id="__span-32-44"><a id="__codelineno-32-44" name="__codelineno-32-44" href="#__codelineno-32-44"></a>    --fake-super            store/recover privileged attrs using xattrs
</span><span id="__span-32-45"><a id="__codelineno-32-45" name="__codelineno-32-45" href="#__codelineno-32-45"></a>-S, --sparse                对稀疏文件(它能尝试在文件内容大多为空时更有效率地使用文件系统的空间)进行特殊处理以节省DST空间
</span><span id="__span-32-46"><a id="__codelineno-32-46" name="__codelineno-32-46" href="#__codelineno-32-46"></a>    --preallocate           allocate dest files before writing them
</span><span id="__span-32-47"><a id="__codelineno-32-47" name="__codelineno-32-47" href="#__codelineno-32-47"></a>-n, --dry-run               不进行实际的传输，只作为测试运行
</span><span id="__span-32-48"><a id="__codelineno-32-48" name="__codelineno-32-48" href="#__codelineno-32-48"></a>-W, --whole-file            copy files whole (without delta-xfer algorithm)
</span><span id="__span-32-49"><a id="__codelineno-32-49" name="__codelineno-32-49" href="#__codelineno-32-49"></a>-x, --one-file-system       don&#39;t cross filesystem boundaries
</span><span id="__span-32-50"><a id="__codelineno-32-50" name="__codelineno-32-50" href="#__codelineno-32-50"></a>-B, --block-size=SIZE       强制校检块大小
</span><span id="__span-32-51"><a id="__codelineno-32-51" name="__codelineno-32-51" href="#__codelineno-32-51"></a>-e, --rsh=COMMAND           指定rsh、ssh方式进行传输
</span><span id="__span-32-52"><a id="__codelineno-32-52" name="__codelineno-32-52" href="#__codelineno-32-52"></a>    --rsync-path=PROGRAM    指定远程服务器rsync命令所在路径
</span><span id="__span-32-53"><a id="__codelineno-32-53" name="__codelineno-32-53" href="#__codelineno-32-53"></a>    --existing              skip creating new files on receiver
</span><span id="__span-32-54"><a id="__codelineno-32-54" name="__codelineno-32-54" href="#__codelineno-32-54"></a>    --ignore-existing       skip updating files that already exist on receiver
</span><span id="__span-32-55"><a id="__codelineno-32-55" name="__codelineno-32-55" href="#__codelineno-32-55"></a>    --remove-source-files   sender removes synchronized files (non-dirs)
</span><span id="__span-32-56"><a id="__codelineno-32-56" name="__codelineno-32-56" href="#__codelineno-32-56"></a>    --del                   an alias for --delete-during
</span><span id="__span-32-57"><a id="__codelineno-32-57" name="__codelineno-32-57" href="#__codelineno-32-57"></a>    --delete                从DST删除在SRC中没有的文件(慎用)
</span><span id="__span-32-58"><a id="__codelineno-32-58" name="__codelineno-32-58" href="#__codelineno-32-58"></a>    --delete-before         receiver deletes before transfer, not during
</span><span id="__span-32-59"><a id="__codelineno-32-59" name="__codelineno-32-59" href="#__codelineno-32-59"></a>    --delete-during         receiver deletes during the transfer
</span><span id="__span-32-60"><a id="__codelineno-32-60" name="__codelineno-32-60" href="#__codelineno-32-60"></a>    --delete-delay          find deletions during, delete after
</span><span id="__span-32-61"><a id="__codelineno-32-61" name="__codelineno-32-61" href="#__codelineno-32-61"></a>    --delete-after          receiver deletes after transfer, not during
</span><span id="__span-32-62"><a id="__codelineno-32-62" name="__codelineno-32-62" href="#__codelineno-32-62"></a>    --delete-excluded       also delete excluded files from destination dirs
</span><span id="__span-32-63"><a id="__codelineno-32-63" name="__codelineno-32-63" href="#__codelineno-32-63"></a>    --ignore-missing-args   ignore missing source args without error
</span><span id="__span-32-64"><a id="__codelineno-32-64" name="__codelineno-32-64" href="#__codelineno-32-64"></a>    --delete-missing-args   delete missing source args from destination
</span><span id="__span-32-65"><a id="__codelineno-32-65" name="__codelineno-32-65" href="#__codelineno-32-65"></a>    --ignore-errors         delete even if there are I/O errors
</span><span id="__span-32-66"><a id="__codelineno-32-66" name="__codelineno-32-66" href="#__codelineno-32-66"></a>    --force                 force deletion of directories even if not empty
</span><span id="__span-32-67"><a id="__codelineno-32-67" name="__codelineno-32-67" href="#__codelineno-32-67"></a>    --max-delete=NUM        don&#39;t delete more than NUM files
</span><span id="__span-32-68"><a id="__codelineno-32-68" name="__codelineno-32-68" href="#__codelineno-32-68"></a>    --max-size=SIZE         don&#39;t transfer any file larger than SIZE
</span><span id="__span-32-69"><a id="__codelineno-32-69" name="__codelineno-32-69" href="#__codelineno-32-69"></a>    --min-size=SIZE         don&#39;t transfer any file smaller than SIZE
</span><span id="__span-32-70"><a id="__codelineno-32-70" name="__codelineno-32-70" href="#__codelineno-32-70"></a>    --partial               keep partially transferred files
</span><span id="__span-32-71"><a id="__codelineno-32-71" name="__codelineno-32-71" href="#__codelineno-32-71"></a>    --partial-dir=DIR       put a partially transferred file into DIR
</span><span id="__span-32-72"><a id="__codelineno-32-72" name="__codelineno-32-72" href="#__codelineno-32-72"></a>    --delay-updates         put all updated files into place at transfer&#39;s end
</span><span id="__span-32-73"><a id="__codelineno-32-73" name="__codelineno-32-73" href="#__codelineno-32-73"></a>-m, --prune-empty-dirs      prune empty directory chains from the file-list
</span><span id="__span-32-74"><a id="__codelineno-32-74" name="__codelineno-32-74" href="#__codelineno-32-74"></a>    --numeric-ids           don&#39;t map uid/gid values by user/group name
</span><span id="__span-32-75"><a id="__codelineno-32-75" name="__codelineno-32-75" href="#__codelineno-32-75"></a>    --usermap=STRING        custom username mapping
</span><span id="__span-32-76"><a id="__codelineno-32-76" name="__codelineno-32-76" href="#__codelineno-32-76"></a>    --groupmap=STRING       custom groupname mapping
</span><span id="__span-32-77"><a id="__codelineno-32-77" name="__codelineno-32-77" href="#__codelineno-32-77"></a>    --chown=USER:GROUP      simple username/groupname mapping
</span><span id="__span-32-78"><a id="__codelineno-32-78" name="__codelineno-32-78" href="#__codelineno-32-78"></a>    --timeout=SECONDS       set I/O timeout in seconds
</span><span id="__span-32-79"><a id="__codelineno-32-79" name="__codelineno-32-79" href="#__codelineno-32-79"></a>    --contimeout=SECONDS    set daemon connection timeout in seconds
</span><span id="__span-32-80"><a id="__codelineno-32-80" name="__codelineno-32-80" href="#__codelineno-32-80"></a>-I, --ignore-times          不跳过那些具有相同size和mod-time的文件
</span><span id="__span-32-81"><a id="__codelineno-32-81" name="__codelineno-32-81" href="#__codelineno-32-81"></a>-M, --remote-option=OPTION  send OPTION to the remote side only
</span><span id="__span-32-82"><a id="__codelineno-32-82" name="__codelineno-32-82" href="#__codelineno-32-82"></a>    --size-only             skip files that match in size
</span><span id="__span-32-83"><a id="__codelineno-32-83" name="__codelineno-32-83" href="#__codelineno-32-83"></a>    --modify-window=NUM     compare mod-times with reduced accuracy
</span><span id="__span-32-84"><a id="__codelineno-32-84" name="__codelineno-32-84" href="#__codelineno-32-84"></a>-T, --temp-dir=DIR          在DIR中创建临时文件
</span><span id="__span-32-85"><a id="__codelineno-32-85" name="__codelineno-32-85" href="#__codelineno-32-85"></a>-y, --fuzzy                 find similar file for basis if no dest file
</span><span id="__span-32-86"><a id="__codelineno-32-86" name="__codelineno-32-86" href="#__codelineno-32-86"></a>    --compare-dest=DIR      also compare destination files relative to DIR
</span><span id="__span-32-87"><a id="__codelineno-32-87" name="__codelineno-32-87" href="#__codelineno-32-87"></a>    --copy-dest=DIR         ... and include copies of unchanged files
</span><span id="__span-32-88"><a id="__codelineno-32-88" name="__codelineno-32-88" href="#__codelineno-32-88"></a>    --link-dest=DIR         hardlink to files in DIR when unchanged
</span><span id="__span-32-89"><a id="__codelineno-32-89" name="__codelineno-32-89" href="#__codelineno-32-89"></a>-z, --compress              传输过程中对文件数据进行压缩处理
</span><span id="__span-32-90"><a id="__codelineno-32-90" name="__codelineno-32-90" href="#__codelineno-32-90"></a>    --compress-level=NUM    explicitly set compression level
</span><span id="__span-32-91"><a id="__codelineno-32-91" name="__codelineno-32-91" href="#__codelineno-32-91"></a>    --skip-compress=LIST    skip compressing files with a suffix in LIST
</span><span id="__span-32-92"><a id="__codelineno-32-92" name="__codelineno-32-92" href="#__codelineno-32-92"></a>-C, --cvs-exclude           像CVS一样自动忽略文件
</span><span id="__span-32-93"><a id="__codelineno-32-93" name="__codelineno-32-93" href="#__codelineno-32-93"></a>-f, --filter=RULE           add a file-filtering RULE
</span><span id="__span-32-94"><a id="__codelineno-32-94" name="__codelineno-32-94" href="#__codelineno-32-94"></a>-F                          same as --filter=&#39;dir-merge /.rsync-filter&#39;
</span><span id="__span-32-95"><a id="__codelineno-32-95" name="__codelineno-32-95" href="#__codelineno-32-95"></a>                            repeated: --filter=&#39;- .rsync-filter&#39;
</span><span id="__span-32-96"><a id="__codelineno-32-96" name="__codelineno-32-96" href="#__codelineno-32-96"></a>    --exclude=PATTERN       排除与PATTERN相匹配的文件
</span><span id="__span-32-97"><a id="__codelineno-32-97" name="__codelineno-32-97" href="#__codelineno-32-97"></a>    --exclude-from=FILE     排除与FILE文件中pattern匹配的文件
</span><span id="__span-32-98"><a id="__codelineno-32-98" name="__codelineno-32-98" href="#__codelineno-32-98"></a>    --include=PATTERN       不排除与PATTERN相匹配的文件
</span><span id="__span-32-99"><a id="__codelineno-32-99" name="__codelineno-32-99" href="#__codelineno-32-99"></a>    --include-from=FILE     不排除FILE文件中指定pattern匹配的文件
</span><span id="__span-32-100"><a id="__codelineno-32-100" name="__codelineno-32-100" href="#__codelineno-32-100"></a>    --files-from=FILE       从FILE读取源文件名列表匹配要传输的文件
</span><span id="__span-32-101"><a id="__codelineno-32-101" name="__codelineno-32-101" href="#__codelineno-32-101"></a>-0, --from0                 all *-from/filter files are delimited by 0s
</span><span id="__span-32-102"><a id="__codelineno-32-102" name="__codelineno-32-102" href="#__codelineno-32-102"></a>-s, --protect-args          no space-splitting; only wildcard special-chars
</span><span id="__span-32-103"><a id="__codelineno-32-103" name="__codelineno-32-103" href="#__codelineno-32-103"></a>    --address=ADDRESS       bind address for outgoing socket to daemon
</span><span id="__span-32-104"><a id="__codelineno-32-104" name="__codelineno-32-104" href="#__codelineno-32-104"></a>    --port=PORT             指定其他的rsync服务端口
</span><span id="__span-32-105"><a id="__codelineno-32-105" name="__codelineno-32-105" href="#__codelineno-32-105"></a>    --sockopts=OPTIONS      specify custom TCP options
</span><span id="__span-32-106"><a id="__codelineno-32-106" name="__codelineno-32-106" href="#__codelineno-32-106"></a>    --blocking-io           use blocking I/O for the remote shell
</span><span id="__span-32-107"><a id="__codelineno-32-107" name="__codelineno-32-107" href="#__codelineno-32-107"></a>    --stats                 give some file-transfer stats
</span><span id="__span-32-108"><a id="__codelineno-32-108" name="__codelineno-32-108" href="#__codelineno-32-108"></a>-8, --8-bit-output          leave high-bit chars unescaped in output
</span><span id="__span-32-109"><a id="__codelineno-32-109" name="__codelineno-32-109" href="#__codelineno-32-109"></a>-h, --human-readable        output numbers in a human-readable format
</span><span id="__span-32-110"><a id="__codelineno-32-110" name="__codelineno-32-110" href="#__codelineno-32-110"></a>    --progress              显示传输过程
</span><span id="__span-32-111"><a id="__codelineno-32-111" name="__codelineno-32-111" href="#__codelineno-32-111"></a>-P                          same as --partial --progress
</span><span id="__span-32-112"><a id="__codelineno-32-112" name="__codelineno-32-112" href="#__codelineno-32-112"></a>-i, --itemize-changes       output a change-summary for all updates
</span><span id="__span-32-113"><a id="__codelineno-32-113" name="__codelineno-32-113" href="#__codelineno-32-113"></a>    --out-format=FORMAT     output updates using the specified FORMAT
</span><span id="__span-32-114"><a id="__codelineno-32-114" name="__codelineno-32-114" href="#__codelineno-32-114"></a>    --log-file=FILE         log what we&#39;re doing to the specified FILE
</span><span id="__span-32-115"><a id="__codelineno-32-115" name="__codelineno-32-115" href="#__codelineno-32-115"></a>    --log-file-format=FMT   log updates using the specified FMT
</span><span id="__span-32-116"><a id="__codelineno-32-116" name="__codelineno-32-116" href="#__codelineno-32-116"></a>    --password-file=FILE    从FILE文件读取rsync后台程序访问密码
</span><span id="__span-32-117"><a id="__codelineno-32-117" name="__codelineno-32-117" href="#__codelineno-32-117"></a>    --list-only             list the files instead of copying them
</span><span id="__span-32-118"><a id="__codelineno-32-118" name="__codelineno-32-118" href="#__codelineno-32-118"></a>    --bwlimit=RATE          限制socket I/O带宽
</span><span id="__span-32-119"><a id="__codelineno-32-119" name="__codelineno-32-119" href="#__codelineno-32-119"></a>    --outbuf=N|L|B          set output buffering to None, Line, or Block
</span><span id="__span-32-120"><a id="__codelineno-32-120" name="__codelineno-32-120" href="#__codelineno-32-120"></a>    --write-batch=FILE      write a batched update to FILE
</span><span id="__span-32-121"><a id="__codelineno-32-121" name="__codelineno-32-121" href="#__codelineno-32-121"></a>    --only-write-batch=FILE like --write-batch but w/o updating destination
</span><span id="__span-32-122"><a id="__codelineno-32-122" name="__codelineno-32-122" href="#__codelineno-32-122"></a>    --read-batch=FILE       read a batched update from FILE
</span><span id="__span-32-123"><a id="__codelineno-32-123" name="__codelineno-32-123" href="#__codelineno-32-123"></a>    --protocol=NUM          force an older protocol version to be used
</span><span id="__span-32-124"><a id="__codelineno-32-124" name="__codelineno-32-124" href="#__codelineno-32-124"></a>    --iconv=CONVERT_SPEC    request charset conversion of filenames
</span><span id="__span-32-125"><a id="__codelineno-32-125" name="__codelineno-32-125" href="#__codelineno-32-125"></a>    --checksum-seed=NUM     set block/file checksum seed (advanced)
</span><span id="__span-32-126"><a id="__codelineno-32-126" name="__codelineno-32-126" href="#__codelineno-32-126"></a>-4, --ipv4                  prefer IPv4
</span><span id="__span-32-127"><a id="__codelineno-32-127" name="__codelineno-32-127" href="#__codelineno-32-127"></a>-6, --ipv6                  prefer IPv6
</span><span id="__span-32-128"><a id="__codelineno-32-128" name="__codelineno-32-128" href="#__codelineno-32-128"></a>
</span><span id="__span-32-129"><a id="__codelineno-32-129" name="__codelineno-32-129" href="#__codelineno-32-129"></a>--checksum详解：改变了rsync检查文件是否已更改以及是否需要传输的方式。如果没有此选项，rsync将使用“快速检查”（默认情况下），检查每个
</span><span id="__span-32-130"><a id="__codelineno-32-130" name="__codelineno-32-130" href="#__codelineno-32-130"></a>文件的大小和上次修改时间在发送方和接收方之间是否匹配。此选项将其更改为比较每个具有匹配大小的文件的128位校验和。生成校验和意味着双方将
</span><span id="__span-32-131"><a id="__codelineno-32-131" name="__codelineno-32-131" href="#__codelineno-32-131"></a>花费大量的磁盘I / O来读取传输中文件中的所有数据（这是在进行任何读取以传输更改的文件之前），因此这会减慢速度显著
</span></code></pre></div>
<h4 id="_16">实例<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="s">注意事项：</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="s"># 创建密码文件，用户名可以和密码可以随便定义,服务端需要user:pass形式，客户端只需要pass就行</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="s">echo &quot;work:abc123&quot; &gt; /etc/rsyncd.passwd</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="s">chmod 600 /etc/rsyncd.passwd</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="s">windows下rsync权限注意事项：密码文件执行：chmod 600 rsync.passwd,用当前用户执行：chown 用户名 rsync.passwd</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="s">将文件发送到Microsoft文件系统：如果文件的修改时间是一个奇数值，但是接收文件系统只能存储偶数值，</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="s">那么rsync将重新传输太多文件。您可以通过指定--modify-window = 1选项来避免这种情况</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="s">comment</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="c1"># 使用SSH方式rsync进行同步</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>rsync<span class="w"> </span>-vzrtopg<span class="w"> </span>--progress<span class="w"> </span>-e<span class="w"> </span>ssh<span class="w"> </span>--delete<span class="w"> </span>work@172.16.78.192:/www/*<span class="w"> </span>/databack/experiment/rsync
</span></code></pre></div>
<h5 id="_17">后台服务方式<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h5>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>https://download.samba.org/pub/rsync/rsyncd.conf.html
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="gh"># 默认安装好rsync程序后，配置文件为“/etc/rsyncd.conf”</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="gh"># 全局参数，使用[global]模块名称指示一个或多个全局参数的开始，名称必须小写</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>[global]
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>motd file = path_to_file  # 指定每次连接时显示给客户端的消息
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="gh"># pid file = /var/run/rsyncd.pid    # 将进程id写入此文件</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>port = PORT # 指定rsync进程端口号，默认873
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>address = x # 通过指定此值来覆盖守护程序默认监听的IP地址
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>socket options = xx # 设置各种套接字选项，这些选项可能会使传输更快或更慢,具体参考setsockopt()系统调用的手册页
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>listen backlog = x  # 覆盖rsync进程对于连接的backlog value，默认为5
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="gh"># 模块名称不能包含斜杠或右方括号,名称内部包含多个空格都作为一个空格对待，首尾空格会被丢弃</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>[module]
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>comment = x  #  当客户端获取可用模块列表时，此参数指定在模块名称旁边显示的描述字符串，默认没注释
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>path = x    # 指定rsync守护程序文件系统中的目录，必须为每个module指定此参数。可以使用百分号将变量名称括起来，从而使路径的值基于环境变量。
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>              也可以引用用户连接时由rsync设置的变量。例如在路径中使用授权用户的名称：path = /home/%RSYNC_USER_NAME%
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>use chroot = yes  # 值为yes时，rsync守护程序将chroot到“ path”，然后再开始与客户端进行文件传输。好处是可以提供额外的保护，以防止可能的
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>                    安全漏洞，但是它的缺点是需要超级用户特权
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>daemon chroot = x   # 此参数指定守护程序在开始与客户端通信之前将其更改为chroot的路径
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>numeric ids = x # 启用此参数将禁用当前守护程序模块的按名称映射用户和组。这样可以防止守护程序尝试加载任何与用户/组相关的文件或库。
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>                  默认情况下，此参数对chroot模块启用，对非chroot模块禁用。启用chroot的模块不应启用此参数
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a>charset = x # 指定了存储模块文件名的字符集。如果客户端使用--iconv选项，则守护程序将使用“字符集”参数的值，而与客户端实际传递的字符集无关。
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a>              这使守护进程rsync可以在chroot模块中支持字符集转换且还可以确保以一致的方式完成名称转换。如果未设置“ charset”参数，
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a>              则--iconv选项将被拒绝
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a>max connections = x #
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a>
</span><span id="__span-34-27"><a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a><span class="gh"># uid = nobody</span>
</span><span id="__span-34-28"><a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="gh"># gid = nobody</span>
</span><span id="__span-34-29"><a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a><span class="gh"># max connections = 4</span>
</span><span id="__span-34-30"><a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="gh"># exclude = lost+found/</span>
</span><span id="__span-34-31"><a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a><span class="gh"># transfer logging = yes</span>
</span><span id="__span-34-32"><a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a><span class="gh"># timeout = 900</span>
</span><span id="__span-34-33"><a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a><span class="gh"># ignore nonreadable = yes</span>
</span><span id="__span-34-34"><a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a><span class="gh"># dont compress   = *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2</span>
</span><span id="__span-34-35"><a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a>
</span><span id="__span-34-36"><a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a><span class="gh"># [ftp]</span>
</span><span id="__span-34-37"><a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a><span class="gh">#        path = /home/ftp</span>
</span><span id="__span-34-38"><a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a><span class="gh">#        comment = ftp export area</span>
</span><span id="__span-34-39"><a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a><span class="gh">#</span>
</span><span id="__span-34-40"><a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a><span class="gh">#</span>
</span></code></pre></div>
<h3 id="inotify-tools">inotify-tools<a class="headerlink" href="#inotify-tools" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>https://github.com/rvoicilas/inotify-tools/wiki
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>inotifywait [-hcmrq] [-e &lt;event&gt; ] [-t &lt;seconds&gt; ] [--format &lt;fmt&gt; ] [--timefmt &lt;fmt&gt; ] &lt;file&gt; [ ... ]
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>各个参数的含义
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>inotifywait参数含义说明
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>-m --monitor   始终保持事件监听状态
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>-r --recursive  递归查询目录
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>-q --quiet      打印很少的信息，仅仅打印监控事件的信息
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>--exclude       排除文件或目录时，不区分大小写。
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>--timefmt       指定时间输出的格式
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>--format        打印使用指定的输出类似格式字符串
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>-e，--event     通过此参数可以指定需要监控的事件，如下一个列表所示
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>-e ：--event的各种事件含义
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>access      文件或目录被读取
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a>modify      文件或目录内容被修改
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>attrib      文件或目录属性被改变
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>close       文件或目录封闭，无论读/写模式
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>open        文件或目录被打开
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a>moved_to    文件或目录被移动至另外一个目录
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>move        文件或目录被移动到另一个目录或从另一个目录移动至当前目录
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a>create      文件或目录被创建在当前目录
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a>delete      文件或目录被删除
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a>umount      文件系统被卸载
</span></code></pre></div>
<h3 id="samba">samba<a class="headerlink" href="#samba" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>
</span></code></pre></div>
<h3 id="bind-dns">Bind-DNS<a class="headerlink" href="#bind-dns" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1"># DNS-bind安装和配置</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>:<span class="w"> </span><span class="s">&lt;&lt; comment</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="s">https://ftp.isc.org/</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="s">http://www.isc.org/downloads/</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="s">解决bind9 dumping master file tmp-xxxx open permission denied问题，解决方法如下：</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="s">对于Redhat Linux，只要在slave那台的dns主机上修改/etc/sysconfig/named加上ENABLE_ZONE_WRITE=yes，重启named即可</span>
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="s">对于Ubuntu系统，修改/etc/apparmor.d/usr.sbin.named，查找/etc/bind/** r，修改成/etc/bind/** rw</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="s">然后重启apparmor：/etc/init.d/apparmor rstart或者reload配置：cat /etc/apparmor.d/usr.sbin.named | sudo apparmor_parser -r</span>
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="s">comment</span>
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a>
</span><span id="__span-37-12"><a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a>wget<span class="w"> </span>https://www.isc.org/downloads/file/bind-9-10-6-p1/?version<span class="o">=</span>tar-gz
</span><span id="__span-37-13"><a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a>tar<span class="w"> </span>-zxvf
</span><span id="__span-37-14"><a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a>./configure<span class="w"> </span>--with-openssl<span class="w"> </span>--enable-threads<span class="w"> </span>--with-libxml2
</span><span id="__span-37-15"><a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a>make<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>install
</span><span id="__span-37-16"><a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a>touch<span class="w"> </span>/etc/named.conf
</span><span id="__span-37-17"><a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a>named<span class="w"> </span>-V
</span><span id="__span-37-18"><a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a>named<span class="w"> </span>-g
</span></code></pre></div>
<h3 id="bind-dhcp">Bind-DHCP<a class="headerlink" href="#bind-dhcp" title="Permanent link">&para;</a></h3>
<div class="language-markdown highlight"><span class="filename">Markdown</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>https://www.isc.org/dhcp/
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>https://www.isc.org/kea/
</span></code></pre></div>
<h3 id="mail-server">mail server<a class="headerlink" href="#mail-server" title="Permanent link">&para;</a></h3>
<ul>
<li>Postfix（MTA，邮件传输代理）通过SMTP协议（简单邮件传输协议）将邮件从您的服务器传输到其他服务器</li>
<li>Dovecot（MDA，邮件传递代理）通过IMAP（Internet邮件访问协议）或POP3协议（邮局协议3）将邮件从服务器传递到</li>
<li>Thunderbird（MUA，邮件用户代理）</li>
</ul>
<p><a href="https://en.wikipedia.org/wiki/Comparison_of_mail_servers">邮件服务器比较参考</a></p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1"># PostFix Dovecot邮件服务器和后台管理</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>dovecot.org
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>postfix.org
</span></code></pre></div>
<h4 id="email">email安装过程相关问题和配置<a class="headerlink" href="#email" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1"># 出现Maildir权限问题解决方法</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="c1"># 检查selinux状态并关闭</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>sestatus<span class="w"> </span>-v<span class="w"> </span><span class="c1"># 检查selinux状态</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>getenforce<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">#  设置selinux为permissive模式()临时关闭，不用重启，重启后失效</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="c1"># 永久生效方法：修改/etc/selinux/config文件，SELINUX=enforcing更改为SELINUX=disabled</span>
</span></code></pre></div>









  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        此页面是否有帮助?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="有帮助" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9h4m4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21H9m0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03V19Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="没帮助" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12h-4M15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3h9m0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97V5Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              感谢您的点赞!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              感谢您真诚的反馈! Help me improve this page by using our <a href="..." target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.25 6a3.25 3.25 0 0 1 3.25-3.25A3.25 3.25 0 0 1 17.75 6c0 .42.33.75.75.75s.75-.33.75-.75v-.75h1.5V6a2.25 2.25 0 0 1-2.25 2.25A2.25 2.25 0 0 1 16.25 6a1.75 1.75 0 0 0-1.75-1.75A1.75 1.75 0 0 0 12.75 6H14v1.29c2.89.86 5 3.54 5 6.71a7 7 0 0 1-7 7 7 7 0 0 1-7-7c0-3.17 2.11-5.85 5-6.71V6h1.25M22 6h2v1h-2V6m-3-2V2h1v2h-1m1.91.38 1.42-1.42.71.71-1.42 1.42-.71-.71Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../../" class="md-footer__link md-footer__link--prev" aria-label="上一页: Index">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Index
              </div>
            </div>
          </a>
        
        
          
          <a href="../Debian/" class="md-footer__link md-footer__link--next" aria-label="下一页: Debian">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Debian
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Black-Gold" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/black0gold/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.path", "navigation.prune", "navigation.top", "navigation.footer", "search.highlight", "search.suggest", "search.share", "content.code.copy", "content.code.select", "content.code.annotate", "content.tabs.link", "content.footnote.tooltips"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>